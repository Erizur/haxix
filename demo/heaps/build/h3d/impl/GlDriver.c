// Generated by HLC 5.0.0 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <h3d/impl/GlDriver.h>
#include <h3d/impl/RenderFlag.h>
void h3d_impl_GlDriver_resetStream(h3d__impl__GlDriver);
#include <hl/natives.h>
#include <hxsl/GlslOut.h>
extern hl_type t$hxsl_GlslOut;
void hxsl_GlslOut_new(hxsl__GlslOut);
vdynamic* sdl_GL_getParameter(int);
extern hl_type t$String;
extern hl_type t$_dyn;
String Std_string(vdynamic*);
extern String s$_GLv;
String String___add__(String,String);
extern String s$6666cd7;
hl__types__ArrayObj String_split(String,String);
vdynamic* hl_types_ArrayObj_shift(hl__types__ArrayObj);
extern String s$OpenGL_;
#include <hxsl/RuntimeShaderData.h>
#include <h3d/impl/_GlDriver/CompiledShader.h>
String hxsl_GlslOut_run(hxsl__GlslOut,vvirtual*);
extern hl_type t$hl_types_ArrayObj;
String sdl_GL_getShaderInfoLog(vdynamic*);
extern hl_type t$_i32;
String String_substr(String,int,vdynamic*);
vdynamic* Std_parseInt(String);
extern String s$68b329d;
extern String s$;
extern String s$84c4047;
String StringTools_trim(String);
extern String s$9371d7a;
String String___alloc__(vbyte*,int);
extern String s$5e732a1;
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
extern String s$9c28b1f;
extern String s$e1c06d8;
String hl_types_ArrayObj_join(hl__types__ArrayObj,String);
extern hl_type t$h3d_impl__GlDriver_CompiledShader;
void h3d_impl__GlDriver_CompiledShader_new(h3d__impl___GlDriver__CompiledShader,vdynamic*,bool,hxsl__RuntimeShaderData);
#include <hxsl/RuntimeShader.h>
#include <hxsl/Type.h>
#include <hxsl/AllocParam.h>
#include <hxsl/SizeDecl.h>
#include <hxsl/SharedShader.h>
#include <hxsl/ShaderInstanceDesc.h>
extern String s$vertex;
extern String s$fragment;
extern String s$Globals;
extern String s$Params;
extern hl_type t$vrt_76f0bb9;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern venum* g$hxsl_Type_TSampler2D;
extern String s$Unsupported_texture_type_;
extern String s$Textures;
extern String s$TexturesArray;
extern String s$TexturesCube;
extern String s$8154172;
extern String s$0fbd177;
extern String s$368af7a;
extern String s$5058f1a;
extern String s$814a5ca;
extern hl_type t$nul_i32;
extern hl_type t$hxsl_Type;
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
hl__types__ArrayBytes_Int hl_types_ArrayBase_allocI32(vbyte*,int);
extern String s$vertex_;
extern String s$uniform_buffer;
int hl_types_ArrayBytes_Int_push(hl__types__ArrayBytes_Int,int);
#include <hxsl/VarKind.h>
#include <h3d/impl/_GlDriver/CompiledAttribute.h>
#include <hxsl/VarQualifier.h>
#include <hxd/BufferInput.h>
#include <hxd/BufferFormat.h>
vdynamic* haxe_ds_IntMap_get(haxe__ds__IntMap,int);
extern hl_type t$h3d_impl__GlDriver_CompiledProgram;
void h3d_impl__GlDriver_CompiledProgram_new(h3d__impl___GlDriver__CompiledProgram);
extern hl_type t$vrt_09f4a29;
extern hl_type t$hxsl_VarKind;
bool haxe_ds_IntMap_exists(haxe__ds__IntMap,int);
String sdl_GL_getProgramInfoLog(vdynamic*);
extern String s$Shader_linkage_error_;
extern String s$bbee82c;
int String___compare(String,vdynamic*);
extern String s$Program_linkage_failure_;
extern String s$_Vertex_;
extern String s$_Fragment_;
extern hl_type t$h3d_impl__GlDriver_CompiledAttribute;
extern hl_type t$hxd_BufferInput;
int hxd__BufferFormat_InputFormat_Impl__fromHXSL(venum*);
extern String s$assert;
void h3d_impl__GlDriver_CompiledAttribute_new(h3d__impl___GlDriver__CompiledAttribute);
void hxd_BufferInput_new(hxd__BufferInput,String,int,int*);
hxd__BufferFormat hxd_BufferFormat_make(hl__types__ArrayObj);
void haxe_ds_IntMap_set(haxe__ds__IntMap,int,vdynamic*);
void h3d_impl_GlDriver_setProgram(h3d__impl__GlDriver,h3d__impl___GlDriver__CompiledProgram);
extern hl_type t$_bool;
#include <h3d/shader/Buffers.h>
#include <h3d/shader/ShaderBuffers.h>
void h3d_impl_GlDriver_uploadBuffer(h3d__impl__GlDriver,h3d__shader__Buffers,h3d__impl___GlDriver__CompiledShader,h3d__shader__ShaderBuffers,int);
#include <hl/types/ArrayBytes_hl_F32.h>
#include <h3d/mat/Defaults.h>
#include <h3d/mat/MipMap.h>
#include <h3d/mat/Filter.h>
#include <h3d/mat/Wrap.h>
void h3d_impl_GlDriver_expandStream(h3d__impl__GlDriver,int);
bool h3d_mat_Texture_isDepth(h3d__mat__Texture);
extern String s$Missing_texture;
extern h3d__mat__$Defaults g$_h3d_mat_Defaults;
extern hl_type t$_f64;
h3d__mat__Texture h3d_mat_Texture_fromColor(int,vdynamic*);
h3d__mat__Texture h3d_mat_Texture_defaultCubeTexture(void);
void h3d_mat_Texture_alloc(h3d__mat__Texture);
int h3d_mat_Texture_set_lastFrame(h3d__mat__Texture,int);
extern hl_type t$vrt_6ab1ef9;
int h3d_impl_GlDriver_getBindType(h3d__impl__GlDriver,h3d__mat__Texture);
extern String s$Texture_format_mismatch_;
extern String s$_should_be_;
extern h3d__impl__$GlDriver g$_h3d_impl_GlDriver;
extern hl_type t$hl_types_ArrayBytes_Int;
#include <h3d/mat/Pass.h>
#include <h3d/mat/Face.h>
void h3d_impl_GlDriver_selectMaterialBits(h3d__impl__GlDriver,int);
extern String s$eca39e1;
void h3d_impl_GlDriver_selectStencilBits(h3d__impl__GlDriver,int,int);
bool h3d_mat_Texture_isSRGB(h3d__mat__Texture);
void h3d_impl_GlDriver_disposeDepthBuffer(h3d__impl__GlDriver,h3d__mat__Texture);
vvirtual* h3d_impl_GlDriver_allocDepthBuffer(h3d__impl__GlDriver,h3d__mat__Texture);
extern String s$Invalid_format_;
#include <hxd/PixelFormat.h>
#include <h3d/impl/Feature.h>
extern venum* g$h3d_impl_Feature_FloatTextures;
bool h3d_impl_GlDriver_hasFeature(h3d__impl__GlDriver,venum*);
extern venum* g$h3d_impl_Feature_SRGBTextures;
extern String s$Unsupported_texture_format_;
extern String s$Compressed_texture_;
extern String s$_has_size_;
extern String s$x;
extern String s$_must_be_a_multiple_of_4;
int h3d_mat_Texture_get_mipLevels(h3d__mat__Texture);
extern String s$Failed_to_alloc_texture_;
extern String s$_error_;
void h3d_impl_GlDriver_restoreBind(h3d__impl__GlDriver);
extern String s$Unsupported_depth_format_;
extern hl_type t$h3d_mat_Texture;
extern venum* g$hxd_PixelFormat_Depth24Stencil8;
void h3d_mat_Texture_new(h3d__mat__Texture,int,int,hl__types__ArrayObj,venum*);
extern String s$defaultDepthBuffer;
extern hl_type t$vrt_2ede348;
extern hl_type t$vrt_140cb34;
extern hl_type t$_bytes;
#include <hxd/Pixels.h>
#include <haxe/io/Bytes.h>
#include <haxe/io/BytesDataImpl.h>
void hxd_Pixels_convert(hxd__Pixels,venum*);
extern hl_type t$haxe_io_BytesDataImpl;
void haxe_io_BytesDataImpl_new(haxe__io__BytesDataImpl,vbyte*,int);
#include <hl/types/ArrayBytes_hl_UI16.h>
extern String s$No_shader_selected;
hl__types__ArrayBytes_Int hxd_BufferFormat_resolveMapping(hxd__BufferFormat,hxd__BufferFormat);
void hl_types_ArrayBytes_Int___expand(hl__types__ArrayBytes_Int,int);
#include <hxd/MultiFormat.h>
hl__types__ArrayBytes_Int hxd_MultiFormat_makeMapping(hxd__MultiFormat,hxd__BufferFormat);
#include <h3d/impl/InstanceBuffer.h>
#include <sdl/Window.h>
#include <hxd/Window.h>
extern hxd__$Window g$_hxd_Window;
void sdl_Window_present(sdl__Window);
#include <h3d/DepthBinding.h>
extern venum* g$h3d_DepthBinding_ReadWrite;
extern String s$001f888;
extern String s$d24471f;
extern venum* g$h3d_DepthBinding_NotBound;
bool h3d_mat_Texture_hasStencil(h3d__mat__Texture);
#include <haxe/Timer.h>
extern hl_type t$ctx_a1ee9dc;
extern hl_type t$fun_d394350;
haxe__Timer haxe_Timer_delay(vclosure*,int);
#include <hxd/Timer.h>
#include <_std/EReg.h>
void hl_types_ArrayObj_new(hl__types__ArrayObj);
void h3d_impl_Driver_new(h3d__impl__Driver);
extern hl_type t$haxe_ds_IntMap;
void haxe_ds_IntMap_new(haxe__ds__IntMap);
extern hl_type t$h3d_mat_Stencil;
void h3d_mat_Stencil_new(h3d__mat__Stencil);
extern hxd__$Timer g$_hxd_Timer;
String String_toLowerCase(String);
extern hl_type t$EReg;
extern String s$intel_graphics;
void EReg_new(EReg,String,String);
bool EReg_match(EReg,String);
extern String s$ES_0_9_0_9_;
String EReg_matched(EReg,int);
double Std_parseFloat(String);
extern String s$_0_9_0_9_;

void h3d_impl_GlDriver_setRenderFlag(h3d__impl__GlDriver r0,venum* r1,int r2) {
	bool r3;
	int r4;
	r4 = 0;
	if( r2 > r4 ) goto label$8f388d3_1_4;
	r3 = false;
	goto label$8f388d3_1_5;
	label$8f388d3_1_4:
	r3 = true;
	label$8f388d3_1_5:
	r0->rightHanded = r3;
	return;
}

void h3d_impl_GlDriver_setDebug(h3d__impl__GlDriver r0,bool r1) {
	r0->debug = r1;
	return;
}

void h3d_impl_GlDriver_begin(h3d__impl__GlDriver r0,int r1) {
	h3d__impl___GlDriver__CompiledProgram r4;
	h3d__Buffer r5;
	vdynamic *r3;
	r0->frame = r1;
	h3d_impl_GlDriver_resetStream(r0);
	r3 = NULL;
	sdl_gl_use_program(r3);
	r4 = NULL;
	r0->curShader = r4;
	r5 = NULL;
	r0->curBuffer = r5;
	return;
}

hxsl__GlslOut h3d_impl_GlDriver_makeCompiler(h3d__impl__GlDriver r0) {
	hxsl__GlslOut r1;
	bool r5;
	vdynamic *r3, *r4;
	r1 = (hxsl__GlslOut)hl_alloc_obj(&t$hxsl_GlslOut);
	hxsl_GlslOut_new(r1);
	r3 = r0->glES;
	r1->glES = r3;
	r4 = r0->shaderVersion;
	r1->version = r4;
	r5 = r0->isIntelGpu;
	r1->intelDriverFix = r5;
	return r1;
}

String h3d_impl_GlDriver_getDriverName(h3d__impl__GlDriver r0,bool r1) {
	String r4, r5, r6, r7;
	hl__types__ArrayObj r8;
	vdynamic *r2;
	int r3;
	r3 = 7937;
	r2 = sdl_GL_getParameter(r3);
	r4 = (String)hl_dyn_castp(&r2,&t$_dyn,&t$String);
	if( !r1 ) goto label$8f388d3_5_13;
	r5 = Std_string(((vdynamic*)r4));
	r6 = (String)s$_GLv;
	r3 = 7938;
	r2 = sdl_GL_getParameter(r3);
	r7 = Std_string(r2);
	r6 = String___add__(r6,r7);
	r5 = String___add__(r5,r6);
	r4 = r5;
	goto label$8f388d3_5_20;
	label$8f388d3_5_13:
	if( r4 == NULL ) hl_null_access();
	r6 = (String)s$6666cd7;
	r8 = String_split(r4,r6);
	if( r8 == NULL ) hl_null_access();
	r2 = hl_types_ArrayObj_shift(r8);
	r5 = (String)r2;
	r4 = r5;
	label$8f388d3_5_20:
	r5 = (String)s$OpenGL_;
	r5 = String___add__(r5,r4);
	return r5;
}

h3d__impl___GlDriver__CompiledShader h3d_impl_GlDriver_compileShader(h3d__impl__GlDriver r0,hxsl__GlslOut r1,hxsl__RuntimeShaderData r2) {
	String r8, r14, r15, r16, r19;
	hl__types__ArrayObj r10;
	vvirtual *r9;
	bool r4;
	h3d__impl___GlDriver__CompiledShader r25;
	int *r23;
	vdynamic *r6, *r11, *r12, *r13;
	vbyte *r24;
	varray *r18;
	int r3, r7, r17, r20, r21, r22;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->vertex;
	if( !r4 ) goto label$8f388d3_6_5;
	r3 = 35633;
	goto label$8f388d3_6_6;
	label$8f388d3_6_5:
	r3 = 35632;
	label$8f388d3_6_6:
	r6 = sdl_gl_create_shader(r3);
	r8 = r2->code;
	if( r8 ) goto label$8f388d3_6_17;
	if( r1 == NULL ) hl_null_access();
	r9 = r2->data;
	r8 = hxsl_GlslOut_run(r1,r9);
	r2->code = r8;
	r9 = r2->data;
	if( r9 == NULL ) hl_null_access();
	r10 = NULL;
	if( hl_vfields(r9)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r9)[0]) = (hl__types__ArrayObj)r10; else hl_dyn_setp(r9->value,63237214/*funs*/,&t$hl_types_ArrayObj,r10);
	label$8f388d3_6_17:
	r8 = r2->code;
	sdl_gl_shader_source(r6,r8);
	sdl_gl_compile_shader(r6);
	r8 = sdl_GL_getShaderInfoLog(r6);
	r7 = 35713;
	r12 = sdl_gl_get_shader_parameter(r6,r7);
	r7 = 1;
	r13 = hl_alloc_dynamic(&t$_i32);
	r13->v.i = r7;
	{ int i = hl_dyn_compare((vdynamic*)r12,(vdynamic*)r13); if( i == 0 ) goto label$8f388d3_6_103; };
	r14 = sdl_GL_getShaderInfoLog(r6);
	if( r14 == NULL ) hl_null_access();
	r7 = 9;
	r11 = NULL;
	r15 = String_substr(r14,r7,r11);
	r11 = Std_parseInt(r15);
	if( r11 ) goto label$8f388d3_6_35;
	r15 = NULL;
	goto label$8f388d3_6_50;
	label$8f388d3_6_35:
	r15 = r2->code;
	if( r15 == NULL ) hl_null_access();
	r16 = (String)s$68b329d;
	r10 = String_split(r15,r16);
	if( r10 == NULL ) hl_null_access();
	r7 = r11 ? r11->v.i : 0;
	r17 = 1;
	r7 = r7 - r17;
	r17 = r10->length;
	if( ((unsigned)r7) < ((unsigned)r17) ) goto label$8f388d3_6_47;
	r15 = NULL;
	goto label$8f388d3_6_50;
	label$8f388d3_6_47:
	r18 = r10->array;
	r12 = ((vdynamic**)(r18 + 1))[r7];
	r15 = (String)r12;
	label$8f388d3_6_50:
	if( r15 ) goto label$8f388d3_6_54;
	r16 = (String)s$;
	r15 = r16;
	goto label$8f388d3_6_60;
	label$8f388d3_6_54:
	r16 = (String)s$84c4047;
	r19 = StringTools_trim(r15);
	r16 = String___add__(r16,r19);
	r19 = (String)s$9371d7a;
	r16 = String___add__(r16,r19);
	r15 = r16;
	label$8f388d3_6_60:
	r16 = r2->code;
	if( r16 == NULL ) hl_null_access();
	r19 = (String)s$68b329d;
	r10 = String_split(r16,r19);
	r7 = 0;
	if( r10 == NULL ) hl_null_access();
	r17 = r10->length;
	label$8f388d3_6_67:
	if( r7 >= r17 ) goto label$8f388d3_6_93;
	r20 = r7;
	++r7;
	if( r10 == NULL ) hl_null_access();
	r22 = 1;
	r21 = r20 + r22;
	r23 = &r21;
	r24 = hl_itos(r21,r23);
	r16 = String___alloc__(r24,r21);
	r19 = (String)s$5e732a1;
	r16 = String___add__(r16,r19);
	r22 = r10->length;
	if( ((unsigned)r20) < ((unsigned)r22) ) goto label$8f388d3_6_83;
	r19 = NULL;
	goto label$8f388d3_6_86;
	label$8f388d3_6_83:
	r18 = r10->array;
	r12 = ((vdynamic**)(r18 + 1))[r20];
	r19 = (String)r12;
	label$8f388d3_6_86:
	r16 = String___add__(r16,r19);
	r21 = r10->length;
	if( ((unsigned)r20) < ((unsigned)r21) ) goto label$8f388d3_6_90;
	hl_types_ArrayObj___expand(r10,r20);
	label$8f388d3_6_90:
	r18 = r10->array;
	((String*)(r18 + 1))[r20] = r16;
	goto label$8f388d3_6_67;
	label$8f388d3_6_93:
	r16 = (String)s$9c28b1f;
	r16 = String___add__(r16,r14);
	r16 = String___add__(r16,r15);
	r19 = (String)s$e1c06d8;
	r16 = String___add__(r16,r19);
	if( r10 == NULL ) hl_null_access();
	r19 = (String)s$68b329d;
	r19 = hl_types_ArrayObj_join(r10,r19);
	r16 = String___add__(r16,r19);
	hl_throw((vdynamic*)r16);
	label$8f388d3_6_103:
	r25 = (h3d__impl___GlDriver__CompiledShader)hl_alloc_obj(&t$h3d_impl__GlDriver_CompiledShader);
	r4 = r2->vertex;
	h3d_impl__GlDriver_CompiledShader_new(r25,r6,r4,r2);
	return r25;
}

void h3d_impl_GlDriver_initShader(h3d__impl__GlDriver r0,h3d__impl___GlDriver__CompiledProgram r1,h3d__impl___GlDriver__CompiledShader r2,hxsl__RuntimeShaderData r3,hxsl__RuntimeShader r4) {
	String r5, r9, r10, r26;
	vvirtual *r32, *r34, *r37;
	hl__types__ArrayObj r11;
	hxsl__RuntimeShaderData r18;
	venum *r15, *r20, *r23, *r24;
	hl_type *r13;
	bool r6;
	hxsl__SharedShader r33;
	hl__types__ArrayBytes_Int r38, r39;
	hxsl__AllocParam r17, r19;
	hxsl__ShaderInstanceDesc r36;
	int *r30;
	vdynamic *r8, *r27;
	vbyte *r31;
	int r14, r16, r21, r22, r25, r28, r29, r35;
	varray *r12;
	if( r2 == NULL ) hl_null_access();
	r6 = r2->vertex;
	if( !r6 ) goto label$8f388d3_7_5;
	r5 = (String)s$vertex;
	goto label$8f388d3_7_6;
	label$8f388d3_7_5:
	r5 = (String)s$fragment;
	label$8f388d3_7_6:
	if( r1 == NULL ) hl_null_access();
	r8 = r1->p;
	r10 = (String)s$Globals;
	r9 = String___add__(r5,r10);
	r8 = sdl_gl_get_uniform_location(r8,r9);
	r2->globals = r8;
	r8 = r1->p;
	r10 = (String)s$Params;
	r9 = String___add__(r5,r10);
	r8 = sdl_gl_get_uniform_location(r8,r9);
	r2->params = r8;
	r13 = &t$vrt_76f0bb9;
	r14 = 0;
	r12 = hl_alloc_array(r13,r14);
	r11 = hl_types_ArrayObj_alloc(r12);
	r2->textures = r11;
	r14 = 0;
	r15 = NULL;
	r16 = 0;
	r9 = (String)s$;
	if( r3 == NULL ) hl_null_access();
	r17 = r3->textures;
	label$8f388d3_7_28:
	if( !r17 ) goto label$8f388d3_7_136;
	if( r17 == NULL ) hl_null_access();
	r20 = r17->type;
	r21 = 1;
	if( r20 == NULL ) hl_null_access();
	r22 = HL__ENUM_INDEX__(r20);
	switch(r22) {
		default:
		case 0:
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		case 8:
		case 9:
		case 10:
		case 11:
		case 12:
		case 13:
		case 14:
		case 16:
			goto label$8f388d3_7_49;
		case 15:
			r24 = ((hxsl_Type_TArray*)r20)->p1;
			if( r24 == NULL ) hl_null_access();
			r22 = HL__ENUM_INDEX__(r24);
			r25 = 0;
			if( r22 != r25 ) goto label$8f388d3_7_46;
			r22 = ((hxsl_SizeDecl_SConst*)r24)->p0;
			r23 = ((hxsl_Type_TArray*)r20)->p0;
			r20 = r23;
			r21 = r22;
			label$8f388d3_7_46:
			goto label$8f388d3_7_49;
		case 17:
			r23 = (venum*)g$hxsl_Type_TSampler2D;
			r20 = r23;
	}
	label$8f388d3_7_49:
	if( r20 == r15 ) goto label$8f388d3_7_74;
	r15 = r20;
	if( r20 == NULL ) hl_null_access();
	r22 = HL__ENUM_INDEX__(r20);
	switch(r22) {
		default:
		case 0:
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		case 8:
		case 9:
			r10 = (String)s$Unsupported_texture_type_;
			r26 = Std_string(((vdynamic*)r20));
			r10 = String___add__(r10,r26);
			hl_throw((vdynamic*)r10);
		case 10:
			r22 = 3553;
			r16 = r22;
			r10 = (String)s$Textures;
			r9 = r10;
			goto label$8f388d3_7_72;
		case 11:
			r22 = 35866;
			r16 = r22;
			r10 = (String)s$TexturesArray;
			r9 = r10;
			goto label$8f388d3_7_72;
		case 12:
			r22 = 34067;
			r16 = r22;
			r10 = (String)s$TexturesCube;
			r9 = r10;
	}
	label$8f388d3_7_72:
	r22 = 0;
	r14 = r22;
	label$8f388d3_7_74:
	r22 = 0;
	r25 = r21;
	label$8f388d3_7_76:
	if( r22 >= r25 ) goto label$8f388d3_7_132;
	++r22;
	if( r1 == NULL ) hl_null_access();
	r8 = r1->p;
	r10 = String___add__(r5,r9);
	r26 = (String)s$8154172;
	r10 = String___add__(r10,r26);
	r29 = r14;
	r30 = &r29;
	r31 = hl_itos(r29,r30);
	r26 = String___alloc__(r31,r29);
	r10 = String___add__(r10,r26);
	r26 = (String)s$0fbd177;
	r10 = String___add__(r10,r26);
	r8 = sdl_gl_get_uniform_location(r8,r10);
	if( r8 ) goto label$8f388d3_7_122;
	r10 = (String)s$368af7a;
	if( r4 == NULL ) hl_null_access();
	r34 = r4->spec;
	if( r34 == NULL ) hl_null_access();
	r11 = hl_vfields(r34)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r34)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r34->value,186287176/*instances*/,&t$hl_types_ArrayObj);
	if( r11 == NULL ) hl_null_access();
	if( r17 == NULL ) hl_null_access();
	r29 = r17->instance;
	r35 = r11->length;
	if( ((unsigned)r29) < ((unsigned)r35) ) goto label$8f388d3_7_105;
	r36 = NULL;
	goto label$8f388d3_7_108;
	label$8f388d3_7_105:
	r12 = r11->array;
	r27 = ((vdynamic**)(r12 + 1))[r29];
	r36 = (hxsl__ShaderInstanceDesc)r27;
	label$8f388d3_7_108:
	if( r36 == NULL ) hl_null_access();
	r33 = r36->shader;
	if( r33 == NULL ) hl_null_access();
	r32 = r33->data;
	if( r32 == NULL ) hl_null_access();
	r26 = hl_vfields(r32)[1] ? (*(String*)(hl_vfields(r32)[1])) : (String)hl_dyn_getp(r32->value,150958933/*name*/,&t$String);
	r10 = String___add__(r10,r26);
	r26 = (String)s$5058f1a;
	r10 = String___add__(r10,r26);
	r26 = r17->name;
	r10 = String___add__(r10,r26);
	r26 = (String)s$814a5ca;
	r10 = String___add__(r10,r26);
	hl_throw((vdynamic*)r10);
	label$8f388d3_7_122:
	if( r2 == NULL ) hl_null_access();
	r11 = r2->textures;
	if( r11 == NULL ) hl_null_access();
	r37 = hl_alloc_virtual(&t$vrt_76f0bb9);
	if( hl_vfields(r37)[2] ) *(vdynamic**)(hl_vfields(r37)[2]) = (vdynamic*)r8; else hl_dyn_setp(r37->value,117/*u*/,&t$nul_i32,r8);
	if( hl_vfields(r37)[1] ) *(venum**)(hl_vfields(r37)[1]) = (venum*)r15; else hl_dyn_setp(r37->value,116/*t*/,&t$hxsl_Type,r15);
	if( hl_vfields(r37)[0] ) *(int*)(hl_vfields(r37)[0]) = (int)r16; else hl_dyn_seti(r37->value,140563565/*mode*/,&t$_i32,r16);
	r29 = hl_types_ArrayObj_push(r11,((vdynamic*)r37));
	++r14;
	goto label$8f388d3_7_76;
	label$8f388d3_7_132:
	if( r17 == NULL ) hl_null_access();
	r19 = r17->next;
	r17 = r19;
	goto label$8f388d3_7_28;
	label$8f388d3_7_136:
	if( r3 == NULL ) hl_null_access();
	r21 = r3->bufferCount;
	r22 = 0;
	if( r22 >= r21 ) goto label$8f388d3_7_203;
	r21 = 0;
	r31 = hl_alloc_bytes(r21);
	r21 = 0;
	r21 = 0;
	r38 = hl_types_ArrayBase_allocI32(r31,r21);
	r21 = 0;
	r22 = r3->bufferCount;
	label$8f388d3_7_147:
	if( r21 >= r22 ) goto label$8f388d3_7_170;
	r25 = r21;
	++r21;
	if( r38 == NULL ) hl_null_access();
	if( r1 == NULL ) hl_null_access();
	r8 = r1->p;
	if( r3 == NULL ) hl_null_access();
	r6 = r3->vertex;
	if( !r6 ) goto label$8f388d3_7_159;
	r10 = (String)s$vertex_;
	goto label$8f388d3_7_160;
	label$8f388d3_7_159:
	r10 = (String)s$;
	label$8f388d3_7_160:
	r26 = (String)s$uniform_buffer;
	r10 = String___add__(r10,r26);
	r28 = r25;
	r30 = &r28;
	r31 = hl_itos(r28,r30);
	r26 = String___alloc__(r31,r28);
	r10 = String___add__(r10,r26);
	r28 = sdl_gl_get_uniform_block_index(r8,r10);
	r28 = hl_types_ArrayBytes_Int_push(r38,r28);
	goto label$8f388d3_7_147;
	label$8f388d3_7_170:
	if( r2 == NULL ) hl_null_access();
	r2->buffers = r38;
	r21 = 0;
	r6 = r2->vertex;
	if( r6 ) goto label$8f388d3_7_180;
	if( r4 == NULL ) hl_null_access();
	r18 = r4->vertex;
	if( r18 == NULL ) hl_null_access();
	r22 = r18->bufferCount;
	r21 = r22;
	label$8f388d3_7_180:
	r22 = 0;
	if( r3 == NULL ) hl_null_access();
	r25 = r3->bufferCount;
	label$8f388d3_7_183:
	if( r22 >= r25 ) goto label$8f388d3_7_203;
	r28 = r22;
	++r22;
	if( r1 == NULL ) hl_null_access();
	r8 = r1->p;
	if( r2 == NULL ) hl_null_access();
	r39 = r2->buffers;
	if( r39 == NULL ) hl_null_access();
	r35 = r39->length;
	if( ((unsigned)r28) < ((unsigned)r35) ) goto label$8f388d3_7_196;
	r29 = 0;
	goto label$8f388d3_7_200;
	label$8f388d3_7_196:
	r31 = r39->bytes;
	r35 = 2;
	r35 = r28 << r35;
	r29 = *(int*)(r31 + r35);
	label$8f388d3_7_200:
	r35 = r28 + r21;
	sdl_gl_uniform_block_binding(r8,r29,r35);
	goto label$8f388d3_7_183;
	label$8f388d3_7_203:
	return;
}

bool h3d_impl_GlDriver_selectShader(h3d__impl__GlDriver r0,hxsl__RuntimeShader r1) {
	String r22, r26, r27;
	vvirtual *r15, *r19;
	hl__types__ArrayObj r14, r18, r29;
	hxsl__GlslOut r8;
	hl_type *r28;
	venum *r21, *r30, *r34;
	hxsl__RuntimeShaderData r10;
	bool r23;
	h3d__impl___GlDriver__CompiledProgram r5, r7;
	haxe__ds__IntMap r3;
	hxd__BufferInput r35;
	hxd__BufferFormat r37;
	h3d__impl___GlDriver__CompiledAttribute r32;
	h3d__impl___GlDriver__CompiledShader r9;
	int *r36;
	vdynamic *r2, *r11, *r12, *r24, *r25;
	varray *r20;
	int r4, r13, r16, r17, r31, r33;
	hl_trap_ctx trap$0;
	r3 = r0->programs;
	if( r3 == NULL ) hl_null_access();
	if( r1 == NULL ) hl_null_access();
	r4 = r1->id;
	r2 = haxe_ds_IntMap_get(r3,r4);
	r5 = (h3d__impl___GlDriver__CompiledProgram)r2;
	if( r5 ) goto label$8f388d3_8_284;
	r7 = (h3d__impl___GlDriver__CompiledProgram)hl_alloc_obj(&t$h3d_impl__GlDriver_CompiledProgram);
	h3d_impl__GlDriver_CompiledProgram_new(r7);
	r5 = r7;
	r8 = h3d_impl_GlDriver_makeCompiler(r0);
	r10 = r1->vertex;
	r9 = h3d_impl_GlDriver_compileShader(r0,r8,r10);
	r7->vertex = r9;
	r10 = r1->fragment;
	r9 = h3d_impl_GlDriver_compileShader(r0,r8,r10);
	r7->fragment = r9;
	r11 = sdl_gl_create_program();
	r7->p = r11;
	r12 = r0->glES;
	if( r12 ) goto label$8f388d3_8_65;
	r4 = 0;
	r13 = 0;
	r10 = r1->fragment;
	if( r10 == NULL ) hl_null_access();
	r15 = r10->data;
	if( r15 == NULL ) hl_null_access();
	r14 = hl_vfields(r15)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r15)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r15->value,239676598/*vars*/,&t$hl_types_ArrayObj);
	label$8f388d3_8_28:
	if( r14 == NULL ) hl_null_access();
	r17 = r14->length;
	if( r13 >= r17 ) goto label$8f388d3_8_65;
	r17 = r14->length;
	if( ((unsigned)r13) < ((unsigned)r17) ) goto label$8f388d3_8_36;
	r19 = NULL;
	goto label$8f388d3_8_39;
	label$8f388d3_8_36:
	r20 = r14->array;
	r2 = ((vdynamic**)(r20 + 1))[r13];
	r19 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r2);
	label$8f388d3_8_39:
	++r13;
	if( r19 == NULL ) hl_null_access();
	r21 = hl_vfields(r19)[1] ? (*(venum**)(hl_vfields(r19)[1])) : (venum*)hl_dyn_getp(r19->value,118088286/*kind*/,&t$hxsl_VarKind);
	if( r21 == NULL ) hl_null_access();
	r16 = HL__ENUM_INDEX__(r21);
	r17 = 5;
	if( r16 != r17 ) goto label$8f388d3_8_64;
	if( r5 == NULL ) hl_null_access();
	r11 = r5->p;
	r16 = r4;
	++r4;
	if( r8 == NULL ) hl_null_access();
	r3 = r8->varNames;
	if( r3 == NULL ) hl_null_access();
	r17 = hl_vfields(r19)[0] ? (*(int*)(hl_vfields(r19)[0])) : (int)hl_dyn_geti(r19->value,23515/*id*/,&t$_i32);
	r23 = haxe_ds_IntMap_exists(r3,r17);
	if( !r23 ) goto label$8f388d3_8_62;
	r3 = r8->varNames;
	if( r3 == NULL ) hl_null_access();
	r17 = hl_vfields(r19)[0] ? (*(int*)(hl_vfields(r19)[0])) : (int)hl_dyn_geti(r19->value,23515/*id*/,&t$_i32);
	r2 = haxe_ds_IntMap_get(r3,r17);
	r22 = (String)r2;
	goto label$8f388d3_8_63;
	label$8f388d3_8_62:
	r22 = hl_vfields(r19)[2] ? (*(String*)(hl_vfields(r19)[2])) : (String)hl_dyn_getp(r19->value,150958933/*name*/,&t$String);
	label$8f388d3_8_63:
	sdl_gl_bind_frag_data_location(r11,r16,r22);
	label$8f388d3_8_64:
	goto label$8f388d3_8_28;
	label$8f388d3_8_65:
	if( r5 == NULL ) hl_null_access();
	r11 = r5->p;
	r9 = r5->vertex;
	if( r9 == NULL ) hl_null_access();
	r24 = r9->s;
	sdl_gl_attach_shader(r11,r24);
	r11 = r5->p;
	r9 = r5->fragment;
	if( r9 == NULL ) hl_null_access();
	r24 = r9->s;
	sdl_gl_attach_shader(r11,r24);
	r22 = NULL;
	hl_trap(trap$0,r2,label$8f388d3_8_91);
	r11 = r5->p;
	sdl_gl_link_program(r11);
	r11 = r5->p;
	r4 = 35714;
	r2 = sdl_gl_get_program_parameter(r11,r4);
	r4 = 1;
	r25 = hl_alloc_dynamic(&t$_i32);
	r25->v.i = r4;
	{ int i = hl_dyn_compare((vdynamic*)r2,(vdynamic*)r25); if( i == 0 ) goto label$8f388d3_8_89; };
	r11 = r5->p;
	r26 = sdl_GL_getProgramInfoLog(r11);
	r22 = r26;
	label$8f388d3_8_89:
	hl_endtrap(trap$0);
	goto label$8f388d3_8_103;
	label$8f388d3_8_91:
	r25 = NULL;
	r26 = (String)s$Shader_linkage_error_;
	r27 = Std_string(r2);
	r26 = String___add__(r26,r27);
	r27 = (String)s$bbee82c;
	r26 = String___add__(r26,r27);
	r23 = false;
	r27 = h3d_impl_GlDriver_getDriverName(r0,r23);
	r26 = String___add__(r26,r27);
	r27 = (String)s$9371d7a;
	r26 = String___add__(r26,r27);
	hl_throw((vdynamic*)r26);
	label$8f388d3_8_103:
	r9 = r5->vertex;
	if( r9 == NULL ) hl_null_access();
	r11 = r9->s;
	sdl_gl_delete_shader(r11);
	r9 = r5->fragment;
	if( r9 == NULL ) hl_null_access();
	r11 = r9->s;
	sdl_gl_delete_shader(r11);
	if( !r22 ) goto label$8f388d3_8_144;
	r27 = (String)s$;
	if( r22 != r27 && (!r22 || !r27 || String___compare(r22,(vdynamic*)r27) != 0) ) goto label$8f388d3_8_128;
	r11 = r0->shaderVersion;
	r4 = r11 ? r11->v.i : 0;
	r13 = 130;
	if( r13 >= r4 ) goto label$8f388d3_8_128;
	r23 = r0->firstShader;
	if( !r23 ) goto label$8f388d3_8_128;
	r11 = r0->shaderVersion;
	r4 = r11 ? r11->v.i : 0;
	r13 = 10;
	r4 = r4 - r13;
	r11 = hl_alloc_dynamic(&t$_i32);
	r11->v.i = r4;
	r0->shaderVersion = r11;
	r23 = h3d_impl_GlDriver_selectShader(r0,r1);
	return r23;
	label$8f388d3_8_128:
	r26 = (String)s$Program_linkage_failure_;
	r26 = String___add__(r26,r22);
	r27 = (String)s$_Vertex_;
	r26 = String___add__(r26,r27);
	if( r1 == NULL ) hl_null_access();
	r10 = r1->vertex;
	if( r10 == NULL ) hl_null_access();
	r27 = r10->code;
	r26 = String___add__(r26,r27);
	r27 = (String)s$_Fragment_;
	r26 = String___add__(r26,r27);
	r10 = r1->fragment;
	if( r10 == NULL ) hl_null_access();
	r27 = r10->code;
	r26 = String___add__(r26,r27);
	hl_throw((vdynamic*)r26);
	label$8f388d3_8_144:
	r23 = false;
	r0->firstShader = r23;
	r9 = r5->vertex;
	if( r1 == NULL ) hl_null_access();
	r10 = r1->vertex;
	h3d_impl_GlDriver_initShader(r0,r5,r9,r10,r1);
	r9 = r5->fragment;
	r10 = r1->fragment;
	h3d_impl_GlDriver_initShader(r0,r5,r9,r10,r1);
	r28 = &t$h3d_impl__GlDriver_CompiledAttribute;
	r4 = 0;
	r20 = hl_alloc_array(r28,r4);
	r14 = hl_types_ArrayObj_alloc(r20);
	r5->attribs = r14;
	r4 = 0;
	r5->hasAttribIndex = r4;
	r28 = &t$hxd_BufferInput;
	r4 = 0;
	r20 = hl_alloc_array(r28,r4);
	r14 = hl_types_ArrayObj_alloc(r20);
	r4 = 0;
	r10 = r1->vertex;
	if( r10 == NULL ) hl_null_access();
	r15 = r10->data;
	if( r15 == NULL ) hl_null_access();
	r18 = hl_vfields(r15)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r15)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r15->value,239676598/*vars*/,&t$hl_types_ArrayObj);
	label$8f388d3_8_170:
	if( r18 == NULL ) hl_null_access();
	r16 = r18->length;
	if( r4 >= r16 ) goto label$8f388d3_8_276;
	r16 = r18->length;
	if( ((unsigned)r4) < ((unsigned)r16) ) goto label$8f388d3_8_178;
	r19 = NULL;
	goto label$8f388d3_8_181;
	label$8f388d3_8_178:
	r20 = r18->array;
	r25 = ((vdynamic**)(r20 + 1))[r4];
	r19 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r25);
	label$8f388d3_8_181:
	++r4;
	if( r19 == NULL ) hl_null_access();
	r21 = hl_vfields(r19)[1] ? (*(venum**)(hl_vfields(r19)[1])) : (venum*)hl_dyn_getp(r19->value,118088286/*kind*/,&t$hxsl_VarKind);
	if( r21 == NULL ) hl_null_access();
	r13 = HL__ENUM_INDEX__(r21);
	r16 = 1;
	if( r13 != r16 ) goto label$8f388d3_8_275;
	r30 = hl_vfields(r19)[5] ? (*(venum**)(hl_vfields(r19)[5])) : (venum*)hl_dyn_getp(r19->value,218690500/*type*/,&t$hxsl_Type);
	r13 = hxd__BufferFormat_InputFormat_Impl__fromHXSL(r30);
	if( r5 == NULL ) hl_null_access();
	r11 = r5->p;
	if( r8 == NULL ) hl_null_access();
	r3 = r8->varNames;
	if( r3 == NULL ) hl_null_access();
	r16 = hl_vfields(r19)[0] ? (*(int*)(hl_vfields(r19)[0])) : (int)hl_dyn_geti(r19->value,23515/*id*/,&t$_i32);
	r23 = haxe_ds_IntMap_exists(r3,r16);
	if( !r23 ) goto label$8f388d3_8_204;
	r3 = r8->varNames;
	if( r3 == NULL ) hl_null_access();
	r16 = hl_vfields(r19)[0] ? (*(int*)(hl_vfields(r19)[0])) : (int)hl_dyn_geti(r19->value,23515/*id*/,&t$_i32);
	r25 = haxe_ds_IntMap_get(r3,r16);
	r26 = (String)r25;
	goto label$8f388d3_8_205;
	label$8f388d3_8_204:
	r26 = hl_vfields(r19)[2] ? (*(String*)(hl_vfields(r19)[2])) : (String)hl_dyn_getp(r19->value,150958933/*name*/,&t$String);
	label$8f388d3_8_205:
	r16 = sdl_gl_get_attrib_location(r11,r26);
	r31 = 0;
	if( r16 >= r31 ) goto label$8f388d3_8_209;
	goto label$8f388d3_8_170;
	label$8f388d3_8_209:
	r31 = 32;
	if( r16 < r31 ) goto label$8f388d3_8_213;
	r26 = (String)s$assert;
	hl_throw((vdynamic*)r26);
	label$8f388d3_8_213:
	r32 = (h3d__impl___GlDriver__CompiledAttribute)hl_alloc_obj(&t$h3d_impl__GlDriver_CompiledAttribute);
	h3d_impl__GlDriver_CompiledAttribute_new(r32);
	r17 = 5126;
	r32->type = r17;
	r32->index = r16;
	r31 = 7;
	r17 = r13 & r31;
	r32->size = r17;
	r30 = hl_vfields(r19)[5] ? (*(venum**)(hl_vfields(r19)[5])) : (venum*)hl_dyn_getp(r19->value,218690500/*type*/,&t$hxsl_Type);
	if( r30 == NULL ) hl_null_access();
	r17 = HL__ENUM_INDEX__(r30);
	r31 = 9;
	if( r17 != r31 ) goto label$8f388d3_8_230;
	r17 = ((hxsl_Type_TBytes*)r30)->p0;
	r31 = 5120;
	r32->type = r31;
	r32->size = r17;
	label$8f388d3_8_230:
	r17 = 0;
	r32->divisor = r17;
	r29 = hl_vfields(r19)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r19)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r19->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj);
	if( !r29 ) goto label$8f388d3_8_256;
	r17 = 0;
	r29 = hl_vfields(r19)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r19)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r19->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj);
	label$8f388d3_8_236:
	if( r29 == NULL ) hl_null_access();
	r33 = r29->length;
	if( r17 >= r33 ) goto label$8f388d3_8_256;
	r33 = r29->length;
	if( ((unsigned)r17) < ((unsigned)r33) ) goto label$8f388d3_8_244;
	r34 = NULL;
	goto label$8f388d3_8_247;
	label$8f388d3_8_244:
	r20 = r29->array;
	r25 = ((vdynamic**)(r20 + 1))[r17];
	r34 = (venum*)r25;
	label$8f388d3_8_247:
	++r17;
	if( r34 == NULL ) hl_null_access();
	r31 = HL__ENUM_INDEX__(r34);
	r33 = 9;
	if( r31 != r33 ) goto label$8f388d3_8_255;
	r31 = ((hxsl_VarQualifier_PerInstance*)r34)->p0;
	if( r32 == NULL ) hl_null_access();
	r32->divisor = r31;
	label$8f388d3_8_255:
	goto label$8f388d3_8_236;
	label$8f388d3_8_256:
	if( r5 == NULL ) hl_null_access();
	r29 = r5->attribs;
	if( r29 == NULL ) hl_null_access();
	r17 = hl_types_ArrayObj_push(r29,((vdynamic*)r32));
	r17 = r5->hasAttribIndex;
	r31 = 1;
	if( r32 == NULL ) hl_null_access();
	r33 = r32->index;
	r31 = r31 << r33;
	r17 = r17 | r31;
	r5->hasAttribIndex = r17;
	if( r14 == NULL ) hl_null_access();
	r35 = (hxd__BufferInput)hl_alloc_obj(&t$hxd_BufferInput);
	if( r19 == NULL ) hl_null_access();
	r26 = hl_vfields(r19)[2] ? (*(String*)(hl_vfields(r19)[2])) : (String)hl_dyn_getp(r19->value,150958933/*name*/,&t$String);
	r31 = 0;
	r36 = &r31;
	hxd_BufferInput_new(r35,r26,r13,r36);
	r17 = hl_types_ArrayObj_push(r14,((vdynamic*)r35));
	label$8f388d3_8_275:
	goto label$8f388d3_8_170;
	label$8f388d3_8_276:
	if( r5 == NULL ) hl_null_access();
	r37 = hxd_BufferFormat_make(r14);
	r5->format = r37;
	r3 = r0->programs;
	if( r3 == NULL ) hl_null_access();
	if( r1 == NULL ) hl_null_access();
	r4 = r1->id;
	haxe_ds_IntMap_set(r3,r4,((vdynamic*)r5));
	label$8f388d3_8_284:
	r7 = r0->curShader;
	if( r7 != r5 ) goto label$8f388d3_8_288;
	r23 = false;
	return r23;
	label$8f388d3_8_288:
	h3d_impl_GlDriver_setProgram(r0,r5);
	r23 = true;
	return r23;
}

void h3d_impl_GlDriver_setProgram(h3d__impl__GlDriver r0,h3d__impl___GlDriver__CompiledProgram r1) {
	vvirtual *r17;
	hl__types__ArrayObj r5, r8;
	bool r12;
	h3d__impl___GlDriver__CompiledAttribute r9;
	h3d__Buffer r16;
	vdynamic *r3, *r10;
	varray *r11;
	int r4, r6, r7, r13, r14, r15;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->p;
	sdl_gl_use_program(r3);
	r4 = 0;
	r5 = r1->attribs;
	label$8f388d3_9_5:
	if( r5 == NULL ) hl_null_access();
	r7 = r5->length;
	if( r4 >= r7 ) goto label$8f388d3_9_47;
	r7 = r5->length;
	if( ((unsigned)r4) < ((unsigned)r7) ) goto label$8f388d3_9_13;
	r9 = NULL;
	goto label$8f388d3_9_16;
	label$8f388d3_9_13:
	r11 = r5->array;
	r10 = ((vdynamic**)(r11 + 1))[r4];
	r9 = (h3d__impl___GlDriver__CompiledAttribute)r10;
	label$8f388d3_9_16:
	++r4;
	r8 = r0->curAttribs;
	if( r8 == NULL ) hl_null_access();
	if( r9 == NULL ) hl_null_access();
	r6 = r9->index;
	r7 = r8->length;
	if( ((unsigned)r6) < ((unsigned)r7) ) goto label$8f388d3_9_25;
	r12 = false;
	goto label$8f388d3_9_28;
	label$8f388d3_9_25:
	r11 = r8->array;
	r10 = ((vdynamic**)(r11 + 1))[r6];
	r12 = (bool)hl_dyn_casti(&r10,&t$_dyn,&t$_bool);
	label$8f388d3_9_28:
	if( r12 ) goto label$8f388d3_9_46;
	r6 = r9->index;
	sdl_gl_enable_vertex_attrib_array(r6);
	r8 = r0->curAttribs;
	if( r8 == NULL ) hl_null_access();
	r6 = r9->index;
	r12 = true;
	r7 = r8->length;
	if( ((unsigned)r6) < ((unsigned)r7) ) goto label$8f388d3_9_38;
	hl_types_ArrayObj___expand(r8,r6);
	label$8f388d3_9_38:
	r11 = r8->array;
	r10 = hl_alloc_dynbool(r12);
	((vdynamic**)(r11 + 1))[r6] = r10;
	r6 = r0->maxIdxCurAttribs;
	r7 = r9->index;
	if( r6 >= r7 ) goto label$8f388d3_9_46;
	r6 = r9->index;
	r0->maxIdxCurAttribs = r6;
	label$8f388d3_9_46:
	goto label$8f388d3_9_5;
	label$8f388d3_9_47:
	r4 = 0;
	r6 = 0;
	r7 = r0->maxIdxCurAttribs;
	r13 = 1;
	r7 = r7 + r13;
	label$8f388d3_9_52:
	if( r6 >= r7 ) goto label$8f388d3_9_96;
	r13 = r6;
	++r6;
	r5 = r0->curAttribs;
	if( r5 == NULL ) hl_null_access();
	r15 = r5->length;
	if( ((unsigned)r13) < ((unsigned)r15) ) goto label$8f388d3_9_62;
	r12 = false;
	goto label$8f388d3_9_65;
	label$8f388d3_9_62:
	r11 = r5->array;
	r10 = ((vdynamic**)(r11 + 1))[r13];
	r12 = (bool)hl_dyn_casti(&r10,&t$_dyn,&t$_bool);
	label$8f388d3_9_65:
	if( !r12 ) goto label$8f388d3_9_84;
	if( r1 == NULL ) hl_null_access();
	r14 = r1->hasAttribIndex;
	r15 = 1;
	r15 = r15 << r13;
	r14 = r14 & r15;
	r15 = 0;
	if( r14 != r15 ) goto label$8f388d3_9_84;
	sdl_gl_disable_vertex_attrib_array(r13);
	r5 = r0->curAttribs;
	if( r5 == NULL ) hl_null_access();
	r12 = false;
	r15 = r5->length;
	if( ((unsigned)r13) < ((unsigned)r15) ) goto label$8f388d3_9_80;
	hl_types_ArrayObj___expand(r5,r13);
	label$8f388d3_9_80:
	r11 = r5->array;
	r10 = hl_alloc_dynbool(r12);
	((vdynamic**)(r11 + 1))[r13] = r10;
	goto label$8f388d3_9_95;
	label$8f388d3_9_84:
	r5 = r0->curAttribs;
	if( r5 == NULL ) hl_null_access();
	r15 = r5->length;
	if( ((unsigned)r13) < ((unsigned)r15) ) goto label$8f388d3_9_90;
	r12 = false;
	goto label$8f388d3_9_93;
	label$8f388d3_9_90:
	r11 = r5->array;
	r10 = ((vdynamic**)(r11 + 1))[r13];
	r12 = (bool)hl_dyn_casti(&r10,&t$_dyn,&t$_bool);
	label$8f388d3_9_93:
	if( !r12 ) goto label$8f388d3_9_95;
	r4 = r13;
	label$8f388d3_9_95:
	goto label$8f388d3_9_52;
	label$8f388d3_9_96:
	r0->maxIdxCurAttribs = r4;
	r0->curShader = r1;
	r16 = NULL;
	r0->curBuffer = r16;
	r6 = 0;
	r5 = r0->boundTextures;
	if( r5 == NULL ) hl_null_access();
	r7 = r5->length;
	label$8f388d3_9_104:
	if( r6 >= r7 ) goto label$8f388d3_9_117;
	r13 = r6;
	++r6;
	r5 = r0->boundTextures;
	if( r5 == NULL ) hl_null_access();
	r17 = NULL;
	r15 = r5->length;
	if( ((unsigned)r13) < ((unsigned)r15) ) goto label$8f388d3_9_114;
	hl_types_ArrayObj___expand(r5,r13);
	label$8f388d3_9_114:
	r11 = r5->array;
	((vvirtual**)(r11 + 1))[r13] = r17;
	goto label$8f388d3_9_104;
	label$8f388d3_9_117:
	return;
}

void h3d_impl_GlDriver_uploadShaderBuffers(h3d__impl__GlDriver r0,h3d__shader__Buffers r1,int r2) {
	h3d__impl___GlDriver__CompiledProgram r5;
	h3d__shader__ShaderBuffers r6;
	h3d__impl___GlDriver__CompiledShader r4;
	r5 = r0->curShader;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->vertex;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->vertex;
	h3d_impl_GlDriver_uploadBuffer(r0,r1,r4,r6,r2);
	r5 = r0->curShader;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->fragment;
	r6 = r1->fragment;
	h3d_impl_GlDriver_uploadBuffer(r0,r1,r4,r6,r2);
	return;
}

void h3d_impl_GlDriver_uploadBuffer(h3d__impl__GlDriver r0,h3d__shader__Buffers r1,h3d__impl___GlDriver__CompiledShader r2,h3d__shader__ShaderBuffers r3,int r4) {
	String r30, r38;
	vvirtual *r23, *r26, *r27;
	hl__types__ArrayObj r19;
	venum *r29, *r39, *r40, *r41;
	hxsl__RuntimeShaderData r11;
	bool r25;
	hl__types__ArrayBytes_hl_F32 r9;
	h3d__impl___GlDriver__CompiledProgram r36, r37;
	hl__types__ArrayBytes_Int r46, r48;
	h3d__mat__$Defaults r31;
	float r51;
	h3d__Buffer r52;
	double r32, r34;
	vclosure *r28;
	h3d__impl___GlDriver__CompiledShader r8;
	h3d__impl__$GlDriver r45;
	vdynamic *r7, *r21, *r35;
	varray *r22;
	h3d__mat__Texture r20, r24;
	vbyte *r10, *r17;
	int r6, r12, r13, r14, r15, r16, r18, r33, r42, r43, r44, r47, r49, r50;
	switch(r4) {
		default:
			goto label$8f388d3_11_393;
		case 0:
			if( r2 == NULL ) hl_null_access();
			r7 = r2->globals;
			if( !r7 ) goto label$8f388d3_11_43;
			r7 = r2->globals;
			if( r3 == NULL ) hl_null_access();
			r9 = r3->globals;
			if( r9 == NULL ) hl_null_access();
			r10 = r9->bytes;
			r11 = r2->shader;
			if( r11 == NULL ) hl_null_access();
			r6 = r11->globalsSize;
			r12 = 16;
			r6 = r6 * r12;
			r12 = r0->streamPos;
			r12 = r12 + r6;
			r14 = 7;
			r13 = r12 + r14;
			r14 = -8;
			r13 = r13 & r14;
			r15 = r0->streamPos;
			r14 = r13 - r15;
			r16 = r0->streamLen;
			if( r16 >= r13 ) goto label$8f388d3_11_26;
			h3d_impl_GlDriver_expandStream(r0,r13);
			label$8f388d3_11_26:
			r17 = r0->streamBytes;
			r15 = r0->streamPos;
			r16 = 0;
			hl_bytes_blit(r17,r15,r10,r16,r6);
			r17 = r0->streamBytes;
			r15 = r0->streamPos;
			r17 = hl_bytes_offset(r17,r15);
			r15 = r0->streamPos;
			r15 = r15 + r14;
			r0->streamPos = r15;
			r15 = 0;
			r11 = r2->shader;
			if( r11 == NULL ) hl_null_access();
			r16 = r11->globalsSize;
			r18 = 4;
			r16 = r16 * r18;
			sdl_gl_uniform4fv(r7,r17,r15,r16);
			label$8f388d3_11_43:
			goto label$8f388d3_11_393;
		case 1:
			if( r2 == NULL ) hl_null_access();
			r7 = r2->params;
			if( !r7 ) goto label$8f388d3_11_85;
			r7 = r2->params;
			if( r3 == NULL ) hl_null_access();
			r9 = r3->params;
			if( r9 == NULL ) hl_null_access();
			r10 = r9->bytes;
			r11 = r2->shader;
			if( r11 == NULL ) hl_null_access();
			r6 = r11->paramsSize;
			r12 = 16;
			r6 = r6 * r12;
			r12 = r0->streamPos;
			r12 = r12 + r6;
			r14 = 7;
			r13 = r12 + r14;
			r14 = -8;
			r13 = r13 & r14;
			r15 = r0->streamPos;
			r14 = r13 - r15;
			r16 = r0->streamLen;
			if( r16 >= r13 ) goto label$8f388d3_11_68;
			h3d_impl_GlDriver_expandStream(r0,r13);
			label$8f388d3_11_68:
			r17 = r0->streamBytes;
			r15 = r0->streamPos;
			r16 = 0;
			hl_bytes_blit(r17,r15,r10,r16,r6);
			r17 = r0->streamBytes;
			r15 = r0->streamPos;
			r17 = hl_bytes_offset(r17,r15);
			r15 = r0->streamPos;
			r15 = r15 + r14;
			r0->streamPos = r15;
			r15 = 0;
			r11 = r2->shader;
			if( r11 == NULL ) hl_null_access();
			r16 = r11->paramsSize;
			r18 = 4;
			r16 = r16 * r18;
			sdl_gl_uniform4fv(r7,r17,r15,r16);
			label$8f388d3_11_85:
			goto label$8f388d3_11_393;
		case 2:
			if( r2 == NULL ) hl_null_access();
			r19 = r2->textures;
			if( r19 == NULL ) hl_null_access();
			r6 = r19->length;
			r12 = 0;
			r19 = r2->textures;
			if( r19 == NULL ) hl_null_access();
			r13 = r19->length;
			label$8f388d3_11_94:
			if( r12 >= r13 ) goto label$8f388d3_11_348;
			r14 = r12;
			++r12;
			if( r3 == NULL ) hl_null_access();
			r19 = r3->tex;
			if( r19 == NULL ) hl_null_access();
			r16 = r19->length;
			if( ((unsigned)r14) < ((unsigned)r16) ) goto label$8f388d3_11_105;
			r20 = NULL;
			goto label$8f388d3_11_108;
			label$8f388d3_11_105:
			r22 = r19->array;
			r21 = ((vdynamic**)(r22 + 1))[r14];
			r20 = (h3d__mat__Texture)r21;
			label$8f388d3_11_108:
			if( r2 == NULL ) hl_null_access();
			r19 = r2->textures;
			if( r19 == NULL ) hl_null_access();
			r16 = r19->length;
			if( ((unsigned)r14) < ((unsigned)r16) ) goto label$8f388d3_11_115;
			r23 = NULL;
			goto label$8f388d3_11_118;
			label$8f388d3_11_115:
			r22 = r19->array;
			r21 = ((vdynamic**)(r22 + 1))[r14];
			r23 = hl_to_virtual(&t$vrt_76f0bb9,(vdynamic*)r21);
			label$8f388d3_11_118:
			if( !r20 ) goto label$8f388d3_11_137;
			if( r20 == NULL ) hl_null_access();
			r25 = h3d_mat_Texture_isDepth(r20);
			if( !r25 ) goto label$8f388d3_11_129;
			r26 = r20->_hx_t;
			r27 = NULL;
			if( r26 == r27 || (r26 && r27 && r26->value && r27->value && r26->value == r27->value) ) goto label$8f388d3_11_127;
			r25 = false;
			goto label$8f388d3_11_128;
			label$8f388d3_11_127:
			r25 = true;
			label$8f388d3_11_128:
			goto label$8f388d3_11_136;
			label$8f388d3_11_129:
			r26 = r20->_hx_t;
			if( r26 ) goto label$8f388d3_11_135;
			r28 = r20->realloc;
			if( r28 ) goto label$8f388d3_11_135;
			r25 = true;
			goto label$8f388d3_11_136;
			label$8f388d3_11_135:
			r25 = false;
			label$8f388d3_11_136:
			if( !r25 ) goto label$8f388d3_11_157;
			label$8f388d3_11_137:
			if( r23 == NULL ) hl_null_access();
			r29 = hl_vfields(r23)[1] ? (*(venum**)(hl_vfields(r23)[1])) : (venum*)hl_dyn_getp(r23->value,116/*t*/,&t$hxsl_Type);
			if( r29 == NULL ) hl_null_access();
			r15 = HL__ENUM_INDEX__(r29);
			switch(r15) {
				default:
				case 0:
				case 1:
				case 2:
				case 3:
				case 4:
				case 5:
				case 6:
				case 7:
				case 8:
				case 9:
				case 11:
					r30 = (String)s$Missing_texture;
					hl_throw((vdynamic*)r30);
				case 10:
					r31 = (h3d__mat__$Defaults)g$_h3d_mat_Defaults;
					r15 = r31->loadingTextureColor;
					r33 = 24;
					r18 = ((unsigned)r15) >> r33;
					r32 = (double)r18;
					r34 = 255.;
					r32 = r32 / r34;
					r35 = hl_alloc_dynamic(&t$_f64);
					r35->v.d = r32;
					r24 = h3d_mat_Texture_fromColor(r15,r35);
					r20 = r24;
					goto label$8f388d3_11_157;
				case 12:
					r24 = h3d_mat_Texture_defaultCubeTexture();
					r20 = r24;
			}
			label$8f388d3_11_157:
			if( !r20 ) goto label$8f388d3_11_178;
			if( r20 == NULL ) hl_null_access();
			r26 = r20->_hx_t;
			if( r26 ) goto label$8f388d3_11_178;
			r28 = r20->realloc;
			if( !r28 ) goto label$8f388d3_11_178;
			r36 = r0->curShader;
			h3d_mat_Texture_alloc(r20);
			r28 = r20->realloc;
			if( r28 == NULL ) hl_null_access();
			r28->hasValue ? ((void (*)(vdynamic*))r28->fun)((vdynamic*)r28->value) : ((void (*)(void))r28->fun)();
			r37 = r0->curShader;
			if( r37 == r36 ) goto label$8f388d3_11_178;
			h3d_impl_GlDriver_setProgram(r0,r36);
			r15 = 0;
			h3d_impl_GlDriver_uploadShaderBuffers(r0,r1,r15);
			r15 = 1;
			h3d_impl_GlDriver_uploadShaderBuffers(r0,r1,r15);
			r15 = 2;
			h3d_impl_GlDriver_uploadShaderBuffers(r0,r1,r15);
			return;
			label$8f388d3_11_178:
			if( r20 == NULL ) hl_null_access();
			r15 = r0->frame;
			r15 = h3d_mat_Texture_set_lastFrame(r20,r15);
			if( r23 == NULL ) hl_null_access();
			r7 = hl_vfields(r23)[2] ? (*(vdynamic**)(hl_vfields(r23)[2])) : (vdynamic*)hl_dyn_getp(r23->value,117/*u*/,&t$nul_i32);
			if( r7 ) goto label$8f388d3_11_185;
			goto label$8f388d3_11_94;
			label$8f388d3_11_185:
			r25 = r2->vertex;
			if( !r25 ) goto label$8f388d3_11_189;
			r15 = r14;
			goto label$8f388d3_11_197;
			label$8f388d3_11_189:
			r36 = r0->curShader;
			if( r36 == NULL ) hl_null_access();
			r8 = r36->vertex;
			if( r8 == NULL ) hl_null_access();
			r19 = r8->textures;
			if( r19 == NULL ) hl_null_access();
			r15 = r19->length;
			r15 = r15 + r14;
			label$8f388d3_11_197:
			r19 = r0->boundTextures;
			if( r19 == NULL ) hl_null_access();
			r18 = r19->length;
			if( ((unsigned)r15) < ((unsigned)r18) ) goto label$8f388d3_11_203;
			r26 = NULL;
			goto label$8f388d3_11_206;
			label$8f388d3_11_203:
			r22 = r19->array;
			r21 = ((vdynamic**)(r22 + 1))[r15];
			r26 = hl_to_virtual(&t$vrt_6ab1ef9,(vdynamic*)r21);
			label$8f388d3_11_206:
			r27 = r20->_hx_t;
			if( r26 == r27 || (r26 && r27 && r26->value && r27->value && r26->value == r27->value) ) goto label$8f388d3_11_238;
			r19 = r0->boundTextures;
			if( r19 == NULL ) hl_null_access();
			r26 = r20->_hx_t;
			r18 = r19->length;
			if( ((unsigned)r15) < ((unsigned)r18) ) goto label$8f388d3_11_214;
			hl_types_ArrayObj___expand(r19,r15);
			label$8f388d3_11_214:
			r22 = r19->array;
			((vvirtual**)(r22 + 1))[r15] = r26;
			r16 = h3d_impl_GlDriver_getBindType(r0,r20);
			r33 = hl_vfields(r23)[0] ? (*(int*)(hl_vfields(r23)[0])) : (int)hl_dyn_geti(r23->value,140563565/*mode*/,&t$_i32);
			if( r16 == r33 ) goto label$8f388d3_11_228;
			r30 = (String)s$Texture_format_mismatch_;
			r38 = Std_string(((vdynamic*)r20));
			r30 = String___add__(r30,r38);
			r38 = (String)s$_should_be_;
			r30 = String___add__(r30,r38);
			r29 = hl_vfields(r23)[1] ? (*(venum**)(hl_vfields(r23)[1])) : (venum*)hl_dyn_getp(r23->value,116/*t*/,&t$hxsl_Type);
			r38 = Std_string(((vdynamic*)r29));
			r30 = String___add__(r30,r38);
			hl_throw((vdynamic*)r30);
			label$8f388d3_11_228:
			r18 = 33984;
			r18 = r18 + r15;
			sdl_gl_active_texture(r18);
			r7 = hl_vfields(r23)[2] ? (*(vdynamic**)(hl_vfields(r23)[2])) : (vdynamic*)hl_dyn_getp(r23->value,117/*u*/,&t$nul_i32);
			sdl_gl_uniform1i(r7,r15);
			r26 = r20->_hx_t;
			if( r26 == NULL ) hl_null_access();
			r7 = hl_vfields(r26)[7] ? (*(vdynamic**)(hl_vfields(r26)[7])) : (vdynamic*)hl_dyn_getp(r26->value,116/*t*/,&t$nul_i32);
			sdl_gl_bind_texture(r16,r7);
			r0->lastActiveIndex = r15;
			label$8f388d3_11_238:
			r39 = r20->mipMap;
			if( r39 == NULL ) hl_null_access();
			r16 = HL__ENUM_INDEX__(r39);
			r40 = r20->filter;
			if( r40 == NULL ) hl_null_access();
			r18 = HL__ENUM_INDEX__(r40);
			r41 = r20->wrap;
			if( r41 == NULL ) hl_null_access();
			r33 = HL__ENUM_INDEX__(r41);
			r44 = 3;
			r43 = r18 << r44;
			r42 = r16 | r43;
			r44 = 6;
			r43 = r33 << r44;
			r42 = r42 | r43;
			r26 = r20->_hx_t;
			if( r26 == NULL ) hl_null_access();
			r44 = hl_vfields(r26)[2] ? (*(int*)(hl_vfields(r26)[2])) : (int)hl_dyn_geti(r26->value,18283536/*bits*/,&t$_i32);
			if( r42 == r44 ) goto label$8f388d3_11_320;
			r26 = r20->_hx_t;
			if( r26 == NULL ) hl_null_access();
			if( hl_vfields(r26)[2] ) *(int*)(hl_vfields(r26)[2]) = (int)r42; else hl_dyn_seti(r26->value,18283536/*bits*/,&t$_i32,r42);
			r45 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
			r19 = r45->TFILTERS;
			if( r19 == NULL ) hl_null_access();
			r44 = r19->length;
			if( ((unsigned)r16) < ((unsigned)r44) ) goto label$8f388d3_11_267;
			r19 = NULL;
			goto label$8f388d3_11_270;
			label$8f388d3_11_267:
			r22 = r19->array;
			r21 = ((vdynamic**)(r22 + 1))[r16];
			r19 = (hl__types__ArrayObj)hl_dyn_castp(&r21,&t$_dyn,&t$hl_types_ArrayObj);
			label$8f388d3_11_270:
			if( r19 == NULL ) hl_null_access();
			r44 = r19->length;
			if( ((unsigned)r18) < ((unsigned)r44) ) goto label$8f388d3_11_275;
			r46 = NULL;
			goto label$8f388d3_11_278;
			label$8f388d3_11_275:
			r22 = r19->array;
			r21 = ((vdynamic**)(r22 + 1))[r18];
			r46 = (hl__types__ArrayBytes_Int)hl_dyn_castp(&r21,&t$_dyn,&t$hl_types_ArrayBytes_Int);
			label$8f388d3_11_278:
			r43 = hl_vfields(r23)[0] ? (*(int*)(hl_vfields(r23)[0])) : (int)hl_dyn_geti(r23->value,140563565/*mode*/,&t$_i32);
			r47 = 10240;
			if( r46 == NULL ) hl_null_access();
			r49 = 0;
			r50 = r46->length;
			if( ((unsigned)r49) < ((unsigned)r50) ) goto label$8f388d3_11_286;
			r49 = 0;
			goto label$8f388d3_11_290;
			label$8f388d3_11_286:
			r10 = r46->bytes;
			r50 = 2;
			r50 = r49 << r50;
			r49 = *(int*)(r10 + r50);
			label$8f388d3_11_290:
			sdl_gl_tex_parameteri(r43,r47,r49);
			r47 = 10241;
			r49 = 1;
			r50 = r46->length;
			if( ((unsigned)r49) < ((unsigned)r50) ) goto label$8f388d3_11_297;
			r49 = 0;
			goto label$8f388d3_11_301;
			label$8f388d3_11_297:
			r10 = r46->bytes;
			r50 = 2;
			r50 = r49 << r50;
			r49 = *(int*)(r10 + r50);
			label$8f388d3_11_301:
			sdl_gl_tex_parameteri(r43,r47,r49);
			r47 = 34892;
			r49 = 0;
			sdl_gl_tex_parameteri(r43,r47,r49);
			r45 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
			r48 = r45->TWRAP;
			if( r48 == NULL ) hl_null_access();
			r47 = r48->length;
			if( ((unsigned)r33) < ((unsigned)r47) ) goto label$8f388d3_11_312;
			r44 = 0;
			goto label$8f388d3_11_316;
			label$8f388d3_11_312:
			r10 = r48->bytes;
			r47 = 2;
			r47 = r33 << r47;
			r44 = *(int*)(r10 + r47);
			label$8f388d3_11_316:
			r49 = 10242;
			sdl_gl_tex_parameteri(r43,r49,r44);
			r49 = 10243;
			sdl_gl_tex_parameteri(r43,r49,r44);
			label$8f388d3_11_320:
			r26 = r20->_hx_t;
			if( r26 == NULL ) hl_null_access();
			r43 = hl_vfields(r26)[6] ? (*(int*)(hl_vfields(r26)[6])) : (int)hl_dyn_geti(r26->value,43433820/*startMip*/,&t$_i32);
			r44 = r20->startingMip;
			if( r43 == r44 ) goto label$8f388d3_11_333;
			r43 = hl_vfields(r23)[0] ? (*(int*)(hl_vfields(r23)[0])) : (int)hl_dyn_geti(r23->value,140563565/*mode*/,&t$_i32);
			r44 = 33084;
			r47 = r20->startingMip;
			sdl_gl_tex_parameteri(r43,r44,r47);
			r26 = r20->_hx_t;
			if( r26 == NULL ) hl_null_access();
			r43 = r20->startingMip;
			if( hl_vfields(r26)[6] ) *(int*)(hl_vfields(r26)[6]) = (int)r43; else hl_dyn_seti(r26->value,43433820/*startMip*/,&t$_i32,r43);
			label$8f388d3_11_333:
			r32 = r20->lodBias;
			r26 = r20->_hx_t;
			if( r26 == NULL ) hl_null_access();
			r34 = hl_vfields(r26)[0] ? (*(double*)(hl_vfields(r26)[0])) : (double)hl_dyn_getd(r26->value,18279299/*bias*/);
			if( r32 == r34 ) goto label$8f388d3_11_347;
			r26 = r20->_hx_t;
			if( r26 == NULL ) hl_null_access();
			r32 = r20->lodBias;
			if( hl_vfields(r26)[0] ) *(double*)(hl_vfields(r26)[0]) = (double)r32; else hl_dyn_setd(r26->value,18279299/*bias*/,r32);
			r43 = hl_vfields(r23)[0] ? (*(int*)(hl_vfields(r23)[0])) : (int)hl_dyn_geti(r23->value,140563565/*mode*/,&t$_i32);
			r44 = 34049;
			r32 = r20->lodBias;
			r51 = (float)r32;
			sdl_gl_tex_parameterf(r43,r44,r51);
			label$8f388d3_11_347:
			goto label$8f388d3_11_94;
			label$8f388d3_11_348:
			goto label$8f388d3_11_393;
		case 3:
			if( r2 == NULL ) hl_null_access();
			r46 = r2->buffers;
			if( !r46 ) goto label$8f388d3_11_393;
			r6 = 0;
			r25 = r2->vertex;
			if( r25 ) goto label$8f388d3_11_369;
			r36 = r0->curShader;
			if( r36 == NULL ) hl_null_access();
			r8 = r36->vertex;
			if( r8 == NULL ) hl_null_access();
			r46 = r8->buffers;
			if( !r46 ) goto label$8f388d3_11_369;
			r36 = r0->curShader;
			if( r36 == NULL ) hl_null_access();
			r8 = r36->vertex;
			if( r8 == NULL ) hl_null_access();
			r46 = r8->buffers;
			if( r46 == NULL ) hl_null_access();
			r12 = r46->length;
			r6 = r12;
			label$8f388d3_11_369:
			r12 = 0;
			r46 = r2->buffers;
			if( r46 == NULL ) hl_null_access();
			r13 = r46->length;
			label$8f388d3_11_373:
			if( r12 >= r13 ) goto label$8f388d3_11_393;
			r14 = r12;
			++r12;
			r15 = 35345;
			r16 = r14 + r6;
			if( r3 == NULL ) hl_null_access();
			r19 = r3->buffers;
			if( r19 == NULL ) hl_null_access();
			r33 = r19->length;
			if( ((unsigned)r14) < ((unsigned)r33) ) goto label$8f388d3_11_386;
			r52 = NULL;
			goto label$8f388d3_11_389;
			label$8f388d3_11_386:
			r22 = r19->array;
			r21 = ((vdynamic**)(r22 + 1))[r14];
			r52 = (h3d__Buffer)r21;
			label$8f388d3_11_389:
			if( r52 == NULL ) hl_null_access();
			r7 = r52->vbuf;
			sdl_gl_bind_buffer_base(r15,r16,r7);
			goto label$8f388d3_11_373;
	}
	label$8f388d3_11_393:
	return;
}

void h3d_impl_GlDriver_selectMaterial(h3d__impl__GlDriver r0,h3d__mat__Pass r1) {
	String r15;
	venum *r9;
	bool r4, r7, r12, r13;
	h3d__mat__Stencil r16, r17;
	h3d__mat__Texture r5, r6;
	int r2, r8, r10, r11, r14;
	if( r1 == NULL ) hl_null_access();
	r2 = r1->bits;
	r5 = r0->curTarget;
	r6 = NULL;
	if( r5 == r6 ) goto label$8f388d3_12_7;
	r4 = false;
	goto label$8f388d3_12_8;
	label$8f388d3_12_7:
	r4 = true;
	label$8f388d3_12_8:
	r7 = r0->rightHanded;
	if( r4 != r7 ) goto label$8f388d3_12_26;
	r9 = r1->culling;
	if( r9 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r9);
	switch(r8) {
		default:
		case 0:
			goto label$8f388d3_12_26;
		case 1:
			r10 = -4;
			r8 = r2 & r10;
			r10 = 2;
			r8 = r8 | r10;
			r2 = r8;
			goto label$8f388d3_12_26;
		case 2:
			r10 = -4;
			r8 = r2 & r10;
			r10 = 1;
			r8 = r8 | r10;
			r2 = r8;
	}
	label$8f388d3_12_26:
	h3d_impl_GlDriver_selectMaterialBits(r0,r2);
	r8 = r0->curColorMask;
	r10 = r1->colorMask;
	if( r8 == r10 ) goto label$8f388d3_12_67;
	r8 = r1->colorMask;
	r11 = 1;
	r10 = r8 & r11;
	r11 = 0;
	if( r10 != r11 ) goto label$8f388d3_12_37;
	r4 = false;
	goto label$8f388d3_12_38;
	label$8f388d3_12_37:
	r4 = true;
	label$8f388d3_12_38:
	r11 = 2;
	r10 = r8 & r11;
	r11 = 0;
	if( r10 != r11 ) goto label$8f388d3_12_44;
	r7 = false;
	goto label$8f388d3_12_45;
	label$8f388d3_12_44:
	r7 = true;
	label$8f388d3_12_45:
	r11 = 4;
	r10 = r8 & r11;
	r11 = 0;
	if( r10 != r11 ) goto label$8f388d3_12_51;
	r12 = false;
	goto label$8f388d3_12_52;
	label$8f388d3_12_51:
	r12 = true;
	label$8f388d3_12_52:
	r11 = 8;
	r10 = r8 & r11;
	r11 = 0;
	if( r10 != r11 ) goto label$8f388d3_12_58;
	r13 = false;
	goto label$8f388d3_12_59;
	label$8f388d3_12_58:
	r13 = true;
	label$8f388d3_12_59:
	sdl_gl_color_mask(r4,r7,r12,r13);
	r11 = 4;
	r10 = r8 >> r11;
	r14 = 0;
	if( r14 >= r10 ) goto label$8f388d3_12_66;
	r15 = (String)s$eca39e1;
	hl_throw((vdynamic*)r15);
	label$8f388d3_12_66:
	r0->curColorMask = r8;
	label$8f388d3_12_67:
	r16 = r0->defStencil;
	r17 = r1->stencil;
	if( r17 ) goto label$8f388d3_12_77;
	r4 = r0->curStEnabled;
	if( !r4 ) goto label$8f388d3_12_76;
	r8 = 2960;
	sdl_gl_disable(r8);
	r4 = false;
	r0->curStEnabled = r4;
	label$8f388d3_12_76:
	goto label$8f388d3_12_85;
	label$8f388d3_12_77:
	r17 = r1->stencil;
	r16 = r17;
	r4 = r0->curStEnabled;
	if( r4 ) goto label$8f388d3_12_85;
	r8 = 2960;
	sdl_gl_enable(r8);
	r4 = true;
	r0->curStEnabled = r4;
	label$8f388d3_12_85:
	if( r16 == NULL ) hl_null_access();
	r8 = r16->opBits;
	r10 = r16->maskBits;
	h3d_impl_GlDriver_selectStencilBits(r0,r8,r10);
	return;
}

void h3d_impl_GlDriver_selectMaterialBits(h3d__impl__GlDriver r0,int r1) {
	bool r6, r7;
	hl__types__ArrayBytes_Int r9;
	h3d__impl__$GlDriver r10;
	vbyte *r11;
	int r2, r3, r5, r8, r12, r13, r14, r15, r16, r17;
	r3 = r0->curMatBits;
	r2 = r1 ^ r3;
	r3 = r0->curMatBits;
	r5 = 0;
	if( r3 >= r5 ) goto label$8f388d3_13_7;
	r3 = -1;
	r2 = r3;
	label$8f388d3_13_7:
	r5 = 0;
	if( r2 != r5 ) goto label$8f388d3_13_10;
	return;
	label$8f388d3_13_10:
	r5 = 268435456;
	r3 = r1 & r5;
	r5 = 0;
	if( r3 != r5 ) goto label$8f388d3_13_16;
	r6 = false;
	goto label$8f388d3_13_17;
	label$8f388d3_13_16:
	r6 = true;
	label$8f388d3_13_17:
	if( !r6 ) goto label$8f388d3_13_28;
	r3 = 1032;
	r5 = 6913;
	sdl_gl_polygon_mode(r3,r5);
	r5 = -4;
	r3 = r1 & r5;
	r1 = r3;
	r5 = 3;
	r3 = r2 | r5;
	r2 = r3;
	goto label$8f388d3_13_31;
	label$8f388d3_13_28:
	r3 = 1032;
	r5 = 6914;
	sdl_gl_polygon_mode(r3,r5);
	label$8f388d3_13_31:
	r5 = 3;
	r3 = r2 & r5;
	r5 = 0;
	if( r3 == r5 ) goto label$8f388d3_13_64;
	r5 = 3;
	r3 = r1 & r5;
	r8 = 0;
	if( r3 != r8 ) goto label$8f388d3_13_42;
	r5 = 2884;
	sdl_gl_disable(r5);
	goto label$8f388d3_13_64;
	label$8f388d3_13_42:
	r5 = r0->curMatBits;
	r8 = 0;
	if( r5 < r8 ) goto label$8f388d3_13_50;
	r5 = r0->curMatBits;
	r8 = 3;
	r5 = r5 & r8;
	r8 = 0;
	if( r5 != r8 ) goto label$8f388d3_13_52;
	label$8f388d3_13_50:
	r5 = 2884;
	sdl_gl_enable(r5);
	label$8f388d3_13_52:
	r10 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r9 = r10->FACES;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->length;
	if( ((unsigned)r3) < ((unsigned)r8) ) goto label$8f388d3_13_59;
	r5 = 0;
	goto label$8f388d3_13_63;
	label$8f388d3_13_59:
	r11 = r9->bytes;
	r8 = 2;
	r8 = r3 << r8;
	r5 = *(int*)(r11 + r8);
	label$8f388d3_13_63:
	sdl_gl_cull_face(r5);
	label$8f388d3_13_64:
	r5 = 4194240;
	r3 = r2 & r5;
	r5 = 0;
	if( r3 == r5 ) goto label$8f388d3_13_200;
	r5 = 6;
	r3 = r1 >> r5;
	r5 = 15;
	r3 = r3 & r5;
	r8 = 10;
	r5 = r1 >> r8;
	r8 = 15;
	r5 = r5 & r8;
	r12 = 14;
	r8 = r1 >> r12;
	r12 = 15;
	r8 = r8 & r12;
	r13 = 18;
	r12 = r1 >> r13;
	r13 = 15;
	r12 = r12 & r13;
	if( r3 != r8 ) goto label$8f388d3_13_136;
	if( r5 != r12 ) goto label$8f388d3_13_136;
	r14 = 0;
	if( r3 != r14 ) goto label$8f388d3_13_93;
	r14 = 1;
	if( r5 != r14 ) goto label$8f388d3_13_93;
	r13 = 3042;
	sdl_gl_disable(r13);
	goto label$8f388d3_13_135;
	label$8f388d3_13_93:
	r13 = r0->curMatBits;
	r14 = 0;
	if( r13 < r14 ) goto label$8f388d3_13_110;
	r13 = r0->curMatBits;
	r14 = 6;
	r13 = r13 >> r14;
	r14 = 15;
	r13 = r13 & r14;
	r14 = 0;
	if( r13 != r14 ) goto label$8f388d3_13_112;
	r13 = r0->curMatBits;
	r14 = 10;
	r13 = r13 >> r14;
	r14 = 15;
	r13 = r13 & r14;
	r14 = 1;
	if( r13 != r14 ) goto label$8f388d3_13_112;
	label$8f388d3_13_110:
	r13 = 3042;
	sdl_gl_enable(r13);
	label$8f388d3_13_112:
	r10 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r9 = r10->BLEND;
	if( r9 == NULL ) hl_null_access();
	r14 = r9->length;
	if( ((unsigned)r3) < ((unsigned)r14) ) goto label$8f388d3_13_119;
	r13 = 0;
	goto label$8f388d3_13_123;
	label$8f388d3_13_119:
	r11 = r9->bytes;
	r14 = 2;
	r14 = r3 << r14;
	r13 = *(int*)(r11 + r14);
	label$8f388d3_13_123:
	r10 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r9 = r10->BLEND;
	if( r9 == NULL ) hl_null_access();
	r15 = r9->length;
	if( ((unsigned)r5) < ((unsigned)r15) ) goto label$8f388d3_13_130;
	r14 = 0;
	goto label$8f388d3_13_134;
	label$8f388d3_13_130:
	r11 = r9->bytes;
	r15 = 2;
	r15 = r5 << r15;
	r14 = *(int*)(r11 + r15);
	label$8f388d3_13_134:
	sdl_gl_blend_func(r13,r14);
	label$8f388d3_13_135:
	goto label$8f388d3_13_200;
	label$8f388d3_13_136:
	r13 = r0->curMatBits;
	r14 = 0;
	if( r13 < r14 ) goto label$8f388d3_13_153;
	r13 = r0->curMatBits;
	r14 = 6;
	r13 = r13 >> r14;
	r14 = 15;
	r13 = r13 & r14;
	r14 = 0;
	if( r13 != r14 ) goto label$8f388d3_13_155;
	r13 = r0->curMatBits;
	r14 = 10;
	r13 = r13 >> r14;
	r14 = 15;
	r13 = r13 & r14;
	r14 = 1;
	if( r13 != r14 ) goto label$8f388d3_13_155;
	label$8f388d3_13_153:
	r13 = 3042;
	sdl_gl_enable(r13);
	label$8f388d3_13_155:
	r10 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r9 = r10->BLEND;
	if( r9 == NULL ) hl_null_access();
	r14 = r9->length;
	if( ((unsigned)r3) < ((unsigned)r14) ) goto label$8f388d3_13_162;
	r13 = 0;
	goto label$8f388d3_13_166;
	label$8f388d3_13_162:
	r11 = r9->bytes;
	r14 = 2;
	r14 = r3 << r14;
	r13 = *(int*)(r11 + r14);
	label$8f388d3_13_166:
	r10 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r9 = r10->BLEND;
	if( r9 == NULL ) hl_null_access();
	r15 = r9->length;
	if( ((unsigned)r5) < ((unsigned)r15) ) goto label$8f388d3_13_173;
	r14 = 0;
	goto label$8f388d3_13_177;
	label$8f388d3_13_173:
	r11 = r9->bytes;
	r15 = 2;
	r15 = r5 << r15;
	r14 = *(int*)(r11 + r15);
	label$8f388d3_13_177:
	r10 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r9 = r10->BLEND;
	if( r9 == NULL ) hl_null_access();
	r16 = r9->length;
	if( ((unsigned)r8) < ((unsigned)r16) ) goto label$8f388d3_13_184;
	r15 = 0;
	goto label$8f388d3_13_188;
	label$8f388d3_13_184:
	r11 = r9->bytes;
	r16 = 2;
	r16 = r8 << r16;
	r15 = *(int*)(r11 + r16);
	label$8f388d3_13_188:
	r10 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r9 = r10->BLEND;
	if( r9 == NULL ) hl_null_access();
	r17 = r9->length;
	if( ((unsigned)r12) < ((unsigned)r17) ) goto label$8f388d3_13_195;
	r16 = 0;
	goto label$8f388d3_13_199;
	label$8f388d3_13_195:
	r11 = r9->bytes;
	r17 = 2;
	r17 = r12 << r17;
	r16 = *(int*)(r11 + r17);
	label$8f388d3_13_199:
	sdl_gl_blend_func_separate(r13,r14,r15,r16);
	label$8f388d3_13_200:
	r5 = 264241152;
	r3 = r2 & r5;
	r5 = 0;
	if( r3 == r5 ) goto label$8f388d3_13_249;
	r5 = 22;
	r3 = r1 >> r5;
	r5 = 7;
	r3 = r3 & r5;
	r8 = 25;
	r5 = r1 >> r8;
	r8 = 7;
	r5 = r5 & r8;
	if( r3 != r5 ) goto label$8f388d3_13_226;
	r10 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r9 = r10->OP;
	if( r9 == NULL ) hl_null_access();
	r12 = r9->length;
	if( ((unsigned)r3) < ((unsigned)r12) ) goto label$8f388d3_13_220;
	r8 = 0;
	goto label$8f388d3_13_224;
	label$8f388d3_13_220:
	r11 = r9->bytes;
	r12 = 2;
	r12 = r3 << r12;
	r8 = *(int*)(r11 + r12);
	label$8f388d3_13_224:
	sdl_gl_blend_equation(r8);
	goto label$8f388d3_13_249;
	label$8f388d3_13_226:
	r10 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r9 = r10->OP;
	if( r9 == NULL ) hl_null_access();
	r12 = r9->length;
	if( ((unsigned)r3) < ((unsigned)r12) ) goto label$8f388d3_13_233;
	r8 = 0;
	goto label$8f388d3_13_237;
	label$8f388d3_13_233:
	r11 = r9->bytes;
	r12 = 2;
	r12 = r3 << r12;
	r8 = *(int*)(r11 + r12);
	label$8f388d3_13_237:
	r10 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r9 = r10->OP;
	if( r9 == NULL ) hl_null_access();
	r13 = r9->length;
	if( ((unsigned)r5) < ((unsigned)r13) ) goto label$8f388d3_13_244;
	r12 = 0;
	goto label$8f388d3_13_248;
	label$8f388d3_13_244:
	r11 = r9->bytes;
	r13 = 2;
	r13 = r5 << r13;
	r12 = *(int*)(r11 + r13);
	label$8f388d3_13_248:
	sdl_gl_blend_equation_separate(r8,r12);
	label$8f388d3_13_249:
	r5 = 4;
	r3 = r2 & r5;
	r5 = 0;
	if( r3 == r5 ) goto label$8f388d3_13_263;
	r5 = 2;
	r3 = r1 >> r5;
	r5 = 1;
	r3 = r3 & r5;
	r5 = 0;
	if( r3 != r5 ) goto label$8f388d3_13_261;
	r7 = false;
	goto label$8f388d3_13_262;
	label$8f388d3_13_261:
	r7 = true;
	label$8f388d3_13_262:
	sdl_gl_depth_mask(r7);
	label$8f388d3_13_263:
	r5 = 56;
	r3 = r2 & r5;
	r5 = 0;
	if( r3 == r5 ) goto label$8f388d3_13_300;
	r5 = 3;
	r3 = r1 >> r5;
	r5 = 7;
	r3 = r3 & r5;
	r8 = 0;
	if( r3 != r8 ) goto label$8f388d3_13_276;
	r5 = 2929;
	sdl_gl_disable(r5);
	goto label$8f388d3_13_300;
	label$8f388d3_13_276:
	r5 = r0->curMatBits;
	r8 = 0;
	if( r5 < r8 ) goto label$8f388d3_13_286;
	r5 = r0->curMatBits;
	r8 = 3;
	r5 = r5 >> r8;
	r8 = 7;
	r5 = r5 & r8;
	r8 = 0;
	if( r5 != r8 ) goto label$8f388d3_13_288;
	label$8f388d3_13_286:
	r5 = 2929;
	sdl_gl_enable(r5);
	label$8f388d3_13_288:
	r10 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r9 = r10->COMPARE;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->length;
	if( ((unsigned)r3) < ((unsigned)r8) ) goto label$8f388d3_13_295;
	r5 = 0;
	goto label$8f388d3_13_299;
	label$8f388d3_13_295:
	r11 = r9->bytes;
	r8 = 2;
	r8 = r3 << r8;
	r5 = *(int*)(r11 + r8);
	label$8f388d3_13_299:
	sdl_gl_depth_func(r5);
	label$8f388d3_13_300:
	r0->curMatBits = r1;
	return;
}

void h3d_impl_GlDriver_selectStencilBits(h3d__impl__GlDriver r0,int r1,int r2) {
	hl__types__ArrayBytes_Int r8;
	h3d__impl__$GlDriver r9;
	vbyte *r10;
	int r3, r4, r6, r7, r11, r12, r13;
	r4 = r0->curStOpBits;
	r3 = r1 ^ r4;
	r6 = r0->curStMaskBits;
	r4 = r2 ^ r6;
	r6 = r3 | r4;
	r7 = 0;
	if( r6 != r7 ) goto label$8f388d3_14_8;
	return;
	label$8f388d3_14_8:
	r7 = 4088;
	r6 = r3 & r7;
	r7 = 0;
	if( r6 == r7 ) goto label$8f388d3_14_70;
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->FACES;
	if( r8 == NULL ) hl_null_access();
	r6 = 2;
	r7 = r8->length;
	if( ((unsigned)r6) < ((unsigned)r7) ) goto label$8f388d3_14_20;
	r6 = 0;
	goto label$8f388d3_14_24;
	label$8f388d3_14_20:
	r10 = r8->bytes;
	r7 = 2;
	r7 = r6 << r7;
	r6 = *(int*)(r10 + r7);
	label$8f388d3_14_24:
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->STENCIL_OP;
	if( r8 == NULL ) hl_null_access();
	r11 = 6;
	r7 = r1 >> r11;
	r11 = 7;
	r7 = r7 & r11;
	r11 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r11) ) goto label$8f388d3_14_35;
	r7 = 0;
	goto label$8f388d3_14_39;
	label$8f388d3_14_35:
	r10 = r8->bytes;
	r11 = 2;
	r11 = r7 << r11;
	r7 = *(int*)(r10 + r11);
	label$8f388d3_14_39:
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->STENCIL_OP;
	if( r8 == NULL ) hl_null_access();
	r12 = 9;
	r11 = r1 >> r12;
	r12 = 7;
	r11 = r11 & r12;
	r12 = r8->length;
	if( ((unsigned)r11) < ((unsigned)r12) ) goto label$8f388d3_14_50;
	r11 = 0;
	goto label$8f388d3_14_54;
	label$8f388d3_14_50:
	r10 = r8->bytes;
	r12 = 2;
	r12 = r11 << r12;
	r11 = *(int*)(r10 + r12);
	label$8f388d3_14_54:
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->STENCIL_OP;
	if( r8 == NULL ) hl_null_access();
	r13 = 3;
	r12 = r1 >> r13;
	r13 = 7;
	r12 = r12 & r13;
	r13 = r8->length;
	if( ((unsigned)r12) < ((unsigned)r13) ) goto label$8f388d3_14_65;
	r12 = 0;
	goto label$8f388d3_14_69;
	label$8f388d3_14_65:
	r10 = r8->bytes;
	r13 = 2;
	r13 = r12 << r13;
	r12 = *(int*)(r10 + r13);
	label$8f388d3_14_69:
	sdl_gl_stencil_op_separate(r6,r7,r11,r12);
	label$8f388d3_14_70:
	r7 = 16744448;
	r6 = r3 & r7;
	r7 = 0;
	if( r6 == r7 ) goto label$8f388d3_14_132;
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->FACES;
	if( r8 == NULL ) hl_null_access();
	r6 = 1;
	r7 = r8->length;
	if( ((unsigned)r6) < ((unsigned)r7) ) goto label$8f388d3_14_82;
	r6 = 0;
	goto label$8f388d3_14_86;
	label$8f388d3_14_82:
	r10 = r8->bytes;
	r7 = 2;
	r7 = r6 << r7;
	r6 = *(int*)(r10 + r7);
	label$8f388d3_14_86:
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->STENCIL_OP;
	if( r8 == NULL ) hl_null_access();
	r11 = 18;
	r7 = r1 >> r11;
	r11 = 7;
	r7 = r7 & r11;
	r11 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r11) ) goto label$8f388d3_14_97;
	r7 = 0;
	goto label$8f388d3_14_101;
	label$8f388d3_14_97:
	r10 = r8->bytes;
	r11 = 2;
	r11 = r7 << r11;
	r7 = *(int*)(r10 + r11);
	label$8f388d3_14_101:
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->STENCIL_OP;
	if( r8 == NULL ) hl_null_access();
	r12 = 21;
	r11 = r1 >> r12;
	r12 = 7;
	r11 = r11 & r12;
	r12 = r8->length;
	if( ((unsigned)r11) < ((unsigned)r12) ) goto label$8f388d3_14_112;
	r11 = 0;
	goto label$8f388d3_14_116;
	label$8f388d3_14_112:
	r10 = r8->bytes;
	r12 = 2;
	r12 = r11 << r12;
	r11 = *(int*)(r10 + r12);
	label$8f388d3_14_116:
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->STENCIL_OP;
	if( r8 == NULL ) hl_null_access();
	r13 = 15;
	r12 = r1 >> r13;
	r13 = 7;
	r12 = r12 & r13;
	r13 = r8->length;
	if( ((unsigned)r12) < ((unsigned)r13) ) goto label$8f388d3_14_127;
	r12 = 0;
	goto label$8f388d3_14_131;
	label$8f388d3_14_127:
	r10 = r8->bytes;
	r13 = 2;
	r13 = r12 << r13;
	r12 = *(int*)(r10 + r13);
	label$8f388d3_14_131:
	sdl_gl_stencil_op_separate(r6,r7,r11,r12);
	label$8f388d3_14_132:
	r7 = 7;
	r6 = r3 & r7;
	r11 = 16711935;
	r7 = r4 & r11;
	r6 = r6 | r7;
	r7 = 0;
	if( r6 == r7 ) goto label$8f388d3_14_171;
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->FACES;
	if( r8 == NULL ) hl_null_access();
	r6 = 2;
	r7 = r8->length;
	if( ((unsigned)r6) < ((unsigned)r7) ) goto label$8f388d3_14_147;
	r6 = 0;
	goto label$8f388d3_14_151;
	label$8f388d3_14_147:
	r10 = r8->bytes;
	r7 = 2;
	r7 = r6 << r7;
	r6 = *(int*)(r10 + r7);
	label$8f388d3_14_151:
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->COMPARE;
	if( r8 == NULL ) hl_null_access();
	r11 = 7;
	r7 = r1 & r11;
	r11 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r11) ) goto label$8f388d3_14_160;
	r7 = 0;
	goto label$8f388d3_14_164;
	label$8f388d3_14_160:
	r10 = r8->bytes;
	r11 = 2;
	r11 = r7 << r11;
	r7 = *(int*)(r10 + r11);
	label$8f388d3_14_164:
	r12 = 16;
	r11 = r2 >> r12;
	r12 = 255;
	r11 = r11 & r12;
	r13 = 255;
	r12 = r2 & r13;
	sdl_gl_stencil_func_separate(r6,r7,r11,r12);
	label$8f388d3_14_171:
	r7 = 28672;
	r6 = r3 & r7;
	r11 = 16711935;
	r7 = r4 & r11;
	r6 = r6 | r7;
	r7 = 0;
	if( r6 == r7 ) goto label$8f388d3_14_212;
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->FACES;
	if( r8 == NULL ) hl_null_access();
	r6 = 1;
	r7 = r8->length;
	if( ((unsigned)r6) < ((unsigned)r7) ) goto label$8f388d3_14_186;
	r6 = 0;
	goto label$8f388d3_14_190;
	label$8f388d3_14_186:
	r10 = r8->bytes;
	r7 = 2;
	r7 = r6 << r7;
	r6 = *(int*)(r10 + r7);
	label$8f388d3_14_190:
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->COMPARE;
	if( r8 == NULL ) hl_null_access();
	r11 = 12;
	r7 = r1 >> r11;
	r11 = 7;
	r7 = r7 & r11;
	r11 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r11) ) goto label$8f388d3_14_201;
	r7 = 0;
	goto label$8f388d3_14_205;
	label$8f388d3_14_201:
	r10 = r8->bytes;
	r11 = 2;
	r11 = r7 << r11;
	r7 = *(int*)(r10 + r11);
	label$8f388d3_14_205:
	r12 = 16;
	r11 = r2 >> r12;
	r12 = 255;
	r11 = r11 & r12;
	r13 = 255;
	r12 = r2 & r13;
	sdl_gl_stencil_func_separate(r6,r7,r11,r12);
	label$8f388d3_14_212:
	r7 = 65280;
	r6 = r4 & r7;
	r7 = 0;
	if( r6 == r7 ) goto label$8f388d3_14_246;
	r7 = 8;
	r6 = r2 >> r7;
	r7 = 255;
	r6 = r6 & r7;
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->FACES;
	if( r8 == NULL ) hl_null_access();
	r7 = 2;
	r11 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r11) ) goto label$8f388d3_14_228;
	r7 = 0;
	goto label$8f388d3_14_232;
	label$8f388d3_14_228:
	r10 = r8->bytes;
	r11 = 2;
	r11 = r7 << r11;
	r7 = *(int*)(r10 + r11);
	label$8f388d3_14_232:
	sdl_gl_stencil_mask_separate(r7,r6);
	r9 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r8 = r9->FACES;
	if( r8 == NULL ) hl_null_access();
	r7 = 1;
	r11 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r11) ) goto label$8f388d3_14_241;
	r7 = 0;
	goto label$8f388d3_14_245;
	label$8f388d3_14_241:
	r10 = r8->bytes;
	r11 = 2;
	r11 = r7 << r11;
	r7 = *(int*)(r10 + r11);
	label$8f388d3_14_245:
	sdl_gl_stencil_mask_separate(r7,r6);
	label$8f388d3_14_246:
	r0->curStOpBits = r1;
	r0->curStMaskBits = r2;
	return;
}

void h3d_impl_GlDriver_clear(h3d__impl__GlDriver r0,h3d__Vector4Impl r1,vdynamic* r2,vdynamic* r3) {
	bool r6, r7, r8, r9;
	double r12, r13, r14, r15;
	h3d__mat__Stencil r17;
	h3d__mat__Texture r11;
	int r4, r10, r16;
	r4 = 0;
	if( !r1 ) goto label$8f388d3_15_37;
	r6 = true;
	r7 = true;
	r8 = true;
	r9 = true;
	sdl_gl_color_mask(r6,r7,r8,r9);
	r10 = 15;
	r0->curColorMask = r10;
	r11 = r0->curTarget;
	if( !r11 ) goto label$8f388d3_15_28;
	r11 = r0->curTarget;
	if( r11 == NULL ) hl_null_access();
	r6 = h3d_mat_Texture_isSRGB(r11);
	if( !r6 ) goto label$8f388d3_15_28;
	if( r1 == NULL ) hl_null_access();
	r12 = r1->x;
	r13 = 0.4545454545454545303;
	r12 = hl_math_pow(r12,r13);
	r13 = r1->y;
	r14 = 0.4545454545454545303;
	r13 = hl_math_pow(r13,r14);
	r14 = r1->z;
	r15 = 0.4545454545454545303;
	r14 = hl_math_pow(r14,r15);
	r15 = r1->w;
	sdl_gl_clear_color(r12,r13,r14,r15);
	goto label$8f388d3_15_34;
	label$8f388d3_15_28:
	if( r1 == NULL ) hl_null_access();
	r12 = r1->x;
	r13 = r1->y;
	r14 = r1->z;
	r15 = r1->w;
	sdl_gl_clear_color(r12,r13,r14,r15);
	label$8f388d3_15_34:
	r16 = 16384;
	r10 = r4 | r16;
	r4 = r10;
	label$8f388d3_15_37:
	if( !r2 ) goto label$8f388d3_15_52;
	r6 = true;
	sdl_gl_depth_mask(r6);
	r10 = r0->curMatBits;
	r16 = 0;
	if( r10 < r16 ) goto label$8f388d3_15_47;
	r10 = r0->curMatBits;
	r16 = 4;
	r10 = r10 | r16;
	r0->curMatBits = r10;
	label$8f388d3_15_47:
	r12 = r2 ? r2->v.d : 0;
	sdl_gl_clear_depth(r12);
	r16 = 256;
	r10 = r4 | r16;
	r4 = r10;
	label$8f388d3_15_52:
	if( !r3 ) goto label$8f388d3_15_65;
	r17 = r0->defStencil;
	if( r17 == NULL ) hl_null_access();
	r10 = r17->opBits;
	r17 = r0->defStencil;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->maskBits;
	h3d_impl_GlDriver_selectStencilBits(r0,r10,r16);
	r10 = r3 ? r3->v.i : 0;
	sdl_gl_clear_stencil(r10);
	r16 = 1024;
	r10 = r4 | r16;
	r4 = r10;
	label$8f388d3_15_65:
	r16 = 0;
	if( r4 == r16 ) goto label$8f388d3_15_68;
	sdl_gl_clear(r4);
	label$8f388d3_15_68:
	r11 = r0->curTarget;
	if( !r11 ) goto label$8f388d3_15_76;
	r11 = r0->curTarget;
	if( r11 == NULL ) hl_null_access();
	r10 = r11->flags;
	r16 = 256;
	r10 = r10 | r16;
	r11->flags = r10;
	label$8f388d3_15_76:
	return;
}

void h3d_impl_GlDriver_resize(h3d__impl__GlDriver r0,int r1,int r2) {
	vvirtual *r7;
	h3d__mat__Texture r6, r8;
	int r3, r5;
	r0->bufferWidth = r1;
	r0->bufferHeight = r2;
	r3 = 0;
	r5 = 0;
	sdl_gl_viewport(r3,r5,r1,r2);
	r6 = r0->defaultDepth;
	if( !r6 ) goto label$8f388d3_16_22;
	r6 = r0->defaultDepth;
	h3d_impl_GlDriver_disposeDepthBuffer(r0,r6);
	r6 = r0->defaultDepth;
	if( r6 == NULL ) hl_null_access();
	r3 = r0->bufferWidth;
	r6->width = r3;
	r6 = r0->defaultDepth;
	if( r6 == NULL ) hl_null_access();
	r3 = r0->bufferHeight;
	r6->height = r3;
	r6 = r0->defaultDepth;
	if( r6 == NULL ) hl_null_access();
	r8 = r0->defaultDepth;
	r7 = h3d_impl_GlDriver_allocDepthBuffer(r0,r8);
	r6->_hx_t = r7;
	label$8f388d3_16_22:
	return;
}

int h3d_impl_GlDriver_getChannels(h3d__impl__GlDriver r0,vvirtual* r1) {
	String r4, r7;
	int *r5;
	vbyte *r6;
	int r2, r3;
	if( r1 == NULL ) hl_null_access();
	r2 = hl_vfields(r1)[4] ? (*(int*)(hl_vfields(r1)[4])) : (int)hl_dyn_geti(r1->value,46889754/*internalFmt*/,&t$_i32);
	r3 = 6407;
	if( r3 == r2 ) goto label$8f388d3_17_69;
	r3 = 6408;
	if( r3 == r2 ) goto label$8f388d3_17_71;
	r3 = 32856;
	if( r3 == r2 ) goto label$8f388d3_17_73;
	r3 = 32857;
	if( r3 == r2 ) goto label$8f388d3_17_75;
	r3 = 6403;
	if( r3 == r2 ) goto label$8f388d3_17_77;
	r3 = 33321;
	if( r3 == r2 ) goto label$8f388d3_17_77;
	r3 = 33322;
	if( r3 == r2 ) goto label$8f388d3_17_77;
	r3 = 33325;
	if( r3 == r2 ) goto label$8f388d3_17_77;
	r3 = 33326;
	if( r3 == r2 ) goto label$8f388d3_17_77;
	r3 = 33319;
	if( r3 == r2 ) goto label$8f388d3_17_79;
	r3 = 33323;
	if( r3 == r2 ) goto label$8f388d3_17_79;
	r3 = 33324;
	if( r3 == r2 ) goto label$8f388d3_17_79;
	r3 = 33327;
	if( r3 == r2 ) goto label$8f388d3_17_79;
	r3 = 33328;
	if( r3 == r2 ) goto label$8f388d3_17_79;
	r3 = 34836;
	if( r3 == r2 ) goto label$8f388d3_17_81;
	r3 = 34842;
	if( r3 == r2 ) goto label$8f388d3_17_81;
	r3 = 35898;
	if( r3 == r2 ) goto label$8f388d3_17_83;
	r3 = 35904;
	if( r3 == r2 ) goto label$8f388d3_17_85;
	r3 = 35905;
	if( r3 == r2 ) goto label$8f388d3_17_85;
	r3 = 35906;
	if( r3 == r2 ) goto label$8f388d3_17_87;
	r3 = 35907;
	if( r3 == r2 ) goto label$8f388d3_17_87;
	r3 = 32859;
	if( r3 == r2 ) goto label$8f388d3_17_89;
	r3 = 33777;
	if( r3 == r2 ) goto label$8f388d3_17_89;
	r3 = 33778;
	if( r3 == r2 ) goto label$8f388d3_17_89;
	r3 = 33779;
	if( r3 == r2 ) goto label$8f388d3_17_89;
	r3 = 36492;
	if( r3 == r2 ) goto label$8f388d3_17_89;
	r3 = 32852;
	if( r3 == r2 ) goto label$8f388d3_17_91;
	r3 = 34837;
	if( r3 == r2 ) goto label$8f388d3_17_91;
	r3 = 34843;
	if( r3 == r2 ) goto label$8f388d3_17_91;
	r3 = 36495;
	if( r3 == r2 ) goto label$8f388d3_17_91;
	r4 = (String)s$Invalid_format_;
	r2 = hl_vfields(r1)[4] ? (*(int*)(hl_vfields(r1)[4])) : (int)hl_dyn_geti(r1->value,46889754/*internalFmt*/,&t$_i32);
	r5 = &r2;
	r6 = hl_itos(r2,r5);
	r7 = String___alloc__(r6,r2);
	r4 = String___add__(r4,r7);
	hl_throw((vdynamic*)r4);
	label$8f388d3_17_69:
	r2 = 6407;
	return r2;
	label$8f388d3_17_71:
	r2 = 6408;
	return r2;
	label$8f388d3_17_73:
	r2 = 32993;
	return r2;
	label$8f388d3_17_75:
	r2 = 6408;
	return r2;
	label$8f388d3_17_77:
	r2 = 6403;
	return r2;
	label$8f388d3_17_79:
	r2 = 33319;
	return r2;
	label$8f388d3_17_81:
	r2 = 6408;
	return r2;
	label$8f388d3_17_83:
	r2 = 6407;
	return r2;
	label$8f388d3_17_85:
	r2 = 6407;
	return r2;
	label$8f388d3_17_87:
	r2 = 6408;
	return r2;
	label$8f388d3_17_89:
	r2 = 6408;
	return r2;
	label$8f388d3_17_91:
	r2 = 6407;
	return r2;
}

bool h3d_impl_GlDriver_isSupportedFormat(h3d__impl__GlDriver r0,venum* r1) {
	venum *r4;
	bool r3;
	int r2, r5;
	if( r1 == NULL ) hl_null_access();
	r2 = HL__ENUM_INDEX__(r1);
	switch(r2) {
		default:
		case 0:
		case 1:
		case 18:
		case 19:
		case 20:
		case 21:
			r3 = false;
			return r3;
		case 2:
			r3 = true;
			return r3;
		case 3:
		case 4:
			r4 = (venum*)g$h3d_impl_Feature_FloatTextures;
			r3 = h3d_impl_GlDriver_hasFeature(r0,r4);
			return r3;
		case 14:
		case 15:
			r4 = (venum*)g$h3d_impl_Feature_SRGBTextures;
			r3 = h3d_impl_GlDriver_hasFeature(r0,r4);
			return r3;
		case 5:
		case 6:
		case 7:
		case 8:
		case 9:
		case 10:
		case 11:
		case 12:
		case 13:
		case 16:
		case 17:
			r3 = true;
			return r3;
		case 22:
			r2 = ((hxd_PixelFormat_S3TC*)r1)->p0;
			r5 = r0->maxCompressedTexturesSupport;
			if( r2 <= r5 ) goto label$8f388d3_18_20;
			r3 = false;
			goto label$8f388d3_18_21;
			label$8f388d3_18_20:
			r3 = true;
			label$8f388d3_18_21:
			return r3;
	}
}

int h3d_impl_GlDriver_getBindType(h3d__impl__GlDriver r0,h3d__mat__Texture r1) {
	bool r2, r5;
	int r3, r4;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->flags;
	r4 = 2;
	r3 = r3 & r4;
	r4 = 0;
	if( r3 != r4 ) goto label$8f388d3_19_8;
	r2 = false;
	goto label$8f388d3_19_9;
	label$8f388d3_19_8:
	r2 = true;
	label$8f388d3_19_9:
	r3 = r1->flags;
	r4 = 2048;
	r3 = r3 & r4;
	r4 = 0;
	if( r3 != r4 ) goto label$8f388d3_19_16;
	r5 = false;
	goto label$8f388d3_19_17;
	label$8f388d3_19_16:
	r5 = true;
	label$8f388d3_19_17:
	if( !r2 ) goto label$8f388d3_19_20;
	r3 = 34067;
	return r3;
	label$8f388d3_19_20:
	if( !r5 ) goto label$8f388d3_19_23;
	r3 = 35866;
	return r3;
	label$8f388d3_19_23:
	r3 = 3553;
	return r3;
}

vvirtual* h3d_impl_GlDriver_allocTexture(h3d__impl__GlDriver r0,h3d__mat__Texture r1) {
	String r13, r14;
	vvirtual *r7, *r15;
	venum *r11, *r12, *r16;
	bool r3, r36, r37;
	hl__types__ArrayBytes_Int r28;
	double r10;
	int *r19;
	vdynamic *r6, *r8;
	h3d__impl__$GlDriver r4;
	vbyte *r20;
	int r5, r9, r17, r18, r21, r22, r23, r24, r25, r26, r27, r29, r30, r31, r32, r33, r34, r35;
	r4 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r3 = r4->outOfMemoryCheck;
	if( !r3 ) goto label$8f388d3_20_4;
	r5 = sdl_gl_get_error();
	label$8f388d3_20_4:
	r6 = sdl_gl_create_texture();
	r5 = h3d_impl_GlDriver_getBindType(r0,r1);
	r7 = hl_alloc_virtual(&t$vrt_6ab1ef9);
	if( hl_vfields(r7)[7] ) *(vdynamic**)(hl_vfields(r7)[7]) = (vdynamic*)r6; else hl_dyn_setp(r7->value,116/*t*/,&t$nul_i32,r6);
	if( r1 == NULL ) hl_null_access();
	r9 = r1->width;
	if( hl_vfields(r7)[8] ) *(int*)(hl_vfields(r7)[8]) = (int)r9; else hl_dyn_seti(r7->value,-362629759/*width*/,&t$_i32,r9);
	r9 = r1->height;
	if( hl_vfields(r7)[3] ) *(int*)(hl_vfields(r7)[3]) = (int)r9; else hl_dyn_seti(r7->value,38537191/*height*/,&t$_i32,r9);
	r9 = 6408;
	if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
	r9 = 5121;
	if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
	r9 = -1;
	if( hl_vfields(r7)[2] ) *(int*)(hl_vfields(r7)[2]) = (int)r9; else hl_dyn_seti(r7->value,18283536/*bits*/,&t$_i32,r9);
	if( hl_vfields(r7)[1] ) *(int*)(hl_vfields(r7)[1]) = (int)r5; else hl_dyn_seti(r7->value,18282183/*bind*/,&t$_i32,r5);
	r9 = 0;
	r10 = (double)r9;
	if( hl_vfields(r7)[0] ) *(double*)(hl_vfields(r7)[0]) = (double)r10; else hl_dyn_setd(r7->value,18279299/*bias*/,r10);
	r9 = r1->startingMip;
	if( hl_vfields(r7)[6] ) *(int*)(hl_vfields(r7)[6]) = (int)r9; else hl_dyn_seti(r7->value,43433820/*startMip*/,&t$_i32,r9);
	r11 = r1->format;
	if( r11 == NULL ) hl_null_access();
	r9 = HL__ENUM_INDEX__(r11);
	switch(r9) {
		default:
		case 0:
			r13 = (String)s$Unsupported_texture_format_;
			r12 = r1->format;
			r14 = Std_string(((vdynamic*)r12));
			r13 = String___add__(r13,r14);
			hl_throw((vdynamic*)r13);
		case 1:
			r9 = 32856;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 2:
			goto label$8f388d3_20_200;
		case 3:
			r16 = (venum*)g$h3d_impl_Feature_FloatTextures;
			r3 = h3d_impl_GlDriver_hasFeature(r0,r16);
			if( !r3 ) goto label$8f388d3_20_46;
			r9 = 5131;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			r9 = 34842;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_51;
			label$8f388d3_20_46:
			r13 = (String)s$Unsupported_texture_format_;
			r12 = r1->format;
			r14 = Std_string(((vdynamic*)r12));
			r13 = String___add__(r13,r14);
			hl_throw((vdynamic*)r13);
			label$8f388d3_20_51:
			goto label$8f388d3_20_200;
		case 4:
			r16 = (venum*)g$h3d_impl_Feature_FloatTextures;
			r3 = h3d_impl_GlDriver_hasFeature(r0,r16);
			if( !r3 ) goto label$8f388d3_20_60;
			r9 = 34836;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 5126;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_65;
			label$8f388d3_20_60:
			r13 = (String)s$Unsupported_texture_format_;
			r12 = r1->format;
			r14 = Std_string(((vdynamic*)r12));
			r13 = String___add__(r13,r14);
			hl_throw((vdynamic*)r13);
			label$8f388d3_20_65:
			goto label$8f388d3_20_200;
		case 5:
			r9 = 33321;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 6:
			r9 = 33325;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 5131;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 7:
			r9 = 33326;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 5126;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 8:
			r9 = 33323;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 9:
			r9 = 33327;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 5131;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 10:
			r9 = 33328;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 5126;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 11:
			r9 = 6407;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 12:
			r9 = 34843;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 5131;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 13:
			r9 = 34837;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 5126;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 14:
			r9 = 35905;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 15:
			r9 = 35907;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 16:
			r9 = 32857;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 33640;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 17:
			r9 = 35898;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 35899;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 18:
			r9 = 33322;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 5123;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 19:
			r9 = 33324;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 5123;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 20:
			r9 = 32852;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 5123;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 21:
			r9 = 32859;
			if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r9; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r9);
			r9 = 5123;
			if( hl_vfields(r7)[5] ) *(int*)(hl_vfields(r7)[5]) = (int)r9; else hl_dyn_seti(r7->value,507777014/*pixelFmt*/,&t$_i32,r9);
			goto label$8f388d3_20_200;
		case 22:
			r9 = ((hxd_PixelFormat_S3TC*)r11)->p0;
			r18 = r0->maxCompressedTexturesSupport;
			if( r18 < r9 ) goto label$8f388d3_20_195;
			r17 = r1->width;
			r18 = 3;
			r17 = r17 & r18;
			r18 = 0;
			if( r17 != r18 ) goto label$8f388d3_20_154;
			r17 = r1->height;
			r18 = 3;
			r17 = r17 & r18;
			r18 = 0;
			if( r17 == r18 ) goto label$8f388d3_20_174;
			label$8f388d3_20_154:
			r13 = (String)s$Compressed_texture_;
			r14 = Std_string(((vdynamic*)r1));
			r13 = String___add__(r13,r14);
			r14 = (String)s$_has_size_;
			r13 = String___add__(r13,r14);
			r17 = r1->width;
			r19 = &r17;
			r20 = hl_itos(r17,r19);
			r14 = String___alloc__(r20,r17);
			r13 = String___add__(r13,r14);
			r14 = (String)s$x;
			r13 = String___add__(r13,r14);
			r17 = r1->height;
			r19 = &r17;
			r20 = hl_itos(r17,r19);
			r14 = String___alloc__(r20,r17);
			r13 = String___add__(r13,r14);
			r14 = (String)s$_must_be_a_multiple_of_4;
			r13 = String___add__(r13,r14);
			hl_throw((vdynamic*)r13);
			label$8f388d3_20_174:
			switch(r9) {
				default:
				case 0:
				case 4:
				case 5:
					r13 = (String)s$Unsupported_texture_format_;
					r12 = r1->format;
					r14 = Std_string(((vdynamic*)r12));
					r13 = String___add__(r13,r14);
					hl_throw((vdynamic*)r13);
				case 1:
					r17 = 33777;
					if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r17; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r17);
					goto label$8f388d3_20_194;
				case 2:
					r17 = 33778;
					if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r17; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r17);
					goto label$8f388d3_20_194;
				case 3:
					r17 = 33779;
					if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r17; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r17);
					goto label$8f388d3_20_194;
				case 6:
					r17 = 36495;
					if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r17; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r17);
					goto label$8f388d3_20_194;
				case 7:
					r17 = 36492;
					if( hl_vfields(r7)[4] ) *(int*)(hl_vfields(r7)[4]) = (int)r17; else hl_dyn_seti(r7->value,46889754/*internalFmt*/,&t$_i32,r17);
			}
			label$8f388d3_20_194:
			goto label$8f388d3_20_200;
			label$8f388d3_20_195:
			r13 = (String)s$Unsupported_texture_format_;
			r12 = r1->format;
			r14 = Std_string(((vdynamic*)r12));
			r13 = String___add__(r13,r14);
			hl_throw((vdynamic*)r13);
	}
	label$8f388d3_20_200:
	r9 = r0->frame;
	r9 = h3d_mat_Texture_set_lastFrame(r1,r9);
	r9 = r1->flags;
	r17 = -257;
	r9 = r9 & r17;
	r1->flags = r9;
	r8 = hl_vfields(r7)[7] ? (*(vdynamic**)(hl_vfields(r7)[7])) : (vdynamic*)hl_dyn_getp(r7->value,116/*t*/,&t$nul_i32);
	sdl_gl_bind_texture(r5,r8);
	r3 = false;
	r17 = 33084;
	r18 = r1->startingMip;
	sdl_gl_tex_parameteri(r5,r17,r18);
	r17 = 33085;
	r18 = h3d_mat_Texture_get_mipLevels(r1);
	r21 = 1;
	r18 = r18 - r21;
	sdl_gl_tex_parameteri(r5,r17,r18);
	r9 = 0;
	r17 = h3d_mat_Texture_get_mipLevels(r1);
	label$8f388d3_20_219:
	if( r9 >= r17 ) goto label$8f388d3_20_372;
	r18 = r9;
	++r9;
	if( r7 == NULL ) hl_null_access();
	r21 = hl_vfields(r7)[8] ? (*(int*)(hl_vfields(r7)[8])) : (int)hl_dyn_geti(r7->value,-362629759/*width*/,&t$_i32);
	r21 = r21 >> r18;
	r22 = 1;
	if( r22 >= r21 ) goto label$8f388d3_20_230;
	r22 = r21;
	goto label$8f388d3_20_231;
	label$8f388d3_20_230:
	r22 = 1;
	label$8f388d3_20_231:
	r23 = hl_vfields(r7)[3] ? (*(int*)(hl_vfields(r7)[3])) : (int)hl_dyn_geti(r7->value,38537191/*height*/,&t$_i32);
	r23 = r23 >> r18;
	r24 = 1;
	if( r24 >= r23 ) goto label$8f388d3_20_237;
	r24 = r23;
	goto label$8f388d3_20_238;
	label$8f388d3_20_237:
	r24 = 1;
	label$8f388d3_20_238:
	if( r1 == NULL ) hl_null_access();
	r25 = r1->flags;
	r26 = 2;
	r25 = r25 & r26;
	r26 = 0;
	if( r25 == r26 ) goto label$8f388d3_20_302;
	r25 = 0;
	label$8f388d3_20_245:
	r27 = 6;
	if( r25 >= r27 ) goto label$8f388d3_20_301;
	r26 = r25;
	++r25;
	r4 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r28 = r4->CUBE_FACES;
	if( r28 == NULL ) hl_null_access();
	r29 = r28->length;
	if( ((unsigned)r26) < ((unsigned)r29) ) goto label$8f388d3_20_257;
	r27 = 0;
	goto label$8f388d3_20_261;
	label$8f388d3_20_257:
	r20 = r28->bytes;
	r29 = 2;
	r29 = r26 << r29;
	r27 = *(int*)(r20 + r29);
	label$8f388d3_20_261:
	if( r7 == NULL ) hl_null_access();
	r30 = hl_vfields(r7)[4] ? (*(int*)(hl_vfields(r7)[4])) : (int)hl_dyn_geti(r7->value,46889754/*internalFmt*/,&t$_i32);
	r33 = 0;
	r34 = h3d_impl_GlDriver_getChannels(r0,r7);
	r35 = hl_vfields(r7)[5] ? (*(int*)(hl_vfields(r7)[5])) : (int)hl_dyn_geti(r7->value,507777014/*pixelFmt*/,&t$_i32);
	r20 = NULL;
	sdl_gl_tex_image2d(r27,r18,r30,r22,r24,r33,r34,r35,r20);
	r4 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r36 = r4->outOfMemoryCheck;
	if( r36 ) goto label$8f388d3_20_273;
	r37 = false;
	goto label$8f388d3_20_298;
	label$8f388d3_20_273:
	r27 = sdl_gl_get_error();
	r30 = 1285;
	if( r27 != r30 ) goto label$8f388d3_20_280;
	r37 = true;
	r3 = r37;
	r37 = true;
	goto label$8f388d3_20_298;
	label$8f388d3_20_280:
	r30 = 0;
	if( r27 == r30 ) goto label$8f388d3_20_297;
	r13 = (String)s$Failed_to_alloc_texture_;
	if( r1 == NULL ) hl_null_access();
	r11 = r1->format;
	r14 = Std_string(((vdynamic*)r11));
	r13 = String___add__(r13,r14);
	r14 = (String)s$_error_;
	r13 = String___add__(r13,r14);
	r29 = r27;
	r19 = &r29;
	r20 = hl_itos(r29,r19);
	r14 = String___alloc__(r20,r29);
	r13 = String___add__(r13,r14);
	r14 = (String)s$9371d7a;
	r13 = String___add__(r13,r14);
	hl_throw((vdynamic*)r13);
	label$8f388d3_20_297:
	r37 = false;
	label$8f388d3_20_298:
	if( !r37 ) goto label$8f388d3_20_300;
	goto label$8f388d3_20_301;
	label$8f388d3_20_300:
	goto label$8f388d3_20_245;
	label$8f388d3_20_301:
	goto label$8f388d3_20_371;
	label$8f388d3_20_302:
	r25 = r1->flags;
	r26 = 2048;
	r25 = r25 & r26;
	r26 = 0;
	if( r25 == r26 ) goto label$8f388d3_20_340;
	r27 = hl_vfields(r7)[4] ? (*(int*)(hl_vfields(r7)[4])) : (int)hl_dyn_geti(r7->value,46889754/*internalFmt*/,&t$_i32);
	r31 = ((int (*)(h3d__mat__Texture))r1->$type->vobj_proto[0])(r1);
	r32 = 0;
	r33 = h3d_impl_GlDriver_getChannels(r0,r7);
	r34 = hl_vfields(r7)[5] ? (*(int*)(hl_vfields(r7)[5])) : (int)hl_dyn_geti(r7->value,507777014/*pixelFmt*/,&t$_i32);
	r20 = NULL;
	sdl_gl_tex_image3d(r5,r18,r27,r22,r24,r31,r32,r33,r34,r20);
	r4 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r36 = r4->outOfMemoryCheck;
	if( !r36 ) goto label$8f388d3_20_339;
	r25 = sdl_gl_get_error();
	r27 = 1285;
	if( r25 != r27 ) goto label$8f388d3_20_323;
	r36 = true;
	r3 = r36;
	goto label$8f388d3_20_339;
	label$8f388d3_20_323:
	r27 = 0;
	if( r25 == r27 ) goto label$8f388d3_20_339;
	r13 = (String)s$Failed_to_alloc_texture_;
	r11 = r1->format;
	r14 = Std_string(((vdynamic*)r11));
	r13 = String___add__(r13,r14);
	r14 = (String)s$_error_;
	r13 = String___add__(r13,r14);
	r26 = r25;
	r19 = &r26;
	r20 = hl_itos(r26,r19);
	r14 = String___alloc__(r20,r26);
	r13 = String___add__(r13,r14);
	r14 = (String)s$9371d7a;
	r13 = String___add__(r13,r14);
	hl_throw((vdynamic*)r13);
	label$8f388d3_20_339:
	goto label$8f388d3_20_371;
	label$8f388d3_20_340:
	r27 = hl_vfields(r7)[4] ? (*(int*)(hl_vfields(r7)[4])) : (int)hl_dyn_geti(r7->value,46889754/*internalFmt*/,&t$_i32);
	r31 = 0;
	r32 = h3d_impl_GlDriver_getChannels(r0,r7);
	r33 = hl_vfields(r7)[5] ? (*(int*)(hl_vfields(r7)[5])) : (int)hl_dyn_geti(r7->value,507777014/*pixelFmt*/,&t$_i32);
	r20 = NULL;
	sdl_gl_tex_image2d(r5,r18,r27,r22,r24,r31,r32,r33,r20);
	r4 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r36 = r4->outOfMemoryCheck;
	if( !r36 ) goto label$8f388d3_20_371;
	r25 = sdl_gl_get_error();
	r27 = 1285;
	if( r25 != r27 ) goto label$8f388d3_20_355;
	r36 = true;
	r3 = r36;
	goto label$8f388d3_20_371;
	label$8f388d3_20_355:
	r27 = 0;
	if( r25 == r27 ) goto label$8f388d3_20_371;
	r13 = (String)s$Failed_to_alloc_texture_;
	r11 = r1->format;
	r14 = Std_string(((vdynamic*)r11));
	r13 = String___add__(r13,r14);
	r14 = (String)s$_error_;
	r13 = String___add__(r13,r14);
	r26 = r25;
	r19 = &r26;
	r20 = hl_itos(r26,r19);
	r14 = String___alloc__(r20,r26);
	r13 = String___add__(r13,r14);
	r14 = (String)s$9371d7a;
	r13 = String___add__(r13,r14);
	hl_throw((vdynamic*)r13);
	label$8f388d3_20_371:
	goto label$8f388d3_20_219;
	label$8f388d3_20_372:
	h3d_impl_GlDriver_restoreBind(r0);
	if( !r3 ) goto label$8f388d3_20_379;
	if( r7 == NULL ) hl_null_access();
	r8 = hl_vfields(r7)[7] ? (*(vdynamic**)(hl_vfields(r7)[7])) : (vdynamic*)hl_dyn_getp(r7->value,116/*t*/,&t$nul_i32);
	sdl_gl_delete_texture(r8);
	r15 = NULL;
	return r15;
	label$8f388d3_20_379:
	return r7;
}

void h3d_impl_GlDriver_restoreBind(h3d__impl__GlDriver r0) {
	vvirtual *r4;
	hl__types__ArrayObj r1;
	vdynamic *r5, *r8;
	varray *r6;
	int r2, r3;
	r1 = r0->boundTextures;
	if( r1 == NULL ) hl_null_access();
	r2 = r0->lastActiveIndex;
	r3 = r1->length;
	if( ((unsigned)r2) < ((unsigned)r3) ) goto label$8f388d3_21_7;
	r4 = NULL;
	goto label$8f388d3_21_10;
	label$8f388d3_21_7:
	r6 = r1->array;
	r5 = ((vdynamic**)(r6 + 1))[r2];
	r4 = hl_to_virtual(&t$vrt_6ab1ef9,(vdynamic*)r5);
	label$8f388d3_21_10:
	if( r4 ) goto label$8f388d3_21_15;
	r2 = 3553;
	r8 = NULL;
	sdl_gl_bind_texture(r2,r8);
	goto label$8f388d3_21_19;
	label$8f388d3_21_15:
	if( r4 == NULL ) hl_null_access();
	r2 = hl_vfields(r4)[1] ? (*(int*)(hl_vfields(r4)[1])) : (int)hl_dyn_geti(r4->value,18282183/*bind*/,&t$_i32);
	r8 = hl_vfields(r4)[7] ? (*(vdynamic**)(hl_vfields(r4)[7])) : (vdynamic*)hl_dyn_getp(r4->value,116/*t*/,&t$nul_i32);
	sdl_gl_bind_texture(r2,r8);
	label$8f388d3_21_19:
	return;
}

vvirtual* h3d_impl_GlDriver_allocDepthBuffer(h3d__impl__GlDriver r0,h3d__mat__Texture r1) {
	String r10, r11;
	vvirtual *r4;
	venum *r9;
	double r7;
	vdynamic *r2, *r5;
	vbyte *r18;
	int r6, r8, r12, r13, r14, r15, r16, r17;
	r2 = sdl_gl_create_texture();
	r4 = hl_alloc_virtual(&t$vrt_6ab1ef9);
	if( hl_vfields(r4)[7] ) *(vdynamic**)(hl_vfields(r4)[7]) = (vdynamic*)r2; else hl_dyn_setp(r4->value,116/*t*/,&t$nul_i32,r2);
	if( r1 == NULL ) hl_null_access();
	r6 = r1->width;
	if( hl_vfields(r4)[8] ) *(int*)(hl_vfields(r4)[8]) = (int)r6; else hl_dyn_seti(r4->value,-362629759/*width*/,&t$_i32,r6);
	r6 = r1->height;
	if( hl_vfields(r4)[3] ) *(int*)(hl_vfields(r4)[3]) = (int)r6; else hl_dyn_seti(r4->value,38537191/*height*/,&t$_i32,r6);
	r6 = 6408;
	if( hl_vfields(r4)[4] ) *(int*)(hl_vfields(r4)[4]) = (int)r6; else hl_dyn_seti(r4->value,46889754/*internalFmt*/,&t$_i32,r6);
	r6 = 5121;
	if( hl_vfields(r4)[5] ) *(int*)(hl_vfields(r4)[5]) = (int)r6; else hl_dyn_seti(r4->value,507777014/*pixelFmt*/,&t$_i32,r6);
	r6 = -1;
	if( hl_vfields(r4)[2] ) *(int*)(hl_vfields(r4)[2]) = (int)r6; else hl_dyn_seti(r4->value,18283536/*bits*/,&t$_i32,r6);
	r6 = 3553;
	if( hl_vfields(r4)[1] ) *(int*)(hl_vfields(r4)[1]) = (int)r6; else hl_dyn_seti(r4->value,18282183/*bind*/,&t$_i32,r6);
	r6 = 0;
	r7 = (double)r6;
	if( hl_vfields(r4)[0] ) *(double*)(hl_vfields(r4)[0]) = (double)r7; else hl_dyn_setd(r4->value,18279299/*bias*/,r7);
	r6 = 0;
	if( hl_vfields(r4)[6] ) *(int*)(hl_vfields(r4)[6]) = (int)r6; else hl_dyn_seti(r4->value,43433820/*startMip*/,&t$_i32,r6);
	r6 = 6402;
	r9 = r1->format;
	if( r9 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r9);
	switch(r8) {
		default:
		case 0:
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		case 8:
		case 9:
		case 10:
		case 11:
		case 12:
		case 13:
		case 14:
		case 15:
		case 16:
		case 17:
		case 18:
		case 19:
		case 20:
		case 21:
		case 22:
			r10 = (String)s$Unsupported_depth_format_;
			r9 = r1->format;
			r11 = Std_string(((vdynamic*)r9));
			r10 = String___add__(r10,r11);
			hl_throw((vdynamic*)r10);
		case 23:
			r8 = 33189;
			if( hl_vfields(r4)[4] ) *(int*)(hl_vfields(r4)[4]) = (int)r8; else hl_dyn_seti(r4->value,46889754/*internalFmt*/,&t$_i32,r8);
			goto label$8f388d3_22_43;
		case 24:
			r8 = 6402;
			if( hl_vfields(r4)[4] ) *(int*)(hl_vfields(r4)[4]) = (int)r8; else hl_dyn_seti(r4->value,46889754/*internalFmt*/,&t$_i32,r8);
			goto label$8f388d3_22_43;
		case 25:
			r8 = 35056;
			if( hl_vfields(r4)[4] ) *(int*)(hl_vfields(r4)[4]) = (int)r8; else hl_dyn_seti(r4->value,46889754/*internalFmt*/,&t$_i32,r8);
			r8 = 34042;
			if( hl_vfields(r4)[5] ) *(int*)(hl_vfields(r4)[5]) = (int)r8; else hl_dyn_seti(r4->value,507777014/*pixelFmt*/,&t$_i32,r8);
			r8 = 34041;
			r6 = r8;
	}
	label$8f388d3_22_43:
	r8 = r0->frame;
	r8 = h3d_mat_Texture_set_lastFrame(r1,r8);
	r8 = r1->flags;
	r12 = -257;
	r8 = r8 & r12;
	r1->flags = r8;
	r8 = hl_vfields(r4)[1] ? (*(int*)(hl_vfields(r4)[1])) : (int)hl_dyn_geti(r4->value,18282183/*bind*/,&t$_i32);
	r5 = hl_vfields(r4)[7] ? (*(vdynamic**)(hl_vfields(r4)[7])) : (vdynamic*)hl_dyn_getp(r4->value,116/*t*/,&t$nul_i32);
	sdl_gl_bind_texture(r8,r5);
	r8 = hl_vfields(r4)[1] ? (*(int*)(hl_vfields(r4)[1])) : (int)hl_dyn_geti(r4->value,18282183/*bind*/,&t$_i32);
	r12 = 10241;
	r13 = 9728;
	sdl_gl_tex_parameteri(r8,r12,r13);
	r8 = hl_vfields(r4)[1] ? (*(int*)(hl_vfields(r4)[1])) : (int)hl_dyn_geti(r4->value,18282183/*bind*/,&t$_i32);
	r12 = 10240;
	r13 = 9728;
	sdl_gl_tex_parameteri(r8,r12,r13);
	r8 = hl_vfields(r4)[1] ? (*(int*)(hl_vfields(r4)[1])) : (int)hl_dyn_geti(r4->value,18282183/*bind*/,&t$_i32);
	r12 = 10242;
	r13 = 33071;
	sdl_gl_tex_parameteri(r8,r12,r13);
	r8 = hl_vfields(r4)[1] ? (*(int*)(hl_vfields(r4)[1])) : (int)hl_dyn_geti(r4->value,18282183/*bind*/,&t$_i32);
	r12 = 10243;
	r13 = 33071;
	sdl_gl_tex_parameteri(r8,r12,r13);
	r8 = hl_vfields(r4)[1] ? (*(int*)(hl_vfields(r4)[1])) : (int)hl_dyn_geti(r4->value,18282183/*bind*/,&t$_i32);
	r12 = 0;
	r13 = hl_vfields(r4)[4] ? (*(int*)(hl_vfields(r4)[4])) : (int)hl_dyn_geti(r4->value,46889754/*internalFmt*/,&t$_i32);
	r14 = hl_vfields(r4)[8] ? (*(int*)(hl_vfields(r4)[8])) : (int)hl_dyn_geti(r4->value,-362629759/*width*/,&t$_i32);
	r15 = hl_vfields(r4)[3] ? (*(int*)(hl_vfields(r4)[3])) : (int)hl_dyn_geti(r4->value,38537191/*height*/,&t$_i32);
	r16 = 0;
	r17 = hl_vfields(r4)[5] ? (*(int*)(hl_vfields(r4)[5])) : (int)hl_dyn_geti(r4->value,507777014/*pixelFmt*/,&t$_i32);
	r18 = NULL;
	sdl_gl_tex_image2d(r8,r12,r13,r14,r15,r16,r6,r17,r18);
	h3d_impl_GlDriver_restoreBind(r0);
	return r4;
}

void h3d_impl_GlDriver_disposeDepthBuffer(h3d__impl__GlDriver r0,h3d__mat__Texture r1) {
	vvirtual *r3;
	vdynamic *r4;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->_hx_t;
	if( !r3 ) goto label$8f388d3_23_13;
	r3 = r1->_hx_t;
	if( r3 == NULL ) hl_null_access();
	r4 = hl_vfields(r3)[7] ? (*(vdynamic**)(hl_vfields(r3)[7])) : (vdynamic*)hl_dyn_getp(r3->value,116/*t*/,&t$nul_i32);
	if( !r4 ) goto label$8f388d3_23_13;
	r3 = r1->_hx_t;
	if( r3 == NULL ) hl_null_access();
	r4 = hl_vfields(r3)[7] ? (*(vdynamic**)(hl_vfields(r3)[7])) : (vdynamic*)hl_dyn_getp(r3->value,116/*t*/,&t$nul_i32);
	sdl_gl_delete_texture(r4);
	r3 = NULL;
	r1->_hx_t = r3;
	label$8f388d3_23_13:
	return;
}

h3d__mat__Texture h3d_impl_GlDriver_getDefaultDepthBuffer(h3d__impl__GlDriver r0) {
	String r7;
	vvirtual *r8;
	hl__types__ArrayObj r5;
	venum *r6;
	int r3, r4;
	h3d__mat__Texture r2, r9;
	r2 = r0->defaultDepth;
	if( !r2 ) goto label$8f388d3_24_4;
	r2 = r0->defaultDepth;
	return r2;
	label$8f388d3_24_4:
	r2 = (h3d__mat__Texture)hl_alloc_obj(&t$h3d_mat_Texture);
	r3 = 0;
	r4 = 0;
	r5 = NULL;
	r6 = (venum*)g$hxd_PixelFormat_Depth24Stencil8;
	h3d_mat_Texture_new(r2,r3,r4,r5,r6);
	r0->defaultDepth = r2;
	r2 = r0->defaultDepth;
	if( r2 == NULL ) hl_null_access();
	r7 = (String)s$defaultDepthBuffer;
	r2->name = r7;
	r2 = r0->defaultDepth;
	if( r2 == NULL ) hl_null_access();
	r3 = r0->bufferWidth;
	r2->width = r3;
	r2 = r0->defaultDepth;
	if( r2 == NULL ) hl_null_access();
	r3 = r0->bufferHeight;
	r2->height = r3;
	r2 = r0->defaultDepth;
	if( r2 == NULL ) hl_null_access();
	r9 = r0->defaultDepth;
	r8 = h3d_impl_GlDriver_allocDepthBuffer(r0,r9);
	r2->_hx_t = r8;
	r2 = r0->defaultDepth;
	return r2;
}

vdynamic* h3d_impl_GlDriver_allocBuffer(h3d__impl__GlDriver r0,h3d__Buffer r1) {
	String r10;
	bool r3;
	hxd__BufferFormat r9;
	vdynamic *r6, *r7;
	h3d__impl__$GlDriver r4;
	int r5, r8, r11, r12;
	r4 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r3 = r4->outOfMemoryCheck;
	if( !r3 ) goto label$8f388d3_25_4;
	r5 = sdl_gl_get_error();
	label$8f388d3_25_4:
	r6 = sdl_gl_create_buffer();
	r5 = 34962;
	sdl_gl_bind_buffer(r5,r6);
	if( r1 == NULL ) hl_null_access();
	r5 = r1->vertices;
	r9 = r1->format;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->stride;
	r5 = r5 * r8;
	r8 = 0;
	if( r5 != r8 ) goto label$8f388d3_25_17;
	r10 = (String)s$assert;
	hl_throw((vdynamic*)r10);
	label$8f388d3_25_17:
	r5 = 34962;
	r8 = r1->vertices;
	r9 = r1->format;
	if( r9 == NULL ) hl_null_access();
	r11 = r9->strideBytes;
	r8 = r8 * r11;
	r11 = r1->flags;
	r12 = 1;
	r11 = r11 & r12;
	r12 = 0;
	if( r11 == r12 ) goto label$8f388d3_25_30;
	r11 = 35048;
	goto label$8f388d3_25_31;
	label$8f388d3_25_30:
	r11 = 35044;
	label$8f388d3_25_31:
	sdl_gl_buffer_data_size(r5,r8,r11);
	r4 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r3 = r4->outOfMemoryCheck;
	if( !r3 ) goto label$8f388d3_25_40;
	r5 = sdl_gl_get_error();
	r8 = 1285;
	if( r5 != r8 ) goto label$8f388d3_25_40;
	r3 = true;
	goto label$8f388d3_25_41;
	label$8f388d3_25_40:
	r3 = false;
	label$8f388d3_25_41:
	r5 = 34962;
	r7 = NULL;
	sdl_gl_bind_buffer(r5,r7);
	if( !r3 ) goto label$8f388d3_25_48;
	sdl_gl_delete_buffer(r6);
	r7 = NULL;
	return r7;
	label$8f388d3_25_48:
	return r6;
}

vvirtual* h3d_impl_GlDriver_allocIndexes(h3d__impl__GlDriver r0,int r1,bool r2) {
	vvirtual *r12;
	bool r4;
	vdynamic *r7, *r9;
	h3d__impl__$GlDriver r5;
	int r6, r8, r10, r11;
	r5 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r4 = r5->outOfMemoryCheck;
	if( !r4 ) goto label$8f388d3_26_4;
	r6 = sdl_gl_get_error();
	label$8f388d3_26_4:
	r7 = sdl_gl_create_buffer();
	if( !r2 ) goto label$8f388d3_26_8;
	r6 = 4;
	goto label$8f388d3_26_9;
	label$8f388d3_26_8:
	r6 = 2;
	label$8f388d3_26_9:
	r8 = 34963;
	sdl_gl_bind_buffer(r8,r7);
	r8 = 34963;
	r10 = r1 * r6;
	r11 = 35044;
	sdl_gl_buffer_data_size(r8,r10,r11);
	r5 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r4 = r5->outOfMemoryCheck;
	if( !r4 ) goto label$8f388d3_26_23;
	r8 = sdl_gl_get_error();
	r10 = 1285;
	if( r8 != r10 ) goto label$8f388d3_26_23;
	r4 = true;
	goto label$8f388d3_26_24;
	label$8f388d3_26_23:
	r4 = false;
	label$8f388d3_26_24:
	r8 = 34963;
	r9 = NULL;
	sdl_gl_bind_buffer(r8,r9);
	r12 = NULL;
	r0->curIndexBuffer = r12;
	if( !r4 ) goto label$8f388d3_26_33;
	sdl_gl_delete_buffer(r7);
	r12 = NULL;
	return r12;
	label$8f388d3_26_33:
	r12 = hl_alloc_virtual(&t$vrt_2ede348);
	if( hl_vfields(r12)[0] ) *(vdynamic**)(hl_vfields(r12)[0]) = (vdynamic*)r7; else hl_dyn_setp(r12->value,98/*b*/,&t$nul_i32,r7);
	if( hl_vfields(r12)[1] ) *(bool*)(hl_vfields(r12)[1]) = (bool)r2; else hl_dyn_seti(r12->value,96393235/*is32*/,&t$_bool,r2);
	return r12;
}

void h3d_impl_GlDriver_disposeTexture(h3d__impl__GlDriver r0,h3d__mat__Texture r1) {
	hl__types__ArrayObj r8;
	vvirtual *r2, *r4;
	vdynamic *r5, *r12;
	varray *r11;
	int r6, r7, r9, r10;
	if( r1 == NULL ) hl_null_access();
	r2 = r1->_hx_t;
	if( r2 ) goto label$8f388d3_27_4;
	return;
	label$8f388d3_27_4:
	r4 = NULL;
	r1->_hx_t = r4;
	r6 = 0;
	r8 = r0->boundTextures;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->length;
	label$8f388d3_27_10:
	if( r6 >= r7 ) goto label$8f388d3_27_33;
	r9 = r6;
	++r6;
	r8 = r0->boundTextures;
	if( r8 == NULL ) hl_null_access();
	r10 = r8->length;
	if( ((unsigned)r9) < ((unsigned)r10) ) goto label$8f388d3_27_20;
	r4 = NULL;
	goto label$8f388d3_27_23;
	label$8f388d3_27_20:
	r11 = r8->array;
	r5 = ((vdynamic**)(r11 + 1))[r9];
	r4 = hl_to_virtual(&t$vrt_6ab1ef9,(vdynamic*)r5);
	label$8f388d3_27_23:
	if( r4 != r2 && (!r4 || !r2 || !r4->value || !r2->value || r4->value != r2->value) ) goto label$8f388d3_27_32;
	r8 = r0->boundTextures;
	if( r8 == NULL ) hl_null_access();
	r4 = NULL;
	r10 = r8->length;
	if( ((unsigned)r9) < ((unsigned)r10) ) goto label$8f388d3_27_30;
	hl_types_ArrayObj___expand(r8,r9);
	label$8f388d3_27_30:
	r11 = r8->array;
	((vvirtual**)(r11 + 1))[r9] = r4;
	label$8f388d3_27_32:
	goto label$8f388d3_27_10;
	label$8f388d3_27_33:
	if( r2 == NULL ) hl_null_access();
	r12 = hl_vfields(r2)[7] ? (*(vdynamic**)(hl_vfields(r2)[7])) : (vdynamic*)hl_dyn_getp(r2->value,116/*t*/,&t$nul_i32);
	sdl_gl_delete_texture(r12);
	return;
}

void h3d_impl_GlDriver_disposeIndexes(h3d__impl__GlDriver r0,vvirtual* r1) {
	vdynamic *r3;
	if( r1 == NULL ) hl_null_access();
	r3 = hl_vfields(r1)[0] ? (*(vdynamic**)(hl_vfields(r1)[0])) : (vdynamic*)hl_dyn_getp(r1->value,98/*b*/,&t$nul_i32);
	sdl_gl_delete_buffer(r3);
	return;
}

void h3d_impl_GlDriver_disposeBuffer(h3d__impl__GlDriver r0,h3d__Buffer r1) {
	vdynamic *r3;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->vbuf;
	sdl_gl_delete_buffer(r3);
	return;
}

void h3d_impl_GlDriver_generateMipMaps(h3d__impl__GlDriver r0,h3d__mat__Texture r1) {
	vvirtual *r5;
	vdynamic *r4;
	int r2;
	r2 = h3d_impl_GlDriver_getBindType(r0,r1);
	if( r1 == NULL ) hl_null_access();
	r5 = r1->_hx_t;
	if( r5 == NULL ) hl_null_access();
	r4 = hl_vfields(r5)[7] ? (*(vdynamic**)(hl_vfields(r5)[7])) : (vdynamic*)hl_dyn_getp(r5->value,116/*t*/,&t$nul_i32);
	sdl_gl_bind_texture(r2,r4);
	sdl_gl_generate_mipmap(r2);
	h3d_impl_GlDriver_restoreBind(r0);
	return;
}

void h3d_impl_GlDriver_expandStream(h3d__impl__GlDriver r0,int r1) {
	vvirtual *r11;
	hl__types__ArrayObj r10;
	vbyte *r6, *r7, *r8;
	int r3, r4, r5, r9;
	sdl_gl_finish();
	r3 = r0->streamPos;
	r5 = 1;
	r4 = r1 >> r5;
	if( r4 >= r3 ) goto label$8f388d3_31_15;
	r4 = 16777216;
	if( r4 >= r1 ) goto label$8f388d3_31_15;
	r4 = r0->streamPos;
	r3 = r1 - r4;
	r1 = r3;
	r3 = 0;
	r0->streamPos = r3;
	r4 = r0->streamLen;
	if( r1 >= r4 ) goto label$8f388d3_31_15;
	return;
	label$8f388d3_31_15:
	r3 = r0->streamLen;
	r4 = 0;
	if( r3 != r4 ) goto label$8f388d3_31_20;
	r3 = 65536;
	goto label$8f388d3_31_21;
	label$8f388d3_31_20:
	r3 = r0->streamLen;
	label$8f388d3_31_21:
	if( r3 >= r1 ) goto label$8f388d3_31_29;
	r5 = 3;
	r4 = r3 * r5;
	r5 = 1;
	r4 = r4 >> r5;
	r3 = r4;
	goto label$8f388d3_31_21;
	label$8f388d3_31_29:
	r6 = hl_alloc_bytes(r3);
	r4 = r0->streamPos;
	r5 = 0;
	if( r5 >= r4 ) goto label$8f388d3_31_38;
	r4 = 0;
	r8 = r0->streamBytes;
	r5 = 0;
	r9 = r0->streamPos;
	hl_bytes_blit(r6,r4,r8,r5,r9);
	label$8f388d3_31_38:
	r0->streamLen = r3;
	r7 = r0->streamBytes;
	if( !r7 ) goto label$8f388d3_31_49;
	r10 = r0->streamKeep;
	if( r10 == NULL ) hl_null_access();
	r11 = hl_alloc_virtual(&t$vrt_140cb34);
	r4 = r0->frame;
	if( hl_vfields(r11)[1] ) *(int*)(hl_vfields(r11)[1]) = (int)r4; else hl_dyn_seti(r11->value,102/*f*/,&t$_i32,r4);
	r7 = r0->streamBytes;
	if( hl_vfields(r11)[0] ) *(vbyte**)(hl_vfields(r11)[0]) = (vbyte*)r7; else hl_dyn_setp(r11->value,98/*b*/,&t$_bytes,r7);
	r4 = hl_types_ArrayObj_push(r10,((vdynamic*)r11));
	label$8f388d3_31_49:
	r0->streamBytes = r6;
	return;
}

void h3d_impl_GlDriver_resetStream(h3d__impl__GlDriver r0) {
	vvirtual *r4;
	hl__types__ArrayObj r2;
	vdynamic *r5;
	varray *r6;
	int r1, r3, r7;
	r1 = 0;
	r0->streamPos = r1;
	label$8f388d3_32_2:
	r2 = r0->streamKeep;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->length;
	r3 = 0;
	if( r3 >= r1 ) goto label$8f388d3_32_29;
	r2 = r0->streamKeep;
	if( r2 == NULL ) hl_null_access();
	r1 = 0;
	r3 = r2->length;
	if( ((unsigned)r1) < ((unsigned)r3) ) goto label$8f388d3_32_15;
	r4 = NULL;
	goto label$8f388d3_32_18;
	label$8f388d3_32_15:
	r6 = r2->array;
	r5 = ((vdynamic**)(r6 + 1))[r1];
	r4 = hl_to_virtual(&t$vrt_140cb34,(vdynamic*)r5);
	label$8f388d3_32_18:
	if( r4 == NULL ) hl_null_access();
	r1 = hl_vfields(r4)[1] ? (*(int*)(hl_vfields(r4)[1])) : (int)hl_dyn_geti(r4->value,102/*f*/,&t$_i32);
	r3 = r0->frame;
	r7 = 1;
	r3 = r3 - r7;
	if( r1 >= r3 ) goto label$8f388d3_32_29;
	r2 = r0->streamKeep;
	if( r2 == NULL ) hl_null_access();
	r5 = hl_types_ArrayObj_shift(r2);
	r4 = hl_to_virtual(&t$vrt_140cb34,(vdynamic*)r5);
	goto label$8f388d3_32_2;
	label$8f388d3_32_29:
	return;
}

void h3d_impl_GlDriver_uploadTexturePixels(h3d__impl__GlDriver r0,h3d__mat__Texture r1,hxd__Pixels r2,int r3,int r4) {
	vvirtual *r14;
	venum *r15;
	haxe__io__Bytes r16;
	bool r5;
	hl__types__ArrayBytes_Int r9;
	haxe__io__BytesDataImpl r17;
	vdynamic *r13;
	h3d__impl__$GlDriver r10;
	vbyte *r11, *r24;
	int r6, r7, r12, r18, r19, r20, r21, r22, r23, r25, r26, r27, r28, r29, r30, r31, r32;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->flags;
	r7 = 2;
	r6 = r6 & r7;
	r7 = 0;
	if( r6 != r7 ) goto label$8f388d3_33_8;
	r5 = false;
	goto label$8f388d3_33_9;
	label$8f388d3_33_8:
	r5 = true;
	label$8f388d3_33_9:
	if( !r5 ) goto label$8f388d3_33_22;
	r10 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r9 = r10->CUBE_FACES;
	if( r9 == NULL ) hl_null_access();
	r7 = r9->length;
	if( ((unsigned)r4) < ((unsigned)r7) ) goto label$8f388d3_33_17;
	r6 = 0;
	goto label$8f388d3_33_21;
	label$8f388d3_33_17:
	r11 = r9->bytes;
	r7 = 2;
	r7 = r4 << r7;
	r6 = *(int*)(r11 + r7);
	label$8f388d3_33_21:
	goto label$8f388d3_33_30;
	label$8f388d3_33_22:
	r6 = r1->flags;
	r7 = 2048;
	r6 = r6 & r7;
	r7 = 0;
	if( r6 == r7 ) goto label$8f388d3_33_29;
	r6 = 35866;
	goto label$8f388d3_33_30;
	label$8f388d3_33_29:
	r6 = 3553;
	label$8f388d3_33_30:
	r7 = h3d_impl_GlDriver_getBindType(r0,r1);
	r14 = r1->_hx_t;
	if( r14 == NULL ) hl_null_access();
	r13 = hl_vfields(r14)[7] ? (*(vdynamic**)(hl_vfields(r14)[7])) : (vdynamic*)hl_dyn_getp(r14->value,116/*t*/,&t$nul_i32);
	sdl_gl_bind_texture(r7,r13);
	if( r2 == NULL ) hl_null_access();
	r15 = r1->format;
	hxd_Pixels_convert(r2,r15);
	r12 = r2->dataSize;
	r16 = r2->bytes;
	r17 = (haxe__io__BytesDataImpl)hl_alloc_obj(&t$haxe_io_BytesDataImpl);
	if( r16 == NULL ) hl_null_access();
	r11 = r16->b;
	r18 = r16->length;
	haxe_io_BytesDataImpl_new(r17,r11,r18);
	if( r17 ) goto label$8f388d3_33_48;
	r11 = NULL;
	goto label$8f388d3_33_49;
	label$8f388d3_33_48:
	r11 = r17->bytes;
	label$8f388d3_33_49:
	r18 = r2->offset;
	r19 = r0->streamPos;
	r19 = r19 + r12;
	r21 = 7;
	r20 = r19 + r21;
	r21 = -8;
	r20 = r20 & r21;
	r22 = r0->streamPos;
	r21 = r20 - r22;
	r23 = r0->streamLen;
	if( r23 >= r20 ) goto label$8f388d3_33_61;
	h3d_impl_GlDriver_expandStream(r0,r20);
	label$8f388d3_33_61:
	r24 = r0->streamBytes;
	r22 = r0->streamPos;
	hl_bytes_blit(r24,r22,r11,r18,r12);
	r24 = r0->streamBytes;
	r22 = r0->streamPos;
	r24 = hl_bytes_offset(r24,r22);
	r22 = r0->streamPos;
	r22 = r22 + r21;
	r0->streamPos = r22;
	r15 = r1->format;
	if( r15 == NULL ) hl_null_access();
	r22 = HL__ENUM_INDEX__(r15);
	r23 = 22;
	if( r22 != r23 ) goto label$8f388d3_33_98;
	r22 = r1->flags;
	r23 = 2048;
	r22 = r22 & r23;
	r23 = 0;
	if( r22 == r23 ) goto label$8f388d3_33_90;
	r25 = 0;
	r26 = 0;
	r28 = r2->width;
	r29 = r2->height;
	r30 = 1;
	r14 = r1->_hx_t;
	if( r14 == NULL ) hl_null_access();
	r31 = hl_vfields(r14)[4] ? (*(int*)(hl_vfields(r14)[4])) : (int)hl_dyn_geti(r14->value,46889754/*internalFmt*/,&t$_i32);
	sdl_gl_compressed_tex_sub_image3d(r6,r3,r25,r26,r4,r28,r29,r30,r31,r12,r24);
	goto label$8f388d3_33_97;
	label$8f388d3_33_90:
	r14 = r1->_hx_t;
	if( r14 == NULL ) hl_null_access();
	r25 = hl_vfields(r14)[4] ? (*(int*)(hl_vfields(r14)[4])) : (int)hl_dyn_geti(r14->value,46889754/*internalFmt*/,&t$_i32);
	r26 = r2->width;
	r27 = r2->height;
	r28 = 0;
	sdl_gl_compressed_tex_image2d(r6,r3,r25,r26,r27,r28,r12,r24);
	label$8f388d3_33_97:
	goto label$8f388d3_33_127;
	label$8f388d3_33_98:
	r22 = r1->flags;
	r23 = 2048;
	r22 = r22 & r23;
	r23 = 0;
	if( r22 == r23 ) goto label$8f388d3_33_115;
	r25 = 0;
	r26 = 0;
	r28 = r2->width;
	r29 = r2->height;
	r30 = 1;
	r14 = r1->_hx_t;
	r31 = h3d_impl_GlDriver_getChannels(r0,r14);
	r14 = r1->_hx_t;
	if( r14 == NULL ) hl_null_access();
	r32 = hl_vfields(r14)[5] ? (*(int*)(hl_vfields(r14)[5])) : (int)hl_dyn_geti(r14->value,507777014/*pixelFmt*/,&t$_i32);
	sdl_gl_tex_sub_image3d(r6,r3,r25,r26,r4,r28,r29,r30,r31,r32,r24);
	goto label$8f388d3_33_127;
	label$8f388d3_33_115:
	r14 = r1->_hx_t;
	if( r14 == NULL ) hl_null_access();
	r25 = hl_vfields(r14)[4] ? (*(int*)(hl_vfields(r14)[4])) : (int)hl_dyn_geti(r14->value,46889754/*internalFmt*/,&t$_i32);
	r26 = r2->width;
	r27 = r2->height;
	r28 = 0;
	r14 = r1->_hx_t;
	r29 = h3d_impl_GlDriver_getChannels(r0,r14);
	r14 = r1->_hx_t;
	if( r14 == NULL ) hl_null_access();
	r30 = hl_vfields(r14)[5] ? (*(int*)(hl_vfields(r14)[5])) : (int)hl_dyn_geti(r14->value,507777014/*pixelFmt*/,&t$_i32);
	sdl_gl_tex_image2d(r6,r3,r25,r26,r27,r28,r29,r30,r24);
	label$8f388d3_33_127:
	r22 = r1->flags;
	r23 = 256;
	r22 = r22 | r23;
	r1->flags = r22;
	h3d_impl_GlDriver_restoreBind(r0);
	return;
}

void h3d_impl_GlDriver_uploadBufferData(h3d__impl__GlDriver r0,h3d__Buffer r1,int r2,int r3,hl__types__ArrayBytes_hl_F32 r4,int r5) {
	hxd__BufferFormat r7;
	vdynamic *r10;
	vbyte *r11, *r17;
	int r6, r9, r12, r13, r14, r15, r16, r18, r19;
	if( r1 == NULL ) hl_null_access();
	r7 = r1->format;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->strideBytes;
	r9 = 34962;
	r10 = r1->vbuf;
	sdl_gl_bind_buffer(r9,r10);
	if( r4 == NULL ) hl_null_access();
	r11 = r4->bytes;
	r9 = r3 * r6;
	r12 = r0->streamPos;
	r12 = r12 + r9;
	r14 = 7;
	r13 = r12 + r14;
	r14 = -8;
	r13 = r13 & r14;
	r15 = r0->streamPos;
	r14 = r13 - r15;
	r16 = r0->streamLen;
	if( r16 >= r13 ) goto label$8f388d3_34_21;
	h3d_impl_GlDriver_expandStream(r0,r13);
	label$8f388d3_34_21:
	r17 = r0->streamBytes;
	r15 = r0->streamPos;
	r18 = 4;
	r16 = r5 * r18;
	hl_bytes_blit(r17,r15,r11,r16,r9);
	r17 = r0->streamBytes;
	r15 = r0->streamPos;
	r17 = hl_bytes_offset(r17,r15);
	r15 = r0->streamPos;
	r15 = r15 + r14;
	r0->streamPos = r15;
	r15 = 34962;
	r16 = r2 * r6;
	r19 = 4;
	r18 = r5 * r19;
	r19 = 0;
	r18 = r18 * r19;
	r19 = r3 * r6;
	sdl_gl_buffer_sub_data(r15,r16,r17,r18,r19);
	r15 = 34962;
	r10 = NULL;
	sdl_gl_bind_buffer(r15,r10);
	return;
}

void h3d_impl_GlDriver_uploadIndexBuffer(h3d__impl__GlDriver r0,vvirtual* r1,int r2,int r3,hl__types__ArrayBytes_hl_UI16 r4,int r5) {
	vvirtual *r8;
	bool r7;
	vdynamic *r11;
	vbyte *r12, *r18;
	int r6, r10, r13, r14, r15, r16, r17, r19, r20;
	if( r1 == NULL ) hl_null_access();
	r7 = hl_vfields(r1)[1] ? (*(bool*)(hl_vfields(r1)[1])) : (bool)hl_dyn_geti(r1->value,96393235/*is32*/,&t$_bool);
	if( !r7 ) goto label$8f388d3_35_5;
	r6 = 2;
	goto label$8f388d3_35_6;
	label$8f388d3_35_5:
	r6 = 1;
	label$8f388d3_35_6:
	r10 = 34963;
	r11 = hl_vfields(r1)[0] ? (*(vdynamic**)(hl_vfields(r1)[0])) : (vdynamic*)hl_dyn_getp(r1->value,98/*b*/,&t$nul_i32);
	sdl_gl_bind_buffer(r10,r11);
	if( r4 == NULL ) hl_null_access();
	r12 = r4->bytes;
	r10 = r3 << r6;
	r13 = r0->streamPos;
	r13 = r13 + r10;
	r15 = 7;
	r14 = r13 + r15;
	r15 = -8;
	r14 = r14 & r15;
	r16 = r0->streamPos;
	r15 = r14 - r16;
	r17 = r0->streamLen;
	if( r17 >= r14 ) goto label$8f388d3_35_23;
	h3d_impl_GlDriver_expandStream(r0,r14);
	label$8f388d3_35_23:
	r18 = r0->streamBytes;
	r16 = r0->streamPos;
	r17 = r5 << r6;
	hl_bytes_blit(r18,r16,r12,r17,r10);
	r18 = r0->streamBytes;
	r16 = r0->streamPos;
	r18 = hl_bytes_offset(r18,r16);
	r16 = r0->streamPos;
	r16 = r16 + r15;
	r0->streamPos = r16;
	r16 = 34963;
	r17 = r2 << r6;
	r19 = r5 << r6;
	r20 = 0;
	r19 = r19 * r20;
	r20 = r3 << r6;
	sdl_gl_buffer_sub_data(r16,r17,r18,r19,r20);
	r16 = 34963;
	r11 = NULL;
	sdl_gl_bind_buffer(r16,r11);
	r8 = NULL;
	r0->curIndexBuffer = r8;
	return;
}

void h3d_impl_GlDriver_uploadIndexBytes(h3d__impl__GlDriver r0,vvirtual* r1,int r2,int r3,haxe__io__Bytes r4,int r5) {
	vvirtual *r8;
	bool r7;
	haxe__io__BytesDataImpl r12;
	vdynamic *r11;
	vbyte *r13, *r19;
	int r6, r10, r14, r15, r16, r17, r18, r20, r21;
	if( r1 == NULL ) hl_null_access();
	r7 = hl_vfields(r1)[1] ? (*(bool*)(hl_vfields(r1)[1])) : (bool)hl_dyn_geti(r1->value,96393235/*is32*/,&t$_bool);
	if( !r7 ) goto label$8f388d3_36_5;
	r6 = 2;
	goto label$8f388d3_36_6;
	label$8f388d3_36_5:
	r6 = 1;
	label$8f388d3_36_6:
	r10 = 34963;
	r11 = hl_vfields(r1)[0] ? (*(vdynamic**)(hl_vfields(r1)[0])) : (vdynamic*)hl_dyn_getp(r1->value,98/*b*/,&t$nul_i32);
	sdl_gl_bind_buffer(r10,r11);
	r12 = (haxe__io__BytesDataImpl)hl_alloc_obj(&t$haxe_io_BytesDataImpl);
	if( r4 == NULL ) hl_null_access();
	r13 = r4->b;
	r10 = r4->length;
	haxe_io_BytesDataImpl_new(r12,r13,r10);
	if( r12 ) goto label$8f388d3_36_17;
	r13 = NULL;
	goto label$8f388d3_36_18;
	label$8f388d3_36_17:
	r13 = r12->bytes;
	label$8f388d3_36_18:
	r10 = r3 << r6;
	r14 = r0->streamPos;
	r14 = r14 + r10;
	r16 = 7;
	r15 = r14 + r16;
	r16 = -8;
	r15 = r15 & r16;
	r17 = r0->streamPos;
	r16 = r15 - r17;
	r18 = r0->streamLen;
	if( r18 >= r15 ) goto label$8f388d3_36_30;
	h3d_impl_GlDriver_expandStream(r0,r15);
	label$8f388d3_36_30:
	r19 = r0->streamBytes;
	r17 = r0->streamPos;
	r18 = r5 << r6;
	hl_bytes_blit(r19,r17,r13,r18,r10);
	r19 = r0->streamBytes;
	r17 = r0->streamPos;
	r19 = hl_bytes_offset(r19,r17);
	r17 = r0->streamPos;
	r17 = r17 + r16;
	r0->streamPos = r17;
	r17 = 34963;
	r18 = r2 << r6;
	r20 = r5 << r6;
	r21 = 0;
	r20 = r20 * r21;
	r21 = r3 << r6;
	sdl_gl_buffer_sub_data(r17,r18,r19,r20,r21);
	r17 = 34963;
	r11 = NULL;
	sdl_gl_bind_buffer(r17,r11);
	r8 = NULL;
	r0->curIndexBuffer = r8;
	return;
}

void h3d_impl_GlDriver_selectBuffer(h3d__impl__GlDriver r0,h3d__Buffer r1) {
	String r6;
	hl__types__ArrayObj r13;
	bool r22, r26;
	h3d__impl___GlDriver__CompiledProgram r5;
	hl__types__ArrayBytes_Int r10, r18;
	h3d__impl___GlDriver__CompiledAttribute r16;
	hxd__BufferFormat r9, r11;
	h3d__Buffer r3;
	vdynamic *r4, *r8;
	vbyte *r21;
	varray *r17;
	int r7, r12, r14, r15, r19, r20, r23, r24, r25, r27, r28, r29, r30;
	r3 = r0->curBuffer;
	if( r1 != r3 ) goto label$8f388d3_37_3;
	return;
	label$8f388d3_37_3:
	r5 = r0->curShader;
	if( r5 ) goto label$8f388d3_37_7;
	r6 = (String)s$No_shader_selected;
	hl_throw((vdynamic*)r6);
	label$8f388d3_37_7:
	r7 = 34962;
	if( r1 == NULL ) hl_null_access();
	r8 = r1->vbuf;
	sdl_gl_bind_buffer(r7,r8);
	r0->curBuffer = r1;
	r9 = r1->format;
	if( r9 == NULL ) hl_null_access();
	r7 = r9->strideBytes;
	r9 = r1->format;
	if( r9 == NULL ) hl_null_access();
	r5 = r0->curShader;
	if( r5 == NULL ) hl_null_access();
	r11 = r5->format;
	r10 = hxd_BufferFormat_resolveMapping(r9,r11);
	r12 = 0;
	r5 = r0->curShader;
	if( r5 == NULL ) hl_null_access();
	r13 = r5->attribs;
	label$8f388d3_37_25:
	if( r13 == NULL ) hl_null_access();
	r15 = r13->length;
	if( r12 >= r15 ) goto label$8f388d3_37_101;
	r15 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r15) ) goto label$8f388d3_37_33;
	r16 = NULL;
	goto label$8f388d3_37_36;
	label$8f388d3_37_33:
	r17 = r13->array;
	r4 = ((vdynamic**)(r17 + 1))[r12];
	r16 = (h3d__impl___GlDriver__CompiledAttribute)r4;
	label$8f388d3_37_36:
	r14 = r12;
	++r12;
	if( r10 == NULL ) hl_null_access();
	r20 = r10->length;
	if( ((unsigned)r14) < ((unsigned)r20) ) goto label$8f388d3_37_43;
	r19 = 0;
	goto label$8f388d3_37_47;
	label$8f388d3_37_43:
	r21 = r10->bytes;
	r20 = 2;
	r20 = r14 << r20;
	r19 = *(int*)(r21 + r20);
	label$8f388d3_37_47:
	r22 = false;
	if( r16 == NULL ) hl_null_access();
	r20 = r16->index;
	r23 = r16->size;
	r25 = 7;
	r24 = r19 & r25;
	switch(r24) {
		default:
			goto label$8f388d3_37_70;
		case 0:
			r25 = r16->type;
			r24 = r25;
			goto label$8f388d3_37_70;
		case 1:
			r25 = 5131;
			r24 = r25;
			goto label$8f388d3_37_70;
		case 2:
			r26 = true;
			r22 = r26;
			r25 = 5121;
			r24 = r25;
			goto label$8f388d3_37_70;
		case 3:
			r26 = true;
			r22 = r26;
			r25 = 5120;
			r24 = r25;
	}
	label$8f388d3_37_70:
	r30 = 16;
	r29 = r19 >> r30;
	sdl_gl_vertex_attrib_pointer(r20,r23,r24,r22,r7,r29);
	r18 = r0->currentDivisor;
	if( r18 == NULL ) hl_null_access();
	r25 = r16->index;
	r27 = r18->length;
	if( ((unsigned)r25) < ((unsigned)r27) ) goto label$8f388d3_37_80;
	r25 = 0;
	goto label$8f388d3_37_84;
	label$8f388d3_37_80:
	r21 = r18->bytes;
	r27 = 2;
	r27 = r25 << r27;
	r25 = *(int*)(r21 + r27);
	label$8f388d3_37_84:
	r27 = r16->divisor;
	if( r25 == r27 ) goto label$8f388d3_37_100;
	r18 = r0->currentDivisor;
	if( r18 == NULL ) hl_null_access();
	r25 = r16->index;
	r27 = r16->divisor;
	r28 = r18->length;
	if( ((unsigned)r25) < ((unsigned)r28) ) goto label$8f388d3_37_93;
	hl_types_ArrayBytes_Int___expand(r18,r25);
	label$8f388d3_37_93:
	r21 = r18->bytes;
	r28 = 2;
	r28 = r25 << r28;
	*(int*)(r21 + r28) = r27;
	r25 = r16->index;
	r27 = r16->divisor;
	sdl_gl_vertex_attrib_divisor(r25,r27);
	label$8f388d3_37_100:
	goto label$8f388d3_37_25;
	label$8f388d3_37_101:
	return;
}

void h3d_impl_GlDriver_selectMultiBuffers(h3d__impl__GlDriver r0,hxd__MultiFormat r1,hl__types__ArrayObj r2) {
	hl__types__ArrayObj r6;
	bool r24, r27;
	h3d__impl___GlDriver__CompiledProgram r4;
	hl__types__ArrayBytes_Int r10, r13, r16;
	h3d__impl___GlDriver__CompiledAttribute r15;
	hxd__BufferFormat r3, r8;
	h3d__Buffer r21, r22;
	vdynamic *r11, *r23;
	vbyte *r19;
	varray *r12;
	int r7, r9, r14, r17, r18, r20, r25, r26, r28, r29, r30, r31, r32;
	r4 = r0->curShader;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->format;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->mappings;
	if( r6 == NULL ) hl_null_access();
	if( r3 == NULL ) hl_null_access();
	r7 = r3->uid;
	r9 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$8f388d3_38_12;
	r10 = NULL;
	goto label$8f388d3_38_15;
	label$8f388d3_38_12:
	r12 = r6->array;
	r11 = ((vdynamic**)(r12 + 1))[r7];
	r10 = (hl__types__ArrayBytes_Int)hl_dyn_castp(&r11,&t$_dyn,&t$hl_types_ArrayBytes_Int);
	label$8f388d3_38_15:
	if( r10 ) goto label$8f388d3_38_18;
	r13 = hxd_MultiFormat_makeMapping(r1,r3);
	r10 = r13;
	label$8f388d3_38_18:
	r13 = r10;
	r7 = 0;
	r4 = r0->curShader;
	if( r4 == NULL ) hl_null_access();
	r6 = r4->attribs;
	label$8f388d3_38_23:
	if( r6 == NULL ) hl_null_access();
	r14 = r6->length;
	if( r7 >= r14 ) goto label$8f388d3_38_122;
	r14 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r14) ) goto label$8f388d3_38_31;
	r15 = NULL;
	goto label$8f388d3_38_34;
	label$8f388d3_38_31:
	r12 = r6->array;
	r11 = ((vdynamic**)(r12 + 1))[r7];
	r15 = (h3d__impl___GlDriver__CompiledAttribute)r11;
	label$8f388d3_38_34:
	r9 = r7;
	++r7;
	if( r13 == NULL ) hl_null_access();
	r18 = r13->length;
	if( ((unsigned)r9) < ((unsigned)r18) ) goto label$8f388d3_38_41;
	r17 = 0;
	goto label$8f388d3_38_45;
	label$8f388d3_38_41:
	r19 = r13->bytes;
	r18 = 2;
	r18 = r9 << r18;
	r17 = *(int*)(r19 + r18);
	label$8f388d3_38_45:
	if( r2 == NULL ) hl_null_access();
	r20 = 3;
	r18 = r17 >> r20;
	r20 = 255;
	r18 = r18 & r20;
	r20 = r2->length;
	if( ((unsigned)r18) < ((unsigned)r20) ) goto label$8f388d3_38_54;
	r21 = NULL;
	goto label$8f388d3_38_57;
	label$8f388d3_38_54:
	r12 = r2->array;
	r11 = ((vdynamic**)(r12 + 1))[r18];
	r21 = (h3d__Buffer)r11;
	label$8f388d3_38_57:
	r22 = r0->curBuffer;
	if( r22 == r21 ) goto label$8f388d3_38_64;
	r18 = 34962;
	if( r21 == NULL ) hl_null_access();
	r23 = r21->vbuf;
	sdl_gl_bind_buffer(r18,r23);
	r0->curBuffer = r21;
	label$8f388d3_38_64:
	r24 = false;
	if( r15 == NULL ) hl_null_access();
	r18 = r15->index;
	r20 = r15->size;
	r26 = 7;
	r25 = r17 & r26;
	switch(r25) {
		default:
			goto label$8f388d3_38_87;
		case 0:
			r26 = r15->type;
			r25 = r26;
			goto label$8f388d3_38_87;
		case 1:
			r26 = 5131;
			r25 = r26;
			goto label$8f388d3_38_87;
		case 2:
			r27 = true;
			r24 = r27;
			r26 = 5121;
			r25 = r26;
			goto label$8f388d3_38_87;
		case 3:
			r27 = true;
			r24 = r27;
			r26 = 5120;
			r25 = r26;
	}
	label$8f388d3_38_87:
	if( r21 == NULL ) hl_null_access();
	r8 = r21->format;
	if( r8 == NULL ) hl_null_access();
	r30 = r8->strideBytes;
	r32 = 16;
	r31 = r17 >> r32;
	sdl_gl_vertex_attrib_pointer(r18,r20,r25,r24,r30,r31);
	r16 = r0->currentDivisor;
	if( r16 == NULL ) hl_null_access();
	r26 = r15->index;
	r28 = r16->length;
	if( ((unsigned)r26) < ((unsigned)r28) ) goto label$8f388d3_38_101;
	r26 = 0;
	goto label$8f388d3_38_105;
	label$8f388d3_38_101:
	r19 = r16->bytes;
	r28 = 2;
	r28 = r26 << r28;
	r26 = *(int*)(r19 + r28);
	label$8f388d3_38_105:
	r28 = r15->divisor;
	if( r26 == r28 ) goto label$8f388d3_38_121;
	r16 = r0->currentDivisor;
	if( r16 == NULL ) hl_null_access();
	r26 = r15->index;
	r28 = r15->divisor;
	r29 = r16->length;
	if( ((unsigned)r26) < ((unsigned)r29) ) goto label$8f388d3_38_114;
	hl_types_ArrayBytes_Int___expand(r16,r26);
	label$8f388d3_38_114:
	r19 = r16->bytes;
	r29 = 2;
	r29 = r26 << r29;
	*(int*)(r19 + r29) = r28;
	r26 = r15->index;
	r28 = r15->divisor;
	sdl_gl_vertex_attrib_divisor(r26,r28);
	label$8f388d3_38_121:
	goto label$8f388d3_38_23;
	label$8f388d3_38_122:
	return;
}

void h3d_impl_GlDriver_draw(h3d__impl__GlDriver r0,vvirtual* r1,int r2,int r3) {
	vvirtual *r5;
	bool r8;
	vdynamic *r7;
	int r6, r9, r10, r11, r12;
	r5 = r0->curIndexBuffer;
	if( r1 == r5 || (r1 && r5 && r1->value && r5->value && r1->value == r5->value) ) goto label$8f388d3_39_7;
	r0->curIndexBuffer = r1;
	r6 = 34963;
	if( r1 == NULL ) hl_null_access();
	r7 = hl_vfields(r1)[0] ? (*(vdynamic**)(hl_vfields(r1)[0])) : (vdynamic*)hl_dyn_getp(r1->value,98/*b*/,&t$nul_i32);
	sdl_gl_bind_buffer(r6,r7);
	label$8f388d3_39_7:
	if( r1 == NULL ) hl_null_access();
	r8 = hl_vfields(r1)[1] ? (*(bool*)(hl_vfields(r1)[1])) : (bool)hl_dyn_geti(r1->value,96393235/*is32*/,&t$_bool);
	if( !r8 ) goto label$8f388d3_39_18;
	r6 = r0->drawMode;
	r10 = 3;
	r9 = r3 * r10;
	r10 = 5125;
	r12 = 4;
	r11 = r2 * r12;
	sdl_gl_draw_elements(r6,r9,r10,r11);
	goto label$8f388d3_39_25;
	label$8f388d3_39_18:
	r6 = r0->drawMode;
	r10 = 3;
	r9 = r3 * r10;
	r10 = 5123;
	r12 = 2;
	r11 = r2 * r12;
	sdl_gl_draw_elements(r6,r9,r10,r11);
	label$8f388d3_39_25:
	return;
}

void h3d_impl_GlDriver_drawInstanced(h3d__impl__GlDriver r0,vvirtual* r1,h3d__impl__InstanceBuffer r2) {
	vvirtual *r4;
	bool r7;
	hl__types__ArrayBytes_Int r15;
	double r16, r17;
	vdynamic *r6, *r10;
	vbyte *r12;
	int r5, r8, r9, r11, r13, r14, r18, r19, r20, r21, r22, r23;
	r4 = r0->curIndexBuffer;
	if( r1 == r4 || (r1 && r4 && r1->value && r4->value && r1->value == r4->value) ) goto label$8f388d3_40_7;
	r0->curIndexBuffer = r1;
	r5 = 34963;
	if( r1 == NULL ) hl_null_access();
	r6 = hl_vfields(r1)[0] ? (*(vdynamic**)(hl_vfields(r1)[0])) : (vdynamic*)hl_dyn_getp(r1->value,98/*b*/,&t$nul_i32);
	sdl_gl_bind_buffer(r5,r6);
	label$8f388d3_40_7:
	if( r1 == NULL ) hl_null_access();
	r7 = hl_vfields(r1)[1] ? (*(bool*)(hl_vfields(r1)[1])) : (bool)hl_dyn_geti(r1->value,96393235/*is32*/,&t$_bool);
	if( !r7 ) goto label$8f388d3_40_15;
	r8 = 5125;
	r5 = r8;
	r9 = 4;
	r8 = r9;
	goto label$8f388d3_40_19;
	label$8f388d3_40_15:
	r9 = 5123;
	r5 = r9;
	r9 = 2;
	r8 = r9;
	label$8f388d3_40_19:
	r7 = r0->hasMultiIndirect;
	if( !r7 ) goto label$8f388d3_40_37;
	if( r2 == NULL ) hl_null_access();
	r10 = r2->data;
	if( !r10 ) goto label$8f388d3_40_37;
	r9 = 36671;
	r10 = r2->data;
	r6 = (vdynamic*)hl_dyn_castp(&r10,&t$_dyn,&t$nul_i32);
	sdl_gl_bind_buffer(r9,r6);
	r9 = r0->drawMode;
	r12 = NULL;
	r13 = r2->commandCount;
	r14 = 0;
	sdl_gl_multi_draw_elements_indirect(r9,r5,r12,r13,r14);
	r9 = 36671;
	r6 = NULL;
	sdl_gl_bind_buffer(r9,r6);
	return;
	label$8f388d3_40_37:
	if( r2 == NULL ) hl_null_access();
	r10 = r2->data;
	r15 = (hl__types__ArrayBytes_Int)hl_dyn_castp(&r10,&t$_dyn,&t$hl_types_ArrayBytes_Int);
	if( !r15 ) goto label$8f388d3_40_88;
	r9 = 0;
	r11 = 0;
	if( r15 == NULL ) hl_null_access();
	r13 = r15->length;
	r16 = (double)r13;
	r17 = 3.;
	r16 = r16 / r17;
	r13 = (int)r16;
	label$8f388d3_40_49:
	if( r11 >= r13 ) goto label$8f388d3_40_87;
	++r11;
	r18 = r0->drawMode;
	if( r15 == NULL ) hl_null_access();
	r19 = r9;
	++r9;
	r20 = r15->length;
	if( ((unsigned)r19) < ((unsigned)r20) ) goto label$8f388d3_40_60;
	r19 = 0;
	goto label$8f388d3_40_64;
	label$8f388d3_40_60:
	r12 = r15->bytes;
	r20 = 2;
	r20 = r19 << r20;
	r19 = *(int*)(r12 + r20);
	label$8f388d3_40_64:
	r21 = r9;
	++r9;
	r22 = r15->length;
	if( ((unsigned)r21) < ((unsigned)r22) ) goto label$8f388d3_40_70;
	r21 = 0;
	goto label$8f388d3_40_74;
	label$8f388d3_40_70:
	r12 = r15->bytes;
	r22 = 2;
	r22 = r21 << r22;
	r21 = *(int*)(r12 + r22);
	label$8f388d3_40_74:
	r21 = r21 * r8;
	r22 = r9;
	++r9;
	r23 = r15->length;
	if( ((unsigned)r22) < ((unsigned)r23) ) goto label$8f388d3_40_81;
	r22 = 0;
	goto label$8f388d3_40_85;
	label$8f388d3_40_81:
	r12 = r15->bytes;
	r23 = 2;
	r23 = r22 << r23;
	r22 = *(int*)(r12 + r23);
	label$8f388d3_40_85:
	sdl_gl_draw_elements_instanced(r18,r19,r5,r21,r22);
	goto label$8f388d3_40_49;
	label$8f388d3_40_87:
	goto label$8f388d3_40_94;
	label$8f388d3_40_88:
	r9 = r0->drawMode;
	r11 = r2->indexCount;
	r14 = r2->startIndex;
	r14 = r14 * r8;
	r18 = r2->commandCount;
	sdl_gl_draw_elements_instanced(r9,r11,r5,r14,r18);
	label$8f388d3_40_94:
	return;
}

void h3d_impl_GlDriver_end(h3d__impl__GlDriver r0) {
	return;
}

void h3d_impl_GlDriver_present(h3d__impl__GlDriver r0) {
	hxd__$Window r4;
	sdl__Window r2;
	hxd__Window r3;
	r4 = (hxd__$Window)g$_hxd_Window;
	r3 = r4->inst;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->window;
	if( r2 == NULL ) hl_null_access();
	sdl_Window_present(r2);
	return;
}

bool h3d_impl_GlDriver_isDisposed(h3d__impl__GlDriver r0) {
	bool r1;
	r1 = sdl_gl_is_context_lost();
	return r1;
}

void h3d_impl_GlDriver_setRenderZone(h3d__impl__GlDriver r0,int r1,int r2,int r3,int r4) {
	h3d__mat__Texture r8;
	int r6, r7;
	r7 = 0;
	if( r1 != r7 ) goto label$8f388d3_44_11;
	r7 = 0;
	if( r2 != r7 ) goto label$8f388d3_44_11;
	r7 = 0;
	if( r3 >= r7 ) goto label$8f388d3_44_11;
	r7 = 0;
	if( r4 >= r7 ) goto label$8f388d3_44_11;
	r6 = 3089;
	sdl_gl_disable(r6);
	goto label$8f388d3_44_20;
	label$8f388d3_44_11:
	r6 = 3089;
	sdl_gl_enable(r6);
	r8 = r0->curTarget;
	if( r8 ) goto label$8f388d3_44_19;
	r6 = r0->bufferHeight;
	r7 = r2 + r4;
	r6 = r6 - r7;
	r2 = r6;
	label$8f388d3_44_19:
	sdl_gl_scissor(r1,r2,r3,r4);
	label$8f388d3_44_20:
	return;
}

void h3d_impl_GlDriver_setDrawBuffers(h3d__impl__GlDriver r0,int r1) {
	h3d__impl__$GlDriver r4;
	vbyte *r3;
	r4 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r3 = r4->CBUFFERS;
	sdl_gl_draw_buffers(r1,r3);
	return;
}

void h3d_impl_GlDriver_unbindTargets(h3d__impl__GlDriver r0) {
	hl__types__ArrayObj r8;
	vdynamic *r6;
	varray *r9;
	int r3, r4, r5, r7;
	h3d__mat__Texture r2;
	r2 = r0->curTarget;
	if( !r2 ) goto label$8f388d3_46_31;
	r3 = r0->numTargets;
	r4 = 1;
	if( r4 >= r3 ) goto label$8f388d3_46_31;
	label$8f388d3_46_5:
	r3 = r0->numTargets;
	r4 = 1;
	if( r4 >= r3 ) goto label$8f388d3_46_29;
	r3 = 36160;
	r4 = 36064;
	r5 = r0->numTargets;
	--r5;
	r0->numTargets = r5;
	r4 = r4 + r5;
	r5 = 3553;
	r6 = NULL;
	r7 = 0;
	sdl_gl_framebuffer_texture2d(r3,r4,r5,r6,r7);
	r8 = r0->curTargets;
	if( r8 == NULL ) hl_null_access();
	r3 = r0->numTargets;
	r2 = NULL;
	r4 = r8->length;
	if( ((unsigned)r3) < ((unsigned)r4) ) goto label$8f388d3_46_26;
	hl_types_ArrayObj___expand(r8,r3);
	label$8f388d3_46_26:
	r9 = r8->array;
	((h3d__mat__Texture*)(r9 + 1))[r3] = r2;
	goto label$8f388d3_46_5;
	label$8f388d3_46_29:
	r3 = 1;
	h3d_impl_GlDriver_setDrawBuffers(r0,r3);
	label$8f388d3_46_31:
	return;
}

void h3d_impl_GlDriver_setRenderTarget(h3d__impl__GlDriver r0,h3d__mat__Texture r1,int* r2,int* r3,venum* r4) {
	String r15;
	hl__types__ArrayObj r28;
	vvirtual *r19;
	venum *r7, *r23, *r25, *r26;
	bool r24;
	hl__types__ArrayBytes_Int r20;
	h3d__Vector4Impl r31;
	double r17;
	h3d__impl__$GlDriver r21;
	vdynamic *r11, *r16, *r18;
	varray *r30;
	vbyte *r22;
	h3d__mat__Texture r9;
	int r5, r6, r10, r12, r13, r14, r27, r29;
	if( r2 ) goto label$8f388d3_47_3;
	r5 = 0;
	goto label$8f388d3_47_4;
	label$8f388d3_47_3:
	r5 = *r2;
	label$8f388d3_47_4:
	if( r3 ) goto label$8f388d3_47_7;
	r6 = 0;
	goto label$8f388d3_47_8;
	label$8f388d3_47_7:
	r6 = *r3;
	label$8f388d3_47_8:
	if( r4 ) goto label$8f388d3_47_11;
	r7 = (venum*)g$h3d_DepthBinding_ReadWrite;
	r4 = r7;
	label$8f388d3_47_11:
	h3d_impl_GlDriver_unbindTargets(r0);
	r0->curTarget = r1;
	if( r1 ) goto label$8f388d3_47_23;
	r10 = 36160;
	r11 = NULL;
	sdl_gl_bind_framebuffer(r10,r11);
	r10 = 0;
	r12 = 0;
	r13 = r0->bufferWidth;
	r14 = r0->bufferHeight;
	sdl_gl_viewport(r10,r12,r13,r14);
	return;
	label$8f388d3_47_23:
	if( r1 == NULL ) hl_null_access();
	r9 = r1->depthBuffer;
	if( !r9 ) goto label$8f388d3_47_38;
	r9 = r1->depthBuffer;
	if( r9 == NULL ) hl_null_access();
	r10 = r9->width;
	r12 = r1->width;
	if( r10 != r12 ) goto label$8f388d3_47_36;
	r9 = r1->depthBuffer;
	if( r9 == NULL ) hl_null_access();
	r10 = r9->height;
	r12 = r1->height;
	if( r10 == r12 ) goto label$8f388d3_47_38;
	label$8f388d3_47_36:
	r15 = (String)s$001f888;
	hl_throw((vdynamic*)r15);
	label$8f388d3_47_38:
	r12 = 0;
	if( r12 >= r6 ) goto label$8f388d3_47_47;
	r16 = r0->glES;
	r10 = 1;
	r17 = (double)r10;
	r18 = hl_alloc_dynamic(&t$_f64);
	r18->v.d = r17;
	if( r16 != r18 && (!r16 || !r18 || (r16->v.d != r18->v.d)) ) goto label$8f388d3_47_47;
	r15 = (String)s$d24471f;
	hl_throw((vdynamic*)r15);
	label$8f388d3_47_47:
	r19 = r1->_hx_t;
	if( r19 ) goto label$8f388d3_47_50;
	h3d_mat_Texture_alloc(r1);
	label$8f388d3_47_50:
	r10 = r1->flags;
	r12 = 4;
	r10 = r10 & r12;
	r12 = 0;
	if( r10 == r12 ) goto label$8f388d3_47_67;
	r10 = r1->flags;
	r12 = 256;
	r10 = r10 & r12;
	r12 = 0;
	if( r10 != r12 ) goto label$8f388d3_47_67;
	r10 = h3d_impl_GlDriver_getBindType(r0,r1);
	r19 = r1->_hx_t;
	if( r19 == NULL ) hl_null_access();
	r11 = hl_vfields(r19)[7] ? (*(vdynamic**)(hl_vfields(r19)[7])) : (vdynamic*)hl_dyn_getp(r19->value,116/*t*/,&t$nul_i32);
	sdl_gl_bind_texture(r10,r11);
	sdl_gl_generate_mipmap(r10);
	h3d_impl_GlDriver_restoreBind(r0);
	label$8f388d3_47_67:
	r10 = r0->frame;
	r10 = h3d_mat_Texture_set_lastFrame(r1,r10);
	r0->curTargetLayer = r5;
	r0->curTargetMip = r6;
	r10 = 36160;
	r11 = r0->commonFB;
	sdl_gl_bind_framebuffer(r10,r11);
	r10 = r1->flags;
	r12 = 2048;
	r10 = r10 & r12;
	r12 = 0;
	if( r10 == r12 ) goto label$8f388d3_47_86;
	r10 = 36160;
	r12 = 36064;
	r19 = r1->_hx_t;
	if( r19 == NULL ) hl_null_access();
	r11 = hl_vfields(r19)[7] ? (*(vdynamic**)(hl_vfields(r19)[7])) : (vdynamic*)hl_dyn_getp(r19->value,116/*t*/,&t$nul_i32);
	sdl_gl_framebuffer_texture_layer(r10,r12,r11,r6,r5);
	goto label$8f388d3_47_110;
	label$8f388d3_47_86:
	r10 = 36160;
	r12 = 36064;
	r13 = r1->flags;
	r14 = 2;
	r13 = r13 & r14;
	r14 = 0;
	if( r13 == r14 ) goto label$8f388d3_47_105;
	r21 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r20 = r21->CUBE_FACES;
	if( r20 == NULL ) hl_null_access();
	r14 = r20->length;
	if( ((unsigned)r5) < ((unsigned)r14) ) goto label$8f388d3_47_100;
	r13 = 0;
	goto label$8f388d3_47_104;
	label$8f388d3_47_100:
	r22 = r20->bytes;
	r14 = 2;
	r14 = r5 << r14;
	r13 = *(int*)(r22 + r14);
	label$8f388d3_47_104:
	goto label$8f388d3_47_106;
	label$8f388d3_47_105:
	r13 = 3553;
	label$8f388d3_47_106:
	r19 = r1->_hx_t;
	if( r19 == NULL ) hl_null_access();
	r11 = hl_vfields(r19)[7] ? (*(vdynamic**)(hl_vfields(r19)[7])) : (vdynamic*)hl_dyn_getp(r19->value,116/*t*/,&t$nul_i32);
	sdl_gl_framebuffer_texture2d(r10,r12,r13,r11,r6);
	label$8f388d3_47_110:
	r9 = r1->depthBuffer;
	if( !r9 ) goto label$8f388d3_47_167;
	r23 = (venum*)g$h3d_DepthBinding_NotBound;
	if( r4 == r23 ) goto label$8f388d3_47_167;
	r9 = r1->depthBuffer;
	if( r9 == NULL ) hl_null_access();
	r24 = h3d_mat_Texture_hasStencil(r9);
	if( !r24 ) goto label$8f388d3_47_134;
	r9 = r1->depthBuffer;
	if( r9 == NULL ) hl_null_access();
	r25 = r9->format;
	r26 = (venum*)g$hxd_PixelFormat_Depth24Stencil8;
	if( r25 != r26 ) goto label$8f388d3_47_134;
	r10 = 36160;
	r12 = 33306;
	r13 = 3553;
	r9 = r1->depthBuffer;
	if( r9 == NULL ) hl_null_access();
	r19 = r9->_hx_t;
	if( r19 == NULL ) hl_null_access();
	r11 = hl_vfields(r19)[7] ? (*(vdynamic**)(hl_vfields(r19)[7])) : (vdynamic*)hl_dyn_getp(r19->value,116/*t*/,&t$nul_i32);
	r14 = 0;
	sdl_gl_framebuffer_texture2d(r10,r12,r13,r11,r14);
	goto label$8f388d3_47_166;
	label$8f388d3_47_134:
	r10 = 36160;
	r12 = 33306;
	r13 = 3553;
	r11 = NULL;
	r14 = 0;
	sdl_gl_framebuffer_texture2d(r10,r12,r13,r11,r14);
	r10 = 36160;
	r12 = 36096;
	r13 = 3553;
	r9 = r1->depthBuffer;
	if( r9 == NULL ) hl_null_access();
	r19 = r9->_hx_t;
	if( r19 == NULL ) hl_null_access();
	r11 = hl_vfields(r19)[7] ? (*(vdynamic**)(hl_vfields(r19)[7])) : (vdynamic*)hl_dyn_getp(r19->value,116/*t*/,&t$nul_i32);
	r14 = 0;
	sdl_gl_framebuffer_texture2d(r10,r12,r13,r11,r14);
	r10 = 36160;
	r12 = 36128;
	r13 = 3553;
	r9 = r1->depthBuffer;
	if( r9 == NULL ) hl_null_access();
	r24 = h3d_mat_Texture_hasStencil(r9);
	if( !r24 ) goto label$8f388d3_47_163;
	r9 = r1->depthBuffer;
	if( r9 == NULL ) hl_null_access();
	r19 = r9->_hx_t;
	if( r19 == NULL ) hl_null_access();
	r11 = hl_vfields(r19)[7] ? (*(vdynamic**)(hl_vfields(r19)[7])) : (vdynamic*)hl_dyn_getp(r19->value,116/*t*/,&t$nul_i32);
	goto label$8f388d3_47_164;
	label$8f388d3_47_163:
	r11 = NULL;
	label$8f388d3_47_164:
	r14 = 0;
	sdl_gl_framebuffer_texture2d(r10,r12,r13,r11,r14);
	label$8f388d3_47_166:
	goto label$8f388d3_47_185;
	label$8f388d3_47_167:
	r10 = 36160;
	r12 = 33306;
	r13 = 3553;
	r11 = NULL;
	r14 = 0;
	sdl_gl_framebuffer_texture2d(r10,r12,r13,r11,r14);
	r10 = 36160;
	r12 = 36096;
	r13 = 3553;
	r11 = NULL;
	r14 = 0;
	sdl_gl_framebuffer_texture2d(r10,r12,r13,r11,r14);
	r10 = 36160;
	r12 = 36128;
	r13 = 3553;
	r11 = NULL;
	r14 = 0;
	sdl_gl_framebuffer_texture2d(r10,r12,r13,r11,r14);
	label$8f388d3_47_185:
	r10 = r1->width;
	r10 = r10 >> r6;
	r13 = 0;
	if( r10 != r13 ) goto label$8f388d3_47_191;
	r12 = 1;
	r10 = r12;
	label$8f388d3_47_191:
	r12 = r1->height;
	r12 = r12 >> r6;
	r14 = 0;
	if( r12 != r14 ) goto label$8f388d3_47_197;
	r13 = 1;
	r12 = r13;
	label$8f388d3_47_197:
	r13 = 0;
	r14 = 0;
	sdl_gl_viewport(r13,r14,r10,r12);
	r13 = 0;
	r28 = r0->boundTextures;
	if( r28 == NULL ) hl_null_access();
	r14 = r28->length;
	label$8f388d3_47_204:
	if( r13 >= r14 ) goto label$8f388d3_47_217;
	r27 = r13;
	++r13;
	r28 = r0->boundTextures;
	if( r28 == NULL ) hl_null_access();
	r19 = NULL;
	r29 = r28->length;
	if( ((unsigned)r27) < ((unsigned)r29) ) goto label$8f388d3_47_214;
	hl_types_ArrayObj___expand(r28,r27);
	label$8f388d3_47_214:
	r30 = r28->array;
	((vvirtual**)(r30 + 1))[r27] = r19;
	goto label$8f388d3_47_204;
	label$8f388d3_47_217:
	if( r1 == NULL ) hl_null_access();
	r13 = r1->flags;
	r14 = 256;
	r13 = r13 & r14;
	r14 = 0;
	if( r13 != r14 ) goto label$8f388d3_47_232;
	r13 = r1->flags;
	r14 = 256;
	r13 = r13 | r14;
	r1->flags = r13;
	r21 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r31 = r21->BLACK;
	r16 = NULL;
	r11 = NULL;
	h3d_impl_GlDriver_clear(r0,r31,r16,r11);
	label$8f388d3_47_232:
	return;
}

void h3d_impl_GlDriver_setRenderTargets(h3d__impl__GlDriver r0,hl__types__ArrayObj r1,venum* r2) {
	vvirtual *r17;
	hl__types__ArrayObj r5;
	venum *r3;
	bool r13, r21;
	h3d__Vector4Impl r22;
	h3d__impl__$GlDriver r23;
	int *r11, *r12;
	vdynamic *r9, *r19, *r24;
	varray *r10;
	h3d__mat__Texture r8;
	int r6, r7, r14, r15, r16, r18, r20;
	if( r2 ) goto label$8f388d3_48_3;
	r3 = (venum*)g$h3d_DepthBinding_ReadWrite;
	r2 = r3;
	label$8f388d3_48_3:
	h3d_impl_GlDriver_unbindTargets(r0);
	if( r1 == NULL ) hl_null_access();
	r6 = 0;
	r7 = r1->length;
	if( ((unsigned)r6) < ((unsigned)r7) ) goto label$8f388d3_48_10;
	r8 = NULL;
	goto label$8f388d3_48_13;
	label$8f388d3_48_10:
	r10 = r1->array;
	r9 = ((vdynamic**)(r10 + 1))[r6];
	r8 = (h3d__mat__Texture)r9;
	label$8f388d3_48_13:
	r11 = NULL;
	r12 = NULL;
	h3d_impl_GlDriver_setRenderTarget(r0,r8,r11,r12,r2);
	r6 = r1->length;
	r7 = 2;
	if( r6 >= r7 ) goto label$8f388d3_48_20;
	return;
	label$8f388d3_48_20:
	r6 = r1->length;
	r0->numTargets = r6;
	r13 = false;
	r6 = 1;
	r7 = r1->length;
	label$8f388d3_48_25:
	if( r6 >= r7 ) goto label$8f388d3_48_71;
	r14 = r6;
	++r6;
	if( r1 == NULL ) hl_null_access();
	r16 = r1->length;
	if( ((unsigned)r14) < ((unsigned)r16) ) goto label$8f388d3_48_34;
	r8 = NULL;
	goto label$8f388d3_48_37;
	label$8f388d3_48_34:
	r10 = r1->array;
	r9 = ((vdynamic**)(r10 + 1))[r14];
	r8 = (h3d__mat__Texture)r9;
	label$8f388d3_48_37:
	if( r8 == NULL ) hl_null_access();
	r17 = r8->_hx_t;
	if( r17 ) goto label$8f388d3_48_41;
	h3d_mat_Texture_alloc(r8);
	label$8f388d3_48_41:
	r15 = 36160;
	r16 = 36064;
	r16 = r16 + r14;
	r18 = 3553;
	r17 = r8->_hx_t;
	if( r17 == NULL ) hl_null_access();
	r19 = hl_vfields(r17)[7] ? (*(vdynamic**)(hl_vfields(r17)[7])) : (vdynamic*)hl_dyn_getp(r17->value,116/*t*/,&t$nul_i32);
	r20 = 0;
	sdl_gl_framebuffer_texture2d(r15,r16,r18,r19,r20);
	r5 = r0->curTargets;
	if( r5 == NULL ) hl_null_access();
	r16 = r5->length;
	if( ((unsigned)r14) < ((unsigned)r16) ) goto label$8f388d3_48_55;
	hl_types_ArrayObj___expand(r5,r14);
	label$8f388d3_48_55:
	r10 = r5->array;
	((h3d__mat__Texture*)(r10 + 1))[r14] = r8;
	r15 = r0->frame;
	r15 = h3d_mat_Texture_set_lastFrame(r8,r15);
	r15 = r8->flags;
	r16 = 256;
	r15 = r15 & r16;
	r16 = 0;
	if( r15 != r16 ) goto label$8f388d3_48_70;
	r15 = r8->flags;
	r16 = 256;
	r15 = r15 | r16;
	r8->flags = r15;
	r21 = true;
	r13 = r21;
	label$8f388d3_48_70:
	goto label$8f388d3_48_25;
	label$8f388d3_48_71:
	if( r1 == NULL ) hl_null_access();
	r6 = r1->length;
	h3d_impl_GlDriver_setDrawBuffers(r0,r6);
	if( !r13 ) goto label$8f388d3_48_80;
	r23 = (h3d__impl__$GlDriver)g$_h3d_impl_GlDriver;
	r22 = r23->BLACK;
	r24 = NULL;
	r19 = NULL;
	h3d_impl_GlDriver_clear(r0,r22,r24,r19);
	label$8f388d3_48_80:
	return;
}

void h3d_impl_GlDriver_setDepth(h3d__impl__GlDriver r0,h3d__mat__Texture r1) {
	hl__types__ArrayObj r13;
	vvirtual *r11;
	venum *r9, *r10;
	bool r8;
	vdynamic *r4;
	varray *r15;
	int r3, r5, r6, r7, r12, r14;
	h3d_impl_GlDriver_unbindTargets(r0);
	r0->curTarget = r1;
	if( r1 == NULL ) hl_null_access();
	r3 = r0->frame;
	r3 = h3d_mat_Texture_set_lastFrame(r1,r3);
	r3 = 0;
	r0->curTargetLayer = r3;
	r3 = 0;
	r0->curTargetMip = r3;
	r3 = 36160;
	r4 = r0->commonFB;
	sdl_gl_bind_framebuffer(r3,r4);
	r3 = 36160;
	r5 = 36064;
	r6 = 3553;
	r4 = NULL;
	r7 = 0;
	sdl_gl_framebuffer_texture2d(r3,r5,r6,r4,r7);
	r8 = h3d_mat_Texture_hasStencil(r1);
	if( !r8 ) goto label$8f388d3_49_32;
	r9 = r1->format;
	r10 = (venum*)g$hxd_PixelFormat_Depth24Stencil8;
	if( r9 != r10 ) goto label$8f388d3_49_32;
	r3 = 36160;
	r5 = 33306;
	r6 = 3553;
	r11 = r1->_hx_t;
	if( r11 == NULL ) hl_null_access();
	r4 = hl_vfields(r11)[7] ? (*(vdynamic**)(hl_vfields(r11)[7])) : (vdynamic*)hl_dyn_getp(r11->value,116/*t*/,&t$nul_i32);
	r7 = 0;
	sdl_gl_framebuffer_texture2d(r3,r5,r6,r4,r7);
	goto label$8f388d3_49_58;
	label$8f388d3_49_32:
	r3 = 36160;
	r5 = 33306;
	r6 = 3553;
	r4 = NULL;
	r7 = 0;
	sdl_gl_framebuffer_texture2d(r3,r5,r6,r4,r7);
	r3 = 36160;
	r5 = 36096;
	r6 = 3553;
	r11 = r1->_hx_t;
	if( r11 == NULL ) hl_null_access();
	r4 = hl_vfields(r11)[7] ? (*(vdynamic**)(hl_vfields(r11)[7])) : (vdynamic*)hl_dyn_getp(r11->value,116/*t*/,&t$nul_i32);
	r7 = 0;
	sdl_gl_framebuffer_texture2d(r3,r5,r6,r4,r7);
	r3 = 36160;
	r5 = 36128;
	r6 = 3553;
	r8 = h3d_mat_Texture_hasStencil(r1);
	if( !r8 ) goto label$8f388d3_49_55;
	r11 = r1->_hx_t;
	if( r11 == NULL ) hl_null_access();
	r4 = hl_vfields(r11)[7] ? (*(vdynamic**)(hl_vfields(r11)[7])) : (vdynamic*)hl_dyn_getp(r11->value,116/*t*/,&t$nul_i32);
	goto label$8f388d3_49_56;
	label$8f388d3_49_55:
	r4 = NULL;
	label$8f388d3_49_56:
	r7 = 0;
	sdl_gl_framebuffer_texture2d(r3,r5,r6,r4,r7);
	label$8f388d3_49_58:
	r3 = r1->width;
	r6 = 0;
	if( r3 != r6 ) goto label$8f388d3_49_63;
	r5 = 1;
	r3 = r5;
	label$8f388d3_49_63:
	r5 = r1->height;
	r7 = 0;
	if( r5 != r7 ) goto label$8f388d3_49_68;
	r6 = 1;
	r5 = r6;
	label$8f388d3_49_68:
	r6 = 0;
	r7 = 0;
	sdl_gl_viewport(r6,r7,r3,r5);
	r6 = 0;
	r13 = r0->boundTextures;
	if( r13 == NULL ) hl_null_access();
	r7 = r13->length;
	label$8f388d3_49_75:
	if( r6 >= r7 ) goto label$8f388d3_49_88;
	r12 = r6;
	++r6;
	r13 = r0->boundTextures;
	if( r13 == NULL ) hl_null_access();
	r11 = NULL;
	r14 = r13->length;
	if( ((unsigned)r12) < ((unsigned)r14) ) goto label$8f388d3_49_85;
	hl_types_ArrayObj___expand(r13,r12);
	label$8f388d3_49_85:
	r15 = r13->array;
	((vvirtual**)(r15 + 1))[r12] = r11;
	goto label$8f388d3_49_75;
	label$8f388d3_49_88:
	return;
}

void h3d_impl_GlDriver_init__$1(venum* r0) {
	bool r3;
	vclosure *r2;
	r2 = ((Enumt$ctx_a1ee9dc*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r3 = ((Enumt$ctx_a1ee9dc*)r0)->p0;
	r2->hasValue ? ((void (*)(vdynamic*,bool))r2->fun)((vdynamic*)r2->value,r3) : ((void (*)(bool))r2->fun)(r3);
	return;
}

void h3d_impl_GlDriver_init(h3d__impl__GlDriver r0,vclosure* r1,bool* r2) {
	venum *r8;
	bool r3, r5;
	haxe__Timer r6;
	vclosure *r7;
	int r9;
	if( r2 ) goto label$8f388d3_51_3;
	r3 = false;
	goto label$8f388d3_51_4;
	label$8f388d3_51_3:
	r3 = *r2;
	label$8f388d3_51_4:
	r5 = false;
	r8 = hl_alloc_enum(&t$ctx_a1ee9dc,0);
	((Enumt$ctx_a1ee9dc*)r8)->p0 = (bool)r5;
	((Enumt$ctx_a1ee9dc*)r8)->p1 = (vclosure*)r1;
	r7 = hl_alloc_closure_ptr(&t$fun_d394350,h3d_impl_GlDriver_init__$1,r8);
	r9 = 1;
	r6 = haxe_Timer_delay(r7,r9);
	return;
}

bool h3d_impl_GlDriver_hasFeature(h3d__impl__GlDriver r0,venum* r1) {
	bool r2;
	r2 = true;
	return r2;
}

void h3d_impl_GlDriver_new(h3d__impl__GlDriver r0,int* r1) {
	String r16, r18, r19, r21;
	hl__types__ArrayObj r3;
	hl_type *r5;
	bool r7;
	EReg r17, r22;
	haxe__ds__IntMap r12;
	hl__types__ArrayBytes_Int r8;
	hxd__$Timer r14;
	double r23, r25;
	h3d__mat__Stencil r13;
	vdynamic *r11, *r20, *r24;
	vbyte *r9;
	varray *r4;
	int r2, r6, r15;
	if( r1 ) goto label$8f388d3_53_3;
	r2 = 0;
	goto label$8f388d3_53_4;
	label$8f388d3_53_3:
	r2 = *r1;
	label$8f388d3_53_4:
	r5 = &t$vrt_140cb34;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r0->streamKeep = r3;
	r6 = 0;
	r0->maxCompressedTexturesSupport = r6;
	r7 = false;
	r0->hasMultiIndirect = r7;
	r7 = false;
	r0->rightHanded = r7;
	r7 = true;
	r0->firstShader = r7;
	r5 = &t$vrt_6ab1ef9;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r0->boundTextures = r3;
	r5 = &t$h3d_mat_Texture;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r0->curTargets = r3;
	r6 = 0;
	r9 = hl_alloc_bytes(r6);
	r6 = 0;
	r6 = 0;
	r8 = hl_types_ArrayBase_allocI32(r9,r6);
	if( r8 == NULL ) hl_null_access();
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r6 = 0;
	r6 = hl_types_ArrayBytes_Int_push(r8,r6);
	r0->currentDivisor = r8;
	r6 = -1;
	r0->curColorMask = r6;
	r6 = 0;
	r0->lastActiveIndex = r6;
	r7 = false;
	r0->curStEnabled = r7;
	r6 = -1;
	r0->curStMaskBits = r6;
	r6 = -1;
	r0->curStOpBits = r6;
	r6 = -1;
	r0->curMatBits = r6;
	r6 = 0;
	r0->maxIdxCurAttribs = r6;
	r3 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r3);
	r0->curAttribs = r3;
	h3d_impl_Driver_new(((h3d__impl__Driver)r0));
	r11 = sdl_gl_create_framebuffer();
	r0->commonFB = r11;
	r12 = (haxe__ds__IntMap)hl_alloc_obj(&t$haxe_ds_IntMap);
	haxe_ds_IntMap_new(r12);
	r0->programs = r12;
	r13 = (h3d__mat__Stencil)hl_alloc_obj(&t$h3d_mat_Stencil);
	h3d_mat_Stencil_new(r13);
	r0->defStencil = r13;
	r14 = (hxd__$Timer)g$_hxd_Timer;
	r6 = r14->frameCount;
	r0->frame = r6;
	r6 = 0;
	r6 = sdl_gl_get_config_parameter(r6);
	r15 = 0;
	if( r6 > r15 ) goto label$8f388d3_53_133;
	r7 = false;
	goto label$8f388d3_53_134;
	label$8f388d3_53_133:
	r7 = true;
	label$8f388d3_53_134:
	r0->hasMultiIndirect = r7;
	r6 = 7;
	r0->maxCompressedTexturesSupport = r6;
	r7 = false;
	r16 = h3d_impl_GlDriver_getDriverName(r0,r7);
	if( r16 == NULL ) hl_null_access();
	r16 = String_toLowerCase(r16);
	r17 = (EReg)hl_alloc_obj(&t$EReg);
	r18 = (String)s$intel_graphics;
	r19 = (String)s$;
	EReg_new(r17,r18,r19);
	r7 = EReg_match(r17,r16);
	r0->isIntelGpu = r7;
	r6 = 7938;
	r20 = sdl_GL_getParameter(r6);
	r18 = (String)hl_dyn_castp(&r20,&t$_dyn,&t$String);
	r17 = (EReg)hl_alloc_obj(&t$EReg);
	r19 = (String)s$ES_0_9_0_9_;
	r21 = (String)s$;
	EReg_new(r17,r19,r21);
	r7 = EReg_match(r17,r18);
	if( !r7 ) goto label$8f388d3_53_161;
	r6 = 1;
	r19 = EReg_matched(r17,r6);
	r23 = Std_parseFloat(r19);
	r24 = hl_alloc_dynamic(&t$_f64);
	r24->v.d = r23;
	r0->glES = r24;
	label$8f388d3_53_161:
	r24 = r0->glES;
	if( r24 ) goto label$8f388d3_53_167;
	r11 = sdl_gl_create_vertex_array();
	r0->commonVA = r11;
	r11 = r0->commonVA;
	sdl_gl_bind_vertex_array(r11);
	label$8f388d3_53_167:
	r22 = (EReg)hl_alloc_obj(&t$EReg);
	r19 = (String)s$_0_9_0_9_;
	r21 = (String)s$;
	EReg_new(r22,r19,r21);
	r6 = 35724;
	r20 = sdl_GL_getParameter(r6);
	r19 = (String)hl_dyn_castp(&r20,&t$_dyn,&t$String);
	r7 = EReg_match(r22,r19);
	if( !r7 ) goto label$8f388d3_53_184;
	r6 = 0;
	r21 = EReg_matched(r22,r6);
	r23 = Std_parseFloat(r21);
	r25 = 100.;
	r23 = r23 * r25;
	r6 = hl_math_round(r23);
	r11 = hl_alloc_dynamic(&t$_i32);
	r11->v.i = r6;
	r0->shaderVersion = r11;
	label$8f388d3_53_184:
	r6 = 4;
	r0->drawMode = r6;
	r6 = 34895;
	sdl_gl_enable(r6);
	sdl_gl_finish();
	r6 = 3333;
	r15 = 1;
	sdl_gl_pixel_storei(r6,r15);
	r6 = 3317;
	r15 = 1;
	sdl_gl_pixel_storei(r6,r15);
	return;
}

