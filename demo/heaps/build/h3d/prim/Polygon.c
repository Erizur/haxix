// Generated by HLC 5.0.0 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <h3d/prim/Polygon.h>
void h3d_prim_MeshPrimitive_new(h3d__prim__MeshPrimitive);
#include <h3d/col/Bounds.h>
#include <h3d/VectorImpl.h>
extern hl_type t$h3d_col_Bounds;
void h3d_col_Bounds_new(h3d__col__Bounds);
#include <h3d/Engine.h>
#include <hxd/BufferFormat.h>
#include <hl/types/ArrayBytes_hl_F32.h>
#include <h3d/prim/UV.h>
void h3d_prim_MeshPrimitive_dispose(h3d__prim__MeshPrimitive);
hxd__BufferFormat hxd_BufferFormat_get_POS3D(void);
extern String s$normal;
hxd__BufferFormat hxd_BufferFormat_append(hxd__BufferFormat,String,int);
extern String s$tangent;
extern String s$uv;
extern String s$color;
extern hl_type t$hl_types_ArrayBytes_hl_F32;
void hl_types_ArrayBytes_hl_F32_new(hl__types__ArrayBytes_hl_F32);
void hl_types_ArrayBytes_hl_F32___expand(hl__types__ArrayBytes_hl_F32,int);
int hl_types_ArrayBytes_hl_F32_push(hl__types__ArrayBytes_hl_F32,float);
h3d__Buffer h3d_Buffer_ofFloats(hl__types__ArrayBytes_hl_F32,hxd__BufferFormat,hl__types__ArrayObj);
h3d__Indexes h3d_Indexes_alloc(hl__types__ArrayBytes_hl_UI16,int*,int*);
extern hl_type t$hl_types_ArrayObj;
void hl_types_ArrayObj_new(hl__types__ArrayObj);
extern hl_type t$h3d_VectorImpl;
void h3d_VectorImpl_new(h3d__VectorImpl,double*,double*,double*);
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
int h3d_prim_Polygon_triCount(h3d__prim__Polygon);
#include <hl/natives.h>
int h3d_prim_Primitive_triCount(h3d__prim__Primitive);
#include <h3d/impl/MemoryManager.h>
h3d__Indexes h3d_impl_MemoryManager_getTriIndexes(h3d__impl__MemoryManager,int);
void h3d_Engine_renderMultiBuffers(h3d__Engine,hxd__MultiFormat,hl__types__ArrayObj,h3d__Indexes,int*,int*);
void h3d_Engine_renderIndexed(h3d__Engine,h3d__Buffer,h3d__Indexes,int*,int*);

void h3d_prim_Polygon_new(h3d__prim__Polygon r0,hl__types__ArrayObj r1,hl__types__ArrayBytes_hl_UI16 r2) {
	h3d_prim_MeshPrimitive_new(((h3d__prim__MeshPrimitive)r0));
	r0->points = r1;
	r0->idx = r2;
	return;
}

h3d__col__Bounds h3d_prim_Polygon_getBounds(h3d__prim__Polygon r0) {
	h3d__VectorImpl r6;
	hl__types__ArrayObj r4;
	h3d__col__Bounds r1;
	double r9, r10;
	vdynamic *r7;
	varray *r8;
	int r3, r5;
	r1 = (h3d__col__Bounds)hl_alloc_obj(&t$h3d_col_Bounds);
	h3d_col_Bounds_new(r1);
	r3 = 0;
	r4 = r0->points;
	label$cf601d9_2_4:
	if( r4 == NULL ) hl_null_access();
	r5 = r4->length;
	if( r3 >= r5 ) goto label$cf601d9_2_49;
	r5 = r4->length;
	if( ((unsigned)r3) < ((unsigned)r5) ) goto label$cf601d9_2_12;
	r6 = NULL;
	goto label$cf601d9_2_15;
	label$cf601d9_2_12:
	r8 = r4->array;
	r7 = ((vdynamic**)(r8 + 1))[r3];
	r6 = (h3d__VectorImpl)r7;
	label$cf601d9_2_15:
	++r3;
	if( r6 == NULL ) hl_null_access();
	r9 = r6->x;
	if( r1 == NULL ) hl_null_access();
	r10 = r1->xMin;
	if( !(r9 < r10) ) goto label$cf601d9_2_23;
	r9 = r6->x;
	r1->xMin = r9;
	label$cf601d9_2_23:
	r9 = r6->x;
	r10 = r1->xMax;
	if( !(r10 < r9) ) goto label$cf601d9_2_28;
	r9 = r6->x;
	r1->xMax = r9;
	label$cf601d9_2_28:
	r9 = r6->y;
	r10 = r1->yMin;
	if( !(r9 < r10) ) goto label$cf601d9_2_33;
	r9 = r6->y;
	r1->yMin = r9;
	label$cf601d9_2_33:
	r9 = r6->y;
	r10 = r1->yMax;
	if( !(r10 < r9) ) goto label$cf601d9_2_38;
	r9 = r6->y;
	r1->yMax = r9;
	label$cf601d9_2_38:
	r9 = r6->z;
	r10 = r1->zMin;
	if( !(r9 < r10) ) goto label$cf601d9_2_43;
	r9 = r6->z;
	r1->zMin = r9;
	label$cf601d9_2_43:
	r9 = r6->z;
	r10 = r1->zMax;
	if( !(r10 < r9) ) goto label$cf601d9_2_48;
	r9 = r6->z;
	r1->zMax = r9;
	label$cf601d9_2_48:
	goto label$cf601d9_2_4;
	label$cf601d9_2_49:
	return r1;
}

void h3d_prim_Polygon_alloc(h3d__prim__Polygon r0,h3d__Engine r1) {
	h3d__VectorImpl r18, r21;
	String r6;
	h3d__prim__UV r22;
	hl__types__ArrayObj r4;
	hl__types__ArrayBytes_hl_F32 r8, r11;
	hl__types__ArrayBytes_hl_UI16 r24;
	hxd__BufferFormat r3, r5;
	float r13;
	h3d__Buffer r23;
	double r12;
	int *r26, *r27;
	vdynamic *r19;
	h3d__Indexes r25;
	varray *r20;
	vbyte *r14;
	int r7, r9, r10, r15, r16, r17;
	h3d_prim_MeshPrimitive_dispose(((h3d__prim__MeshPrimitive)r0));
	r3 = hxd_BufferFormat_get_POS3D();
	r4 = r0->normals;
	if( !r4 ) goto label$cf601d9_3_9;
	if( r3 == NULL ) hl_null_access();
	r6 = (String)s$normal;
	r7 = 3;
	r5 = hxd_BufferFormat_append(r3,r6,r7);
	r3 = r5;
	label$cf601d9_3_9:
	r4 = r0->tangents;
	if( !r4 ) goto label$cf601d9_3_16;
	if( r3 == NULL ) hl_null_access();
	r6 = (String)s$tangent;
	r7 = 3;
	r5 = hxd_BufferFormat_append(r3,r6,r7);
	r3 = r5;
	label$cf601d9_3_16:
	r4 = r0->uvs;
	if( !r4 ) goto label$cf601d9_3_23;
	if( r3 == NULL ) hl_null_access();
	r6 = (String)s$uv;
	r7 = 2;
	r5 = hxd_BufferFormat_append(r3,r6,r7);
	r3 = r5;
	label$cf601d9_3_23:
	r4 = r0->colors;
	if( !r4 ) goto label$cf601d9_3_30;
	if( r3 == NULL ) hl_null_access();
	r6 = (String)s$color;
	r7 = 3;
	r5 = hxd_BufferFormat_append(r3,r6,r7);
	r3 = r5;
	label$cf601d9_3_30:
	r7 = 0;
	r8 = (hl__types__ArrayBytes_hl_F32)hl_alloc_obj(&t$hl_types_ArrayBytes_hl_F32);
	hl_types_ArrayBytes_hl_F32_new(r8);
	r10 = 0;
	if( r10 >= r7 ) goto label$cf601d9_3_48;
	r10 = r8->length;
	if( r10 >= r7 ) goto label$cf601d9_3_48;
	r10 = 1;
	r9 = r7 - r10;
	r12 = 0.;
	r13 = (float)r12;
	r10 = r8->length;
	if( ((unsigned)r9) < ((unsigned)r10) ) goto label$cf601d9_3_44;
	hl_types_ArrayBytes_hl_F32___expand(r8,r9);
	label$cf601d9_3_44:
	r14 = r8->bytes;
	r10 = 2;
	r10 = r9 << r10;
	*(float*)(r14 + r10) = r13;
	label$cf601d9_3_48:
	r11 = r8;
	r9 = 0;
	r4 = r0->points;
	if( r4 == NULL ) hl_null_access();
	r10 = r4->length;
	label$cf601d9_3_53:
	if( r9 >= r10 ) goto label$cf601d9_3_159;
	r15 = r9;
	++r9;
	r4 = r0->points;
	if( r4 == NULL ) hl_null_access();
	r17 = r4->length;
	if( ((unsigned)r15) < ((unsigned)r17) ) goto label$cf601d9_3_63;
	r18 = NULL;
	goto label$cf601d9_3_66;
	label$cf601d9_3_63:
	r20 = r4->array;
	r19 = ((vdynamic**)(r20 + 1))[r15];
	r18 = (h3d__VectorImpl)r19;
	label$cf601d9_3_66:
	if( r11 == NULL ) hl_null_access();
	if( r18 == NULL ) hl_null_access();
	r12 = r18->x;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	r12 = r18->y;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	r12 = r18->z;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	r4 = r0->normals;
	if( !r4 ) goto label$cf601d9_3_98;
	r4 = r0->normals;
	if( r4 == NULL ) hl_null_access();
	r17 = r4->length;
	if( ((unsigned)r15) < ((unsigned)r17) ) goto label$cf601d9_3_85;
	r21 = NULL;
	goto label$cf601d9_3_88;
	label$cf601d9_3_85:
	r20 = r4->array;
	r19 = ((vdynamic**)(r20 + 1))[r15];
	r21 = (h3d__VectorImpl)r19;
	label$cf601d9_3_88:
	if( r21 == NULL ) hl_null_access();
	r12 = r21->x;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	r12 = r21->y;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	r12 = r21->z;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	label$cf601d9_3_98:
	r4 = r0->tangents;
	if( !r4 ) goto label$cf601d9_3_119;
	r4 = r0->tangents;
	if( r4 == NULL ) hl_null_access();
	r17 = r4->length;
	if( ((unsigned)r15) < ((unsigned)r17) ) goto label$cf601d9_3_106;
	r21 = NULL;
	goto label$cf601d9_3_109;
	label$cf601d9_3_106:
	r20 = r4->array;
	r19 = ((vdynamic**)(r20 + 1))[r15];
	r21 = (h3d__VectorImpl)r19;
	label$cf601d9_3_109:
	if( r21 == NULL ) hl_null_access();
	r12 = r21->x;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	r12 = r21->y;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	r12 = r21->z;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	label$cf601d9_3_119:
	r4 = r0->uvs;
	if( !r4 ) goto label$cf601d9_3_137;
	r4 = r0->uvs;
	if( r4 == NULL ) hl_null_access();
	r17 = r4->length;
	if( ((unsigned)r15) < ((unsigned)r17) ) goto label$cf601d9_3_127;
	r22 = NULL;
	goto label$cf601d9_3_130;
	label$cf601d9_3_127:
	r20 = r4->array;
	r19 = ((vdynamic**)(r20 + 1))[r15];
	r22 = (h3d__prim__UV)r19;
	label$cf601d9_3_130:
	if( r22 == NULL ) hl_null_access();
	r12 = r22->u;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	r12 = r22->v;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	label$cf601d9_3_137:
	r4 = r0->colors;
	if( !r4 ) goto label$cf601d9_3_158;
	r4 = r0->colors;
	if( r4 == NULL ) hl_null_access();
	r17 = r4->length;
	if( ((unsigned)r15) < ((unsigned)r17) ) goto label$cf601d9_3_145;
	r21 = NULL;
	goto label$cf601d9_3_148;
	label$cf601d9_3_145:
	r20 = r4->array;
	r19 = ((vdynamic**)(r20 + 1))[r15];
	r21 = (h3d__VectorImpl)r19;
	label$cf601d9_3_148:
	if( r21 == NULL ) hl_null_access();
	r12 = r21->x;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	r12 = r21->y;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	r12 = r21->z;
	r13 = (float)r12;
	r16 = hl_types_ArrayBytes_hl_F32_push(r11,r13);
	label$cf601d9_3_158:
	goto label$cf601d9_3_53;
	label$cf601d9_3_159:
	r4 = NULL;
	r23 = h3d_Buffer_ofFloats(r11,r3,r4);
	r0->buffer = r23;
	r24 = r0->idx;
	if( !r24 ) goto label$cf601d9_3_169;
	r24 = r0->idx;
	r26 = NULL;
	r27 = NULL;
	r25 = h3d_Indexes_alloc(r24,r26,r27);
	r0->indexes = r25;
	label$cf601d9_3_169:
	return;
}

void h3d_prim_Polygon_addNormals(h3d__prim__Polygon r0) {
	h3d__VectorImpl r7, r24, r25, r27;
	hl__types__ArrayObj r1;
	hl__types__ArrayBytes_hl_UI16 r16;
	unsigned short r22;
	double r8, r10, r12, r26, r28, r29, r30, r31, r32, r33, r34, r35, r36;
	vdynamic *r23;
	double *r9, *r11, *r13;
	vbyte *r21;
	varray *r15;
	int r3, r4, r5, r6, r14, r17, r18, r19, r20;
	r1 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r1);
	r0->normals = r1;
	r3 = 0;
	r1 = r0->points;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->length;
	label$cf601d9_4_7:
	if( r3 >= r4 ) goto label$cf601d9_4_27;
	r5 = r3;
	++r3;
	r1 = r0->normals;
	if( r1 == NULL ) hl_null_access();
	r7 = (h3d__VectorImpl)hl_alloc_obj(&t$h3d_VectorImpl);
	r8 = 0.;
	r9 = &r8;
	r10 = 0.;
	r11 = &r10;
	r12 = 0.;
	r13 = &r12;
	h3d_VectorImpl_new(r7,r9,r11,r13);
	r14 = r1->length;
	if( ((unsigned)r5) < ((unsigned)r14) ) goto label$cf601d9_4_24;
	hl_types_ArrayObj___expand(r1,r5);
	label$cf601d9_4_24:
	r15 = r1->array;
	((h3d__VectorImpl*)(r15 + 1))[r5] = r7;
	goto label$cf601d9_4_7;
	label$cf601d9_4_27:
	r3 = 0;
	r4 = 0;
	r5 = h3d_prim_Polygon_triCount(r0);
	label$cf601d9_4_30:
	if( r4 >= r5 ) goto label$cf601d9_4_268;
	++r4;
	r16 = r0->idx;
	if( r16 ) goto label$cf601d9_4_48;
	++r3;
	r18 = 1;
	r17 = r3 - r18;
	r14 = r17;
	++r3;
	r19 = 1;
	r18 = r3 - r19;
	r17 = r18;
	++r3;
	r20 = 1;
	r19 = r3 - r20;
	r18 = r19;
	goto label$cf601d9_4_93;
	label$cf601d9_4_48:
	r16 = r0->idx;
	if( r16 == NULL ) hl_null_access();
	r19 = r3;
	++r3;
	r20 = r16->length;
	if( ((unsigned)r19) < ((unsigned)r20) ) goto label$cf601d9_4_56;
	r19 = 0;
	goto label$cf601d9_4_60;
	label$cf601d9_4_56:
	r21 = r16->bytes;
	r20 = 1;
	r20 = r19 << r20;
	r19 = *(unsigned short*)(r21 + r20);
	label$cf601d9_4_60:
	r22 = (int)r19;
	r19 = (int)r22;
	r14 = r19;
	r16 = r0->idx;
	if( r16 == NULL ) hl_null_access();
	r19 = r3;
	++r3;
	r20 = r16->length;
	if( ((unsigned)r19) < ((unsigned)r20) ) goto label$cf601d9_4_71;
	r19 = 0;
	goto label$cf601d9_4_75;
	label$cf601d9_4_71:
	r21 = r16->bytes;
	r20 = 1;
	r20 = r19 << r20;
	r19 = *(unsigned short*)(r21 + r20);
	label$cf601d9_4_75:
	r22 = (int)r19;
	r19 = (int)r22;
	r17 = r19;
	r16 = r0->idx;
	if( r16 == NULL ) hl_null_access();
	r19 = r3;
	++r3;
	r20 = r16->length;
	if( ((unsigned)r19) < ((unsigned)r20) ) goto label$cf601d9_4_86;
	r19 = 0;
	goto label$cf601d9_4_90;
	label$cf601d9_4_86:
	r21 = r16->bytes;
	r20 = 1;
	r20 = r19 << r20;
	r19 = *(unsigned short*)(r21 + r20);
	label$cf601d9_4_90:
	r22 = (int)r19;
	r19 = (int)r22;
	r18 = r19;
	label$cf601d9_4_93:
	r1 = r0->points;
	if( r1 == NULL ) hl_null_access();
	r20 = r1->length;
	if( ((unsigned)r14) < ((unsigned)r20) ) goto label$cf601d9_4_99;
	r7 = NULL;
	goto label$cf601d9_4_102;
	label$cf601d9_4_99:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r14];
	r7 = (h3d__VectorImpl)r23;
	label$cf601d9_4_102:
	r1 = r0->points;
	if( r1 == NULL ) hl_null_access();
	r20 = r1->length;
	if( ((unsigned)r17) < ((unsigned)r20) ) goto label$cf601d9_4_108;
	r24 = NULL;
	goto label$cf601d9_4_111;
	label$cf601d9_4_108:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r17];
	r24 = (h3d__VectorImpl)r23;
	label$cf601d9_4_111:
	r1 = r0->points;
	if( r1 == NULL ) hl_null_access();
	r20 = r1->length;
	if( ((unsigned)r18) < ((unsigned)r20) ) goto label$cf601d9_4_117;
	r25 = NULL;
	goto label$cf601d9_4_120;
	label$cf601d9_4_117:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r18];
	r25 = (h3d__VectorImpl)r23;
	label$cf601d9_4_120:
	if( r24 == NULL ) hl_null_access();
	r26 = r24->x;
	if( r7 == NULL ) hl_null_access();
	r28 = r7->x;
	r26 = r26 - r28;
	r28 = r24->y;
	r29 = r7->y;
	r28 = r28 - r29;
	r29 = r24->z;
	r30 = r7->z;
	r29 = r29 - r30;
	if( r25 == NULL ) hl_null_access();
	r30 = r25->x;
	r31 = r7->x;
	r30 = r30 - r31;
	r31 = r25->y;
	r32 = r7->y;
	r31 = r31 - r32;
	r32 = r25->z;
	r33 = r7->z;
	r32 = r32 - r33;
	r33 = r28 * r32;
	r34 = r29 * r31;
	r33 = r33 - r34;
	r34 = r29 * r30;
	r35 = r26 * r32;
	r34 = r34 - r35;
	r35 = r26 * r31;
	r36 = r28 * r30;
	r35 = r35 - r36;
	r1 = r0->normals;
	if( r1 == NULL ) hl_null_access();
	r20 = r1->length;
	if( ((unsigned)r14) < ((unsigned)r20) ) goto label$cf601d9_4_156;
	r27 = NULL;
	goto label$cf601d9_4_159;
	label$cf601d9_4_156:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r14];
	r27 = (h3d__VectorImpl)r23;
	label$cf601d9_4_159:
	if( r27 == NULL ) hl_null_access();
	r36 = r27->x;
	r36 = r36 + r33;
	r27->x = r36;
	r1 = r0->normals;
	if( r1 == NULL ) hl_null_access();
	r20 = r1->length;
	if( ((unsigned)r14) < ((unsigned)r20) ) goto label$cf601d9_4_169;
	r27 = NULL;
	goto label$cf601d9_4_172;
	label$cf601d9_4_169:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r14];
	r27 = (h3d__VectorImpl)r23;
	label$cf601d9_4_172:
	if( r27 == NULL ) hl_null_access();
	r36 = r27->y;
	r36 = r36 + r34;
	r27->y = r36;
	r1 = r0->normals;
	if( r1 == NULL ) hl_null_access();
	r20 = r1->length;
	if( ((unsigned)r14) < ((unsigned)r20) ) goto label$cf601d9_4_182;
	r27 = NULL;
	goto label$cf601d9_4_185;
	label$cf601d9_4_182:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r14];
	r27 = (h3d__VectorImpl)r23;
	label$cf601d9_4_185:
	if( r27 == NULL ) hl_null_access();
	r36 = r27->z;
	r36 = r36 + r35;
	r27->z = r36;
	r1 = r0->normals;
	if( r1 == NULL ) hl_null_access();
	r20 = r1->length;
	if( ((unsigned)r17) < ((unsigned)r20) ) goto label$cf601d9_4_195;
	r27 = NULL;
	goto label$cf601d9_4_198;
	label$cf601d9_4_195:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r17];
	r27 = (h3d__VectorImpl)r23;
	label$cf601d9_4_198:
	if( r27 == NULL ) hl_null_access();
	r36 = r27->x;
	r36 = r36 + r33;
	r27->x = r36;
	r1 = r0->normals;
	if( r1 == NULL ) hl_null_access();
	r20 = r1->length;
	if( ((unsigned)r17) < ((unsigned)r20) ) goto label$cf601d9_4_208;
	r27 = NULL;
	goto label$cf601d9_4_211;
	label$cf601d9_4_208:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r17];
	r27 = (h3d__VectorImpl)r23;
	label$cf601d9_4_211:
	if( r27 == NULL ) hl_null_access();
	r36 = r27->y;
	r36 = r36 + r34;
	r27->y = r36;
	r1 = r0->normals;
	if( r1 == NULL ) hl_null_access();
	r20 = r1->length;
	if( ((unsigned)r17) < ((unsigned)r20) ) goto label$cf601d9_4_221;
	r27 = NULL;
	goto label$cf601d9_4_224;
	label$cf601d9_4_221:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r17];
	r27 = (h3d__VectorImpl)r23;
	label$cf601d9_4_224:
	if( r27 == NULL ) hl_null_access();
	r36 = r27->z;
	r36 = r36 + r35;
	r27->z = r36;
	r1 = r0->normals;
	if( r1 == NULL ) hl_null_access();
	r20 = r1->length;
	if( ((unsigned)r18) < ((unsigned)r20) ) goto label$cf601d9_4_234;
	r27 = NULL;
	goto label$cf601d9_4_237;
	label$cf601d9_4_234:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r18];
	r27 = (h3d__VectorImpl)r23;
	label$cf601d9_4_237:
	if( r27 == NULL ) hl_null_access();
	r36 = r27->x;
	r36 = r36 + r33;
	r27->x = r36;
	r1 = r0->normals;
	if( r1 == NULL ) hl_null_access();
	r20 = r1->length;
	if( ((unsigned)r18) < ((unsigned)r20) ) goto label$cf601d9_4_247;
	r27 = NULL;
	goto label$cf601d9_4_250;
	label$cf601d9_4_247:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r18];
	r27 = (h3d__VectorImpl)r23;
	label$cf601d9_4_250:
	if( r27 == NULL ) hl_null_access();
	r36 = r27->y;
	r36 = r36 + r34;
	r27->y = r36;
	r1 = r0->normals;
	if( r1 == NULL ) hl_null_access();
	r20 = r1->length;
	if( ((unsigned)r18) < ((unsigned)r20) ) goto label$cf601d9_4_260;
	r27 = NULL;
	goto label$cf601d9_4_263;
	label$cf601d9_4_260:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r18];
	r27 = (h3d__VectorImpl)r23;
	label$cf601d9_4_263:
	if( r27 == NULL ) hl_null_access();
	r36 = r27->z;
	r36 = r36 + r35;
	r27->z = r36;
	goto label$cf601d9_4_30;
	label$cf601d9_4_268:
	r4 = 0;
	r1 = r0->normals;
	label$cf601d9_4_270:
	if( r1 == NULL ) hl_null_access();
	r6 = r1->length;
	if( r4 >= r6 ) goto label$cf601d9_4_313;
	r6 = r1->length;
	if( ((unsigned)r4) < ((unsigned)r6) ) goto label$cf601d9_4_278;
	r7 = NULL;
	goto label$cf601d9_4_281;
	label$cf601d9_4_278:
	r15 = r1->array;
	r23 = ((vdynamic**)(r15 + 1))[r4];
	r7 = (h3d__VectorImpl)r23;
	label$cf601d9_4_281:
	++r4;
	if( r7 == NULL ) hl_null_access();
	r26 = r7->x;
	r28 = r7->x;
	r26 = r26 * r28;
	r28 = r7->y;
	r29 = r7->y;
	r28 = r28 * r29;
	r26 = r26 + r28;
	r28 = r7->z;
	r29 = r7->z;
	r28 = r28 * r29;
	r26 = r26 + r28;
	r29 = 9.999999999999999452e-21;
	if( !(r26 < r29) ) goto label$cf601d9_4_299;
	r28 = 0.;
	r26 = r28;
	goto label$cf601d9_4_303;
	label$cf601d9_4_299:
	r28 = 1.;
	r29 = hl_math_sqrt(r26);
	r28 = r28 / r29;
	r26 = r28;
	label$cf601d9_4_303:
	r28 = r7->x;
	r28 = r28 * r26;
	r7->x = r28;
	r28 = r7->y;
	r28 = r28 * r26;
	r7->y = r28;
	r28 = r7->z;
	r28 = r28 * r26;
	r7->z = r28;
	goto label$cf601d9_4_270;
	label$cf601d9_4_313:
	return;
}

int h3d_prim_Polygon_triCount(h3d__prim__Polygon r0) {
	hl__types__ArrayObj r6;
	hl__types__ArrayBytes_hl_UI16 r5;
	double r4, r7;
	int r1, r2, r3;
	r1 = h3d_prim_Primitive_triCount(((h3d__prim__Primitive)r0));
	r3 = 0;
	if( r1 == r3 ) goto label$cf601d9_5_4;
	return r1;
	label$cf601d9_5_4:
	r5 = r0->idx;
	if( r5 ) goto label$cf601d9_5_10;
	r6 = r0->points;
	if( r6 == NULL ) hl_null_access();
	r2 = r6->length;
	goto label$cf601d9_5_13;
	label$cf601d9_5_10:
	r5 = r0->idx;
	if( r5 == NULL ) hl_null_access();
	r2 = r5->length;
	label$cf601d9_5_13:
	r4 = (double)r2;
	r7 = 3.;
	r4 = r4 / r7;
	r2 = (int)r4;
	return r2;
}

void h3d_prim_Polygon_render(h3d__prim__Polygon r0,h3d__Engine r1) {
	hl__types__ArrayObj r11;
	hxd__MultiFormat r12;
	h3d__impl__MemoryManager r8;
	h3d__Buffer r3;
	int *r13, *r14;
	vdynamic *r4;
	int r6, r9, r10, r15, r16;
	h3d__Indexes r5, r7;
	r3 = r0->buffer;
	if( !r3 ) goto label$cf601d9_6_6;
	r3 = r0->buffer;
	if( r3 == NULL ) hl_null_access();
	r4 = r3->vbuf;
	if( r4 ) goto label$cf601d9_6_7;
	label$cf601d9_6_6:
	h3d_prim_Polygon_alloc(r0,r1);
	label$cf601d9_6_7:
	r5 = r0->indexes;
	r6 = h3d_prim_Polygon_triCount(r0);
	if( r5 ) goto label$cf601d9_6_17;
	if( r1 == NULL ) hl_null_access();
	r8 = r1->mem;
	if( r8 == NULL ) hl_null_access();
	r10 = 3;
	r9 = r6 * r10;
	r7 = h3d_impl_MemoryManager_getTriIndexes(r8,r9);
	r5 = r7;
	label$cf601d9_6_17:
	r11 = r0->buffers;
	if( !r11 ) goto label$cf601d9_6_28;
	if( r1 == NULL ) hl_null_access();
	r12 = r0->formats;
	r11 = r0->buffers;
	r9 = 0;
	r13 = &r9;
	r10 = r6;
	r14 = &r10;
	h3d_Engine_renderMultiBuffers(r1,r12,r11,r5,r13,r14);
	goto label$cf601d9_6_35;
	label$cf601d9_6_28:
	if( r1 == NULL ) hl_null_access();
	r3 = r0->buffer;
	r15 = 0;
	r13 = &r15;
	r16 = r6;
	r14 = &r16;
	h3d_Engine_renderIndexed(r1,r3,r5,r13,r14);
	label$cf601d9_6_35:
	return;
}

