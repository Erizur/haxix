// Generated by HLC 5.0.0 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <hxsl/Cache.h>
#include <hxsl/ShaderInstance.h>
extern hl_type t$vrt_283fa46;
extern hl_type t$vrt_7c116e9;
extern hl_type t$hxsl_SearchMap;
void hxsl_SearchMap_new(hxsl__SearchMap);
extern hl_type t$haxe_ds_StringMap;
void haxe_ds_StringMap_new(haxe__ds__StringMap);
extern hl_type t$haxe_ds_ObjectMap;
void haxe_ds_ObjectMap_new(haxe__ds__ObjectMap);
#include <hxsl/VecType.h>
extern hl_type t$vrt_6e3ace9;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern hl_type t$hxsl_Type;
int hxsl_Tools_size(venum*);
void hl_types_ArrayObj_unshift(hl__types__ArrayObj,vdynamic*);
extern hl_type t$hxsl_TExprDef;
extern venum* g$hxsl_Type_TVoid;
extern hl_type t$vrt_379f5a4;
extern venum* g$hxsl_VecType_VFloat;
String hxsl_Tools_getName(vvirtual*);
extern String s$5058f1a;
String String___add__(String,String);
vdynamic* haxe_ds_StringMap_get(haxe__ds__StringMap,String);
extern hl_type t$vrt_09f4a29;
int hxsl_Tools_allocVarId(void);
extern hl_type t$_i32;
extern hl_type t$String;
extern venum* g$hxsl_VarKind_Var;
extern hl_type t$hxsl_VarKind;
extern hl_type t$hl_types_ArrayObj;
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
extern String s$assert;
void haxe_ds_StringMap_set(haxe__ds__StringMap,String,vdynamic*);
#include <hxsl/Const.h>
extern hl_type t$hxsl_Const;
extern venum* g$hxsl_Type_TFloat;
hl__types__ArrayObj String_split(String,String);
vdynamic* hl_types_ArrayObj_shift(hl__types__ArrayObj);
extern venum* g$hxsl_TGlobal_PackNormal;
extern venum* g$hxsl_TGlobal_Pack;
extern venum* g$hxsl_TGlobal_Vec2;
extern venum* g$hxsl_TGlobal_Vec3;
extern venum* g$hxsl_TGlobal_Vec4;
#include <haxe/macro/Binop.h>
extern String s$OUTPUT;
void hl_types_ArrayBytes_Int___expand(hl__types__ArrayBytes_Int,int);
String String___alloc__(vbyte*,int);
extern venum* g$hxsl_VarKind_Output;
extern venum* g$haxe_macro_Binop_OpAssign;
#include <hxsl/FunctionKind.h>
extern hl_type t$vrt_d3744c2;
extern String s$;
String Std_string(vdynamic*);
String String_toLowerCase(String);
extern venum* g$hxsl_VarKind_Function;
extern hl_type t$vrt_ab557b2;
extern hl_type t$hxsl_FunctionKind;
#include <hxsl/Shader.h>
#include <hxsl/Globals.h>
extern String s$c0cb5f0;
String hl_types_ArrayObj_join(hl__types__ArrayObj,String);
extern hl_type t$hxsl_SharedShader;
void hxsl_SharedShader_new(hxsl__SharedShader,String);
String haxe_crypto_Md5_encode(String);
String String_substr(String,int,vdynamic*);
extern hl_type t$vrt_f479cb2;
extern String s$shaderLinker_;
hl__types__ArrayBytes_Int hl_types_ArrayBase_allocI32(vbyte*,int);
extern hl_type t$fun_056ca56;
extern hl_type t$ctx_6fe9cfc;
extern hl_type t$fun_6f86a66;
extern hl_type t$fun_7e7e96e;
extern hl_type t$ctx_7028576;
extern hl_type t$fun_e4894d1;
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
extern hl_type t$ctx_155a94c;
extern hl_type t$fun_3085266;
extern hl_type t$ctx_affda8a;
extern hl_type t$fun_5a5e3c2;
extern venum* g$hxsl_FunctionKind_Vertex;
extern hl_type t$hxsl_Output;
extern String s$output_position;
extern venum* g$hxsl_FunctionKind_Fragment;
extern hxsl__$Shader g$_hxsl_Shader;
vdynamic* Type_createEmptyInstance(hl__Class);
extern hl_type t$hxsl_Shader;
extern hl_type t$_dyn;
void hxsl_Shader_updateConstantsFinal(hxsl__Shader,hxsl__Globals);
#include <hxsl/ShaderList.h>
#include <hxsl/RuntimeShader.h>
void hxsl_SearchMap_set(hxsl__SearchMap,int,hxsl__SearchMap);
hxsl__RuntimeShader hxsl_Cache_compileRuntimeShader(hxsl__Cache,hxsl__ShaderList,bool);
#include <hxsl/VarQualifier.h>
extern venum* g$hxsl_VarQualifier_PerObject;
int hl_types_ArrayObj_indexOf(hl__types__ArrayObj,vdynamic*,vdynamic*);
hl__types__ArrayObj hl_types_ArrayObj_copy(hl__types__ArrayObj);
bool hl_types_ArrayObj_remove(hl__types__ArrayObj,vdynamic*);
extern venum* g$hxsl_VarKind_Local;
#include <hl/types/ArrayDyn.h>
#include <hxsl/Linker.h>
#include <hxsl/Error.h>
#include <haxe/ValueException.h>
#include <hxsl/Splitter.h>
#include <haxe/ds/IntMap.h>
#include <hxsl/_Linker/AllocatedVar.h>
#include <hxsl/Dce.h>
#include <hxsl/ShaderInstanceDesc.h>
#include <hxsl/RuntimeShaderData.h>
extern hl_type t$fun_8000bc1;
extern hl_type t$hxsl_ShaderInstance;
void hl_types_ArrayObj_reverse(hl__types__ArrayObj);
extern hl_type t$hl_types_ArrayDyn;
extern hl_type t$fun_d4c4225;
void haxe_ds_ArraySort_sort(hl__types__ArrayDyn,vclosure*);
extern hl_type t$hxsl_Linker;
void hxsl_Linker_new(hxsl__Linker,bool*);
vvirtual* hxsl_Linker_link(hxsl__Linker,hl__types__ArrayObj);
extern hxsl__$Error g$_hxsl_Error;
bool hl_BaseType_check(hl__BaseType,vdynamic*);
String hxsl_Printer_shaderToString(vvirtual*,bool*);
extern String s$b8ab2cd;
extern String s$3926582;
extern haxe__$ValueException g$_haxe_ValueException;
bool Std_isOfType(vdynamic*,vdynamic*);
extern hl_type t$hxsl_Error;
extern hl_type t$fun_cd51779;
extern hl_type t$fun_af8bfcb;
extern hl_type t$hxsl_Splitter;
void hxsl_Splitter_new(hxsl__Splitter);
vvirtual* hxsl_Splitter_split(hxsl__Splitter,vvirtual*);
extern hl_type t$haxe_ds_IntMap;
void haxe_ds_IntMap_new(haxe__ds__IntMap);
extern venum* g$hxsl_VarKind_Param;
vdynamic* haxe_ds_ObjectMap_get(haxe__ds__ObjectMap,vdynamic*);
extern hl_type t$vrt_70d5f54;
vdynamic* haxe_ds_IntMap_get(haxe__ds__IntMap,int);
extern hl_type t$nul_i32;
void haxe_ds_IntMap_set(haxe__ds__IntMap,int,vdynamic*);
extern hl_type t$hxsl_Dce;
void hxsl_Dce_new(hxsl__Dce);
vvirtual* hxsl_Dce_dce(hxsl__Dce,vvirtual*,vvirtual*);
hxsl__RuntimeShader hxsl_Cache_buildRuntimeShader(hxsl__Cache,vvirtual*,vvirtual*,haxe__ds__IntMap);
extern hl_type t$hxsl_ShaderInstanceDesc;
void hxsl_ShaderInstanceDesc_new(hxsl__ShaderInstanceDesc,hxsl__SharedShader,int);
extern hl_type t$vrt_a3e2f53;
extern String s$b14a7b8;
extern String s$853ae90;
extern hl_type t$hxsl_RuntimeShader;
void hxsl_RuntimeShader_new(hxsl__RuntimeShader);
hxsl__RuntimeShaderData hxsl_Cache_flattenShader(hxsl__Cache,vvirtual*,venum*,haxe__ds__IntMap);
void hxsl_Cache_initGlobals(hxsl__Cache,hxsl__RuntimeShader,hxsl__RuntimeShaderData);
#include <hxsl/AllocGlobal.h>
#include <hxsl/AllocParam.h>
#include <hxsl/Flatten.h>
#include <hl/types/ArrayBytes_Float.h>
#include <hxsl/_Flatten/Alloc.h>
#include <hxsl/SizeDecl.h>
extern hl_type t$fun_ba16e83;
extern hl_type t$hxsl_Flatten;
void hxsl_Flatten_new(hxsl__Flatten);
extern hl_type t$hxsl_RuntimeShaderData;
void hxsl_RuntimeShaderData_new(hxsl__RuntimeShaderData);
vvirtual* hxsl_Flatten_flatten(hxsl__Flatten,vvirtual*,venum*,bool);
vvirtual* haxe_ds_ObjectMap_keys(haxe__ds__ObjectMap);
extern hl_type t$vrt_11e33cd;
extern hl_type t$fun_bf7849e;
extern hl_type t$fun_32c99d1;
extern hl_type t$hxsl_AllocGlobal;
void hxsl_AllocGlobal_new(hxsl__AllocGlobal,int,String,venum*);
extern hl_type t$hxsl_AllocParam;
extern hl_type t$vrt_7e2476c;
void hxsl_AllocParam_new(hxsl__AllocParam,String,int,int,int,venum*);
bool hxsl_Tools_isSampler(venum*);
extern hl_type t$fun_aafc2df;
void hl_types_ArrayObj_sort(hl__types__ArrayObj,vclosure*);
extern hxsl__$Cache g$_hxsl_Cache;
extern hl_type t$hxsl_Cache;

int hxsl_Cache_compileRuntimeShader__$2(vclosure* r0,vdynamic* r1,vdynamic* r2) {
	vvirtual *r3, *r4;
	int r5;
	r3 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r1);
	r4 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r2);
	r5 = r0->hasValue ? ((int (*)(vdynamic*,vvirtual*,vvirtual*))r0->fun)((vdynamic*)r0->value,r3,r4) : ((int (*)(vvirtual*,vvirtual*))r0->fun)(r3,r4);
	return r5;
}

int hxsl_Cache_flattenShader__$2(vclosure* r0,vdynamic* r1,vdynamic* r2) {
	vvirtual *r3, *r4;
	int r5;
	r3 = hl_to_virtual(&t$vrt_7c116e9,(vdynamic*)r1);
	r4 = hl_to_virtual(&t$vrt_7c116e9,(vdynamic*)r2);
	r5 = r0->hasValue ? ((int (*)(vdynamic*,vvirtual*,vvirtual*))r0->fun)((vdynamic*)r0->value,r3,r4) : ((int (*)(vvirtual*,vvirtual*))r0->fun)(r3,r4);
	return r5;
}

void hxsl_Cache_new(hxsl__Cache r0) {
	haxe__ds__ObjectMap r5;
	haxe__ds__StringMap r4;
	bool r1;
	hxsl__SearchMap r2;
	r1 = false;
	r0->constsToGlobal = r1;
	r2 = (hxsl__SearchMap)hl_alloc_obj(&t$hxsl_SearchMap);
	hxsl_SearchMap_new(r2);
	r0->linkCache = r2;
	r4 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r4);
	r0->linkShaders = r4;
	r5 = (haxe__ds__ObjectMap)hl_alloc_obj(&t$haxe_ds_ObjectMap);
	haxe_ds_ObjectMap_new(r5);
	r0->batchShaders = r5;
	r4 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r4);
	r0->batchShadersParams = r4;
	r4 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r4);
	r0->byID = r4;
	return;
}

vvirtual* hxsl_Cache_getLinkShader__$1(vvirtual* r0,venum* r1,int r2,hl__types__ArrayObj r3,vclosure* r4) {
	vvirtual *r14, *r20;
	hl__types__ArrayObj r5;
	venum *r16, *r19, *r21, *r22;
	hl_type *r7;
	vdynamic *r17;
	int r8, r10, r11, r12, r13, r15, r18;
	varray *r6;
	r7 = &t$vrt_6e3ace9;
	r8 = 0;
	r6 = hl_alloc_array(r7,r8);
	r5 = hl_types_ArrayObj_alloc(r6);
	r8 = r2;
	r10 = 0;
	if( r3 == NULL ) hl_null_access();
	r11 = r3->length;
	label$2c4895f_4_8:
	if( r10 >= r11 ) goto label$2c4895f_4_39;
	r12 = r10;
	++r10;
	if( r4 == NULL ) hl_null_access();
	if( r3 == NULL ) hl_null_access();
	r13 = r3->length;
	r15 = 1;
	r13 = r13 - r15;
	r13 = r13 - r12;
	r15 = r3->length;
	if( ((unsigned)r13) < ((unsigned)r15) ) goto label$2c4895f_4_22;
	r16 = NULL;
	goto label$2c4895f_4_25;
	label$2c4895f_4_22:
	r6 = r3->array;
	r17 = ((vdynamic**)(r6 + 1))[r13];
	r16 = (venum*)r17;
	label$2c4895f_4_25:
	r15 = r3->length;
	r18 = 1;
	r15 = r15 - r18;
	r15 = r15 - r12;
	r13 = r8 - r15;
	r14 = r4->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int))r4->fun)((vdynamic*)r4->value,r16,r13) : ((vvirtual* (*)(venum*,int))r4->fun)(r16,r13);
	if( r14 == NULL ) hl_null_access();
	r19 = hl_vfields(r14)[2] ? (*(venum**)(hl_vfields(r14)[2])) : (venum*)hl_dyn_getp(r14->value,116/*t*/,&t$hxsl_Type);
	r15 = hxsl_Tools_size(r19);
	r13 = r8 - r15;
	r8 = r13;
	if( r5 == NULL ) hl_null_access();
	hl_types_ArrayObj_unshift(r5,((vdynamic*)r14));
	goto label$2c4895f_4_8;
	label$2c4895f_4_39:
	r14 = hl_alloc_virtual(&t$vrt_6e3ace9);
	r20 = hl_alloc_virtual(&t$vrt_6e3ace9);
	r21 = hl_alloc_enum(&t$hxsl_TExprDef,2);
	((hxsl_TExprDef_TGlobal*)r21)->p0 = r1;
	if( hl_vfields(r20)[0] ) *(venum**)(hl_vfields(r20)[0]) = (venum*)r21; else hl_dyn_setp(r20->value,101/*e*/,&t$hxsl_TExprDef,r21);
	r19 = (venum*)g$hxsl_Type_TVoid;
	if( hl_vfields(r20)[2] ) *(venum**)(hl_vfields(r20)[2]) = (venum*)r19; else hl_dyn_setp(r20->value,116/*t*/,&t$hxsl_Type,r19);
	if( hl_vfields(r20)[1] ) *(vvirtual**)(hl_vfields(r20)[1]) = (vvirtual*)r0; else hl_dyn_setp(r20->value,112/*p*/,&t$vrt_379f5a4,r0);
	r21 = hl_alloc_enum(&t$hxsl_TExprDef,8);
	((hxsl_TExprDef_TCall*)r21)->p0 = r20;
	((hxsl_TExprDef_TCall*)r21)->p1 = r5;
	if( hl_vfields(r14)[0] ) *(venum**)(hl_vfields(r14)[0]) = (venum*)r21; else hl_dyn_setp(r14->value,101/*e*/,&t$hxsl_TExprDef,r21);
	r22 = (venum*)g$hxsl_VecType_VFloat;
	r19 = hl_alloc_enum(&t$hxsl_Type,5);
	((hxsl_Type_TVec*)r19)->p0 = r2;
	((hxsl_Type_TVec*)r19)->p1 = r22;
	if( hl_vfields(r14)[2] ) *(venum**)(hl_vfields(r14)[2]) = (venum*)r19; else hl_dyn_setp(r14->value,116/*t*/,&t$hxsl_Type,r19);
	if( hl_vfields(r14)[1] ) *(vvirtual**)(hl_vfields(r14)[1]) = (vvirtual*)r0; else hl_dyn_setp(r14->value,112/*p*/,&t$vrt_379f5a4,r0);
	return r14;
}

vvirtual* hxsl_Cache_getLinkShader__$2(venum* r0,String r1,venum* r2,vvirtual* r3) {
	vdynobj *r11;
	String r4, r6;
	hl__types__ArrayObj r15;
	haxe__ds__StringMap r9;
	vvirtual *r5, *r10, *r16;
	venum *r13, *r14;
	hxsl__SharedShader r17;
	vdynamic *r8;
	int r12, r18;
	if( r3 ) goto label$2c4895f_5_3;
	r4 = r1;
	goto label$2c4895f_5_7;
	label$2c4895f_5_3:
	r4 = hxsl_Tools_getName(r3);
	r6 = (String)s$5058f1a;
	r4 = String___add__(r4,r6);
	r4 = String___add__(r4,r1);
	label$2c4895f_5_7:
	r9 = ((Enumt$ctx_6fe9cfc*)r0)->p1;
	if( r9 == NULL ) hl_null_access();
	r8 = haxe_ds_StringMap_get(r9,r4);
	r5 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r8);
	if( !r5 ) goto label$2c4895f_5_13;
	return r5;
	label$2c4895f_5_13:
	r11 = hl_alloc_dynobj();
	r12 = hxsl_Tools_allocVarId();
	hl_dyn_seti((vdynamic*)r11,23515/*id*/,&t$_i32,r12);
	hl_dyn_setp((vdynamic*)r11,150958933/*name*/,&t$String,r1);
	hl_dyn_setp((vdynamic*)r11,218690500/*type*/,&t$hxsl_Type,r2);
	r14 = (venum*)g$hxsl_VarKind_Var;
	hl_dyn_setp((vdynamic*)r11,118088286/*kind*/,&t$hxsl_VarKind,r14);
	hl_dyn_setp((vdynamic*)r11,-310508246/*parent*/,&t$vrt_09f4a29,r3);
	r10 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r11);
	r5 = r10;
	if( r3 ) goto label$2c4895f_5_32;
	r17 = ((Enumt$ctx_6fe9cfc*)r0)->p0;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->data;
	if( r16 == NULL ) hl_null_access();
	r15 = hl_vfields(r16)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r16)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r16->value,239676598/*vars*/,&t$hl_types_ArrayObj);
	if( r15 == NULL ) hl_null_access();
	r12 = hl_types_ArrayObj_push(r15,((vdynamic*)r5));
	goto label$2c4895f_5_44;
	label$2c4895f_5_32:
	if( r3 == NULL ) hl_null_access();
	r13 = hl_vfields(r3)[5] ? (*(venum**)(hl_vfields(r3)[5])) : (venum*)hl_dyn_getp(r3->value,218690500/*type*/,&t$hxsl_Type);
	if( r13 == NULL ) hl_null_access();
	r12 = HL__ENUM_INDEX__(r13);
	r18 = 13;
	if( r12 != r18 ) goto label$2c4895f_5_42;
	r15 = ((hxsl_Type_TStruct*)r13)->p0;
	if( r15 == NULL ) hl_null_access();
	r12 = hl_types_ArrayObj_push(r15,((vdynamic*)r5));
	goto label$2c4895f_5_44;
	label$2c4895f_5_42:
	r6 = (String)s$assert;
	hl_throw((vdynamic*)r6);
	label$2c4895f_5_44:
	r9 = ((Enumt$ctx_6fe9cfc*)r0)->p1;
	if( r9 == NULL ) hl_null_access();
	haxe_ds_StringMap_set(r9,r4,((vdynamic*)r5));
	return r5;
}

vvirtual* hxsl_Cache_getLinkShader__$3(venum* r0,venum* r1,int r2) {
	String r12, r15, r19;
	hl__types__ArrayObj r18, r20, r33;
	haxe__ds__StringMap r14;
	vvirtual *r6, *r10, *r16, *r17, *r22, *r27, *r29;
	hl_type *r25;
	venum *r4, *r7, *r8, *r9, *r26, *r28;
	vclosure *r23, *r30, *r32;
	double r5;
	vdynamic *r11, *r13;
	varray *r24, *r31;
	int r3, r21, r34;
	if( r1 == NULL ) hl_null_access();
	r3 = HL__ENUM_INDEX__(r1);
	switch(r3) {
		default:
			goto label$2c4895f_6_223;
		case 0:
			r5 = ((hxsl_Output_Const*)r1)->p0;
			r6 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r8 = hl_alloc_enum(&t$hxsl_Const,3);
			((hxsl_Const_CFloat*)r8)->p0 = r5;
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,0);
			((hxsl_TExprDef_TConst*)r7)->p0 = r8;
			if( hl_vfields(r6)[0] ) *(venum**)(hl_vfields(r6)[0]) = (venum*)r7; else hl_dyn_setp(r6->value,101/*e*/,&t$hxsl_TExprDef,r7);
			r9 = (venum*)g$hxsl_Type_TFloat;
			if( hl_vfields(r6)[2] ) *(venum**)(hl_vfields(r6)[2]) = (venum*)r9; else hl_dyn_setp(r6->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r6)[1] ) *(vvirtual**)(hl_vfields(r6)[1]) = (vvirtual*)r10; else hl_dyn_setp(r6->value,112/*p*/,&t$vrt_379f5a4,r10);
			return r6;
		case 1:
			r12 = ((hxsl_Output_Value*)r1)->p0;
			r13 = ((hxsl_Output_Value*)r1)->p1;
			r14 = ((Enumt$ctx_7028576*)r0)->p1;
			if( r14 == NULL ) hl_null_access();
			r11 = haxe_ds_StringMap_get(r14,r12);
			r16 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r11);
			if( !r16 ) goto label$2c4895f_6_30;
			r6 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,1);
			((hxsl_TExprDef_TVar*)r7)->p0 = r16;
			if( hl_vfields(r6)[0] ) *(venum**)(hl_vfields(r6)[0]) = (venum*)r7; else hl_dyn_setp(r6->value,101/*e*/,&t$hxsl_TExprDef,r7);
			if( r16 == NULL ) hl_null_access();
			r9 = hl_vfields(r16)[5] ? (*(venum**)(hl_vfields(r16)[5])) : (venum*)hl_dyn_getp(r16->value,218690500/*type*/,&t$hxsl_Type);
			if( hl_vfields(r6)[2] ) *(venum**)(hl_vfields(r6)[2]) = (venum*)r9; else hl_dyn_setp(r6->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r6)[1] ) *(vvirtual**)(hl_vfields(r6)[1]) = (vvirtual*)r10; else hl_dyn_setp(r6->value,112/*p*/,&t$vrt_379f5a4,r10);
			return r6;
			label$2c4895f_6_30:
			if( r12 == NULL ) hl_null_access();
			r19 = (String)s$5058f1a;
			r18 = String_split(r12,r19);
			r17 = NULL;
			label$2c4895f_6_34:
			if( r18 == NULL ) hl_null_access();
			r3 = r18->length;
			r21 = 1;
			if( r21 >= r3 ) goto label$2c4895f_6_51;
			r23 = ((Enumt$ctx_7028576*)r0)->p4;
			if( r23 == NULL ) hl_null_access();
			r11 = hl_types_ArrayObj_shift(r18);
			r15 = (String)r11;
			r25 = &t$vrt_09f4a29;
			r3 = 0;
			r24 = hl_alloc_array(r25,r3);
			r20 = hl_types_ArrayObj_alloc(r24);
			r9 = hl_alloc_enum(&t$hxsl_Type,13);
			((hxsl_Type_TStruct*)r9)->p0 = r20;
			r22 = r23->hasValue ? ((vvirtual* (*)(vdynamic*,String,venum*,vvirtual*))r23->fun)((vdynamic*)r23->value,r15,r9,r17) : ((vvirtual* (*)(String,venum*,vvirtual*))r23->fun)(r15,r9,r17);
			r17 = r22;
			goto label$2c4895f_6_34;
			label$2c4895f_6_51:
			if( !r13 ) goto label$2c4895f_6_54;
			r3 = r13 ? r13->v.i : 0;
			r2 = r3;
			label$2c4895f_6_54:
			r23 = ((Enumt$ctx_7028576*)r0)->p4;
			if( r23 == NULL ) hl_null_access();
			r11 = hl_types_ArrayObj_shift(r18);
			r15 = (String)r11;
			r21 = 1;
			if( r2 != r21 ) goto label$2c4895f_6_62;
			r9 = (venum*)g$hxsl_Type_TFloat;
			goto label$2c4895f_6_64;
			label$2c4895f_6_62:
			r26 = (venum*)g$hxsl_VecType_VFloat;
			r9 = hl_alloc_enum(&t$hxsl_Type,5);
			((hxsl_Type_TVec*)r9)->p0 = r2;
			((hxsl_Type_TVec*)r9)->p1 = r26;
			label$2c4895f_6_64:
			r22 = r23->hasValue ? ((vvirtual* (*)(vdynamic*,String,venum*,vvirtual*))r23->fun)((vdynamic*)r23->value,r15,r9,r17) : ((vvirtual* (*)(String,venum*,vvirtual*))r23->fun)(r15,r9,r17);
			r6 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,1);
			((hxsl_TExprDef_TVar*)r7)->p0 = r22;
			if( hl_vfields(r6)[0] ) *(venum**)(hl_vfields(r6)[0]) = (venum*)r7; else hl_dyn_setp(r6->value,101/*e*/,&t$hxsl_TExprDef,r7);
			if( r22 == NULL ) hl_null_access();
			r9 = hl_vfields(r22)[5] ? (*(venum**)(hl_vfields(r22)[5])) : (venum*)hl_dyn_getp(r22->value,218690500/*type*/,&t$hxsl_Type);
			if( hl_vfields(r6)[2] ) *(venum**)(hl_vfields(r6)[2]) = (venum*)r9; else hl_dyn_setp(r6->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r6)[1] ) *(vvirtual**)(hl_vfields(r6)[1]) = (vvirtual*)r10; else hl_dyn_setp(r6->value,112/*p*/,&t$vrt_379f5a4,r10);
			return r6;
		case 2:
			r4 = ((hxsl_Output_PackNormal*)r1)->p0;
			r6 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r27 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r28 = (venum*)g$hxsl_TGlobal_PackNormal;
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,2);
			((hxsl_TExprDef_TGlobal*)r7)->p0 = r28;
			if( hl_vfields(r27)[0] ) *(venum**)(hl_vfields(r27)[0]) = (venum*)r7; else hl_dyn_setp(r27->value,101/*e*/,&t$hxsl_TExprDef,r7);
			r9 = (venum*)g$hxsl_Type_TVoid;
			if( hl_vfields(r27)[2] ) *(venum**)(hl_vfields(r27)[2]) = (venum*)r9; else hl_dyn_setp(r27->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r27)[1] ) *(vvirtual**)(hl_vfields(r27)[1]) = (vvirtual*)r10; else hl_dyn_setp(r27->value,112/*p*/,&t$vrt_379f5a4,r10);
			r25 = &t$vrt_6e3ace9;
			r3 = 1;
			r24 = hl_alloc_array(r25,r3);
			r18 = ((Enumt$ctx_7028576*)r0)->p5;
			if( r18 == NULL ) hl_null_access();
			r3 = 0;
			r21 = r18->length;
			if( ((unsigned)r3) < ((unsigned)r21) ) goto label$2c4895f_6_94;
			r30 = NULL;
			goto label$2c4895f_6_97;
			label$2c4895f_6_94:
			r31 = r18->array;
			r11 = ((vdynamic**)(r31 + 1))[r3];
			r30 = (vclosure*)r11;
			label$2c4895f_6_97:
			if( r30 == NULL ) hl_null_access();
			r3 = 3;
			r29 = r30->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int))r30->fun)((vdynamic*)r30->value,r4,r3) : ((vvirtual* (*)(venum*,int))r30->fun)(r4,r3);
			r3 = 0;
			((vvirtual**)(r24 + 1))[r3] = r29;
			r18 = hl_types_ArrayObj_alloc(r24);
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,8);
			((hxsl_TExprDef_TCall*)r7)->p0 = r27;
			((hxsl_TExprDef_TCall*)r7)->p1 = r18;
			if( hl_vfields(r6)[0] ) *(venum**)(hl_vfields(r6)[0]) = (venum*)r7; else hl_dyn_setp(r6->value,101/*e*/,&t$hxsl_TExprDef,r7);
			r9 = ((Enumt$ctx_7028576*)r0)->p2;
			if( hl_vfields(r6)[2] ) *(venum**)(hl_vfields(r6)[2]) = (venum*)r9; else hl_dyn_setp(r6->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r6)[1] ) *(vvirtual**)(hl_vfields(r6)[1]) = (vvirtual*)r10; else hl_dyn_setp(r6->value,112/*p*/,&t$vrt_379f5a4,r10);
			return r6;
		case 3:
			r4 = ((hxsl_Output_PackFloat*)r1)->p0;
			r6 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r27 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r28 = (venum*)g$hxsl_TGlobal_Pack;
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,2);
			((hxsl_TExprDef_TGlobal*)r7)->p0 = r28;
			if( hl_vfields(r27)[0] ) *(venum**)(hl_vfields(r27)[0]) = (venum*)r7; else hl_dyn_setp(r27->value,101/*e*/,&t$hxsl_TExprDef,r7);
			r9 = (venum*)g$hxsl_Type_TVoid;
			if( hl_vfields(r27)[2] ) *(venum**)(hl_vfields(r27)[2]) = (venum*)r9; else hl_dyn_setp(r27->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r27)[1] ) *(vvirtual**)(hl_vfields(r27)[1]) = (vvirtual*)r10; else hl_dyn_setp(r27->value,112/*p*/,&t$vrt_379f5a4,r10);
			r25 = &t$vrt_6e3ace9;
			r3 = 1;
			r24 = hl_alloc_array(r25,r3);
			r18 = ((Enumt$ctx_7028576*)r0)->p5;
			if( r18 == NULL ) hl_null_access();
			r3 = 0;
			r21 = r18->length;
			if( ((unsigned)r3) < ((unsigned)r21) ) goto label$2c4895f_6_130;
			r30 = NULL;
			goto label$2c4895f_6_133;
			label$2c4895f_6_130:
			r31 = r18->array;
			r11 = ((vdynamic**)(r31 + 1))[r3];
			r30 = (vclosure*)r11;
			label$2c4895f_6_133:
			if( r30 == NULL ) hl_null_access();
			r3 = 1;
			r29 = r30->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int))r30->fun)((vdynamic*)r30->value,r4,r3) : ((vvirtual* (*)(venum*,int))r30->fun)(r4,r3);
			r3 = 0;
			((vvirtual**)(r24 + 1))[r3] = r29;
			r18 = hl_types_ArrayObj_alloc(r24);
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,8);
			((hxsl_TExprDef_TCall*)r7)->p0 = r27;
			((hxsl_TExprDef_TCall*)r7)->p1 = r18;
			if( hl_vfields(r6)[0] ) *(venum**)(hl_vfields(r6)[0]) = (venum*)r7; else hl_dyn_setp(r6->value,101/*e*/,&t$hxsl_TExprDef,r7);
			r9 = ((Enumt$ctx_7028576*)r0)->p2;
			if( hl_vfields(r6)[2] ) *(venum**)(hl_vfields(r6)[2]) = (venum*)r9; else hl_dyn_setp(r6->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r6)[1] ) *(vvirtual**)(hl_vfields(r6)[1]) = (vvirtual*)r10; else hl_dyn_setp(r6->value,112/*p*/,&t$vrt_379f5a4,r10);
			return r6;
		case 4:
			r18 = ((hxsl_Output_Vec2*)r1)->p0;
			r32 = ((Enumt$ctx_7028576*)r0)->p3;
			if( r32 == NULL ) hl_null_access();
			r28 = (venum*)g$hxsl_TGlobal_Vec2;
			r3 = 2;
			r33 = ((Enumt$ctx_7028576*)r0)->p5;
			if( r33 == NULL ) hl_null_access();
			r21 = 0;
			r34 = r33->length;
			if( ((unsigned)r21) < ((unsigned)r34) ) goto label$2c4895f_6_158;
			r30 = NULL;
			goto label$2c4895f_6_161;
			label$2c4895f_6_158:
			r24 = r33->array;
			r11 = ((vdynamic**)(r24 + 1))[r21];
			r30 = (vclosure*)r11;
			label$2c4895f_6_161:
			r6 = r32->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int,hl__types__ArrayObj,vclosure*))r32->fun)((vdynamic*)r32->value,r28,r3,r18,r30) : ((vvirtual* (*)(venum*,int,hl__types__ArrayObj,vclosure*))r32->fun)(r28,r3,r18,r30);
			return r6;
		case 5:
			r18 = ((hxsl_Output_Vec3*)r1)->p0;
			r32 = ((Enumt$ctx_7028576*)r0)->p3;
			if( r32 == NULL ) hl_null_access();
			r28 = (venum*)g$hxsl_TGlobal_Vec3;
			r3 = 3;
			r33 = ((Enumt$ctx_7028576*)r0)->p5;
			if( r33 == NULL ) hl_null_access();
			r21 = 0;
			r34 = r33->length;
			if( ((unsigned)r21) < ((unsigned)r34) ) goto label$2c4895f_6_175;
			r30 = NULL;
			goto label$2c4895f_6_178;
			label$2c4895f_6_175:
			r24 = r33->array;
			r11 = ((vdynamic**)(r24 + 1))[r21];
			r30 = (vclosure*)r11;
			label$2c4895f_6_178:
			r6 = r32->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int,hl__types__ArrayObj,vclosure*))r32->fun)((vdynamic*)r32->value,r28,r3,r18,r30) : ((vvirtual* (*)(venum*,int,hl__types__ArrayObj,vclosure*))r32->fun)(r28,r3,r18,r30);
			return r6;
		case 6:
			r18 = ((hxsl_Output_Vec4*)r1)->p0;
			r32 = ((Enumt$ctx_7028576*)r0)->p3;
			if( r32 == NULL ) hl_null_access();
			r28 = (venum*)g$hxsl_TGlobal_Vec4;
			r3 = 4;
			r33 = ((Enumt$ctx_7028576*)r0)->p5;
			if( r33 == NULL ) hl_null_access();
			r21 = 0;
			r34 = r33->length;
			if( ((unsigned)r21) < ((unsigned)r34) ) goto label$2c4895f_6_192;
			r30 = NULL;
			goto label$2c4895f_6_195;
			label$2c4895f_6_192:
			r24 = r33->array;
			r11 = ((vdynamic**)(r24 + 1))[r21];
			r30 = (vclosure*)r11;
			label$2c4895f_6_195:
			r6 = r32->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int,hl__types__ArrayObj,vclosure*))r32->fun)((vdynamic*)r32->value,r28,r3,r18,r30) : ((vvirtual* (*)(venum*,int,hl__types__ArrayObj,vclosure*))r32->fun)(r28,r3,r18,r30);
			return r6;
		case 7:
			r4 = ((hxsl_Output_Swiz*)r1)->p0;
			r18 = ((hxsl_Output_Swiz*)r1)->p1;
			r6 = hl_alloc_virtual(&t$vrt_6e3ace9);
			r20 = ((Enumt$ctx_7028576*)r0)->p5;
			if( r20 == NULL ) hl_null_access();
			r3 = 0;
			r21 = r20->length;
			if( ((unsigned)r3) < ((unsigned)r21) ) goto label$2c4895f_6_207;
			r30 = NULL;
			goto label$2c4895f_6_210;
			label$2c4895f_6_207:
			r24 = r20->array;
			r11 = ((vdynamic**)(r24 + 1))[r3];
			r30 = (vclosure*)r11;
			label$2c4895f_6_210:
			if( r30 == NULL ) hl_null_access();
			r3 = 4;
			r27 = r30->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int))r30->fun)((vdynamic*)r30->value,r4,r3) : ((vvirtual* (*)(venum*,int))r30->fun)(r4,r3);
			r7 = hl_alloc_enum(&t$hxsl_TExprDef,9);
			((hxsl_TExprDef_TSwiz*)r7)->p0 = r27;
			((hxsl_TExprDef_TSwiz*)r7)->p1 = r18;
			if( hl_vfields(r6)[0] ) *(venum**)(hl_vfields(r6)[0]) = (venum*)r7; else hl_dyn_setp(r6->value,101/*e*/,&t$hxsl_TExprDef,r7);
			if( r18 == NULL ) hl_null_access();
			r3 = r18->length;
			r26 = (venum*)g$hxsl_VecType_VFloat;
			r9 = hl_alloc_enum(&t$hxsl_Type,5);
			((hxsl_Type_TVec*)r9)->p0 = r3;
			((hxsl_Type_TVec*)r9)->p1 = r26;
			if( hl_vfields(r6)[2] ) *(venum**)(hl_vfields(r6)[2]) = (venum*)r9; else hl_dyn_setp(r6->value,116/*t*/,&t$hxsl_Type,r9);
			r10 = ((Enumt$ctx_7028576*)r0)->p0;
			if( hl_vfields(r6)[1] ) *(vvirtual**)(hl_vfields(r6)[1]) = (vvirtual*)r10; else hl_dyn_setp(r6->value,112/*p*/,&t$vrt_379f5a4,r10);
			return r6;
	}
	label$2c4895f_6_223:
	r6 = NULL;
	return r6;
}

vvirtual* hxsl_Cache_getLinkShader__$4(venum* r0,venum* r1) {
	String r5, r13;
	vdynobj *r2;
	hl__types__ArrayObj r16;
	vvirtual *r15, *r17, *r19, *r22, *r23, *r24;
	venum *r4, *r14, *r20, *r21;
	hxsl__SharedShader r18;
	hl__types__ArrayBytes_Int r6;
	vclosure *r25;
	vdynamic *r26;
	int *r12;
	varray *r27;
	vbyte *r9;
	int r3, r7, r10, r11;
	r2 = hl_alloc_dynobj();
	r3 = hxsl_Tools_allocVarId();
	hl_dyn_seti((vdynamic*)r2,23515/*id*/,&t$_i32,r3);
	r4 = ((Enumt$ctx_155a94c*)r0)->p3;
	hl_dyn_setp((vdynamic*)r2,218690500/*type*/,&t$hxsl_Type,r4);
	r5 = (String)s$OUTPUT;
	r6 = ((Enumt$ctx_155a94c*)r0)->p2;
	if( r6 == NULL ) hl_null_access();
	r3 = 0;
	r7 = r6->length;
	if( ((unsigned)r3) < ((unsigned)r7) ) goto label$2c4895f_7_12;
	hl_types_ArrayBytes_Int___expand(r6,r3);
	label$2c4895f_7_12:
	r9 = r6->bytes;
	r7 = 2;
	r7 = r3 << r7;
	r10 = *(int*)(r9 + r7);
	r11 = r10;
	++r10;
	*(int*)(r9 + r7) = r10;
	r12 = &r3;
	r9 = hl_itos(r11,r12);
	r13 = String___alloc__(r9,r3);
	r5 = String___add__(r5,r13);
	hl_dyn_setp((vdynamic*)r2,150958933/*name*/,&t$String,r5);
	r14 = (venum*)g$hxsl_VarKind_Output;
	hl_dyn_setp((vdynamic*)r2,118088286/*kind*/,&t$hxsl_VarKind,r14);
	r15 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r2);
	r18 = ((Enumt$ctx_155a94c*)r0)->p0;
	if( r18 == NULL ) hl_null_access();
	r17 = r18->data;
	if( r17 == NULL ) hl_null_access();
	r16 = hl_vfields(r17)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r17)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r17->value,239676598/*vars*/,&t$hl_types_ArrayObj);
	if( r16 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_push(r16,((vdynamic*)r15));
	r19 = hl_alloc_virtual(&t$vrt_6e3ace9);
	r21 = (venum*)g$haxe_macro_Binop_OpAssign;
	r22 = hl_alloc_virtual(&t$vrt_6e3ace9);
	r20 = hl_alloc_enum(&t$hxsl_TExprDef,1);
	((hxsl_TExprDef_TVar*)r20)->p0 = r15;
	if( hl_vfields(r22)[0] ) *(venum**)(hl_vfields(r22)[0]) = (venum*)r20; else hl_dyn_setp(r22->value,101/*e*/,&t$hxsl_TExprDef,r20);
	r4 = ((Enumt$ctx_155a94c*)r0)->p3;
	if( hl_vfields(r22)[2] ) *(venum**)(hl_vfields(r22)[2]) = (venum*)r4; else hl_dyn_setp(r22->value,116/*t*/,&t$hxsl_Type,r4);
	r23 = ((Enumt$ctx_155a94c*)r0)->p1;
	if( hl_vfields(r22)[1] ) *(vvirtual**)(hl_vfields(r22)[1]) = (vvirtual*)r23; else hl_dyn_setp(r22->value,112/*p*/,&t$vrt_379f5a4,r23);
	r16 = ((Enumt$ctx_155a94c*)r0)->p4;
	if( r16 == NULL ) hl_null_access();
	r3 = 0;
	r7 = r16->length;
	if( ((unsigned)r3) < ((unsigned)r7) ) goto label$2c4895f_7_50;
	r25 = NULL;
	goto label$2c4895f_7_53;
	label$2c4895f_7_50:
	r27 = r16->array;
	r26 = ((vdynamic**)(r27 + 1))[r3];
	r25 = (vclosure*)r26;
	label$2c4895f_7_53:
	if( r25 == NULL ) hl_null_access();
	r3 = 4;
	r24 = r25->hasValue ? ((vvirtual* (*)(vdynamic*,venum*,int))r25->fun)((vdynamic*)r25->value,r1,r3) : ((vvirtual* (*)(venum*,int))r25->fun)(r1,r3);
	r20 = hl_alloc_enum(&t$hxsl_TExprDef,5);
	((hxsl_TExprDef_TBinop*)r20)->p0 = r21;
	((hxsl_TExprDef_TBinop*)r20)->p1 = r22;
	((hxsl_TExprDef_TBinop*)r20)->p2 = r24;
	if( hl_vfields(r19)[0] ) *(venum**)(hl_vfields(r19)[0]) = (venum*)r20; else hl_dyn_setp(r19->value,101/*e*/,&t$hxsl_TExprDef,r20);
	r4 = (venum*)g$hxsl_Type_TVoid;
	if( hl_vfields(r19)[2] ) *(venum**)(hl_vfields(r19)[2]) = (venum*)r4; else hl_dyn_setp(r19->value,116/*t*/,&t$hxsl_Type,r4);
	r23 = ((Enumt$ctx_155a94c*)r0)->p1;
	if( hl_vfields(r19)[1] ) *(vvirtual**)(hl_vfields(r19)[1]) = (vvirtual*)r23; else hl_dyn_setp(r19->value,112/*p*/,&t$vrt_379f5a4,r23);
	return r19;
}

void hxsl_Cache_getLinkShader__$5(venum* r0,venum* r1,hl__types__ArrayObj r2) {
	String r9, r10;
	vdynobj *r3;
	vvirtual *r12, *r19, *r21, *r23, *r24;
	hl__types__ArrayObj r6, r16;
	hl_type *r8;
	venum *r5, *r11, *r17, *r22;
	hxsl__SharedShader r25;
	vclosure *r20;
	vdynamic *r18;
	varray *r7;
	int r4, r14, r15;
	r3 = hl_alloc_dynobj();
	r4 = hxsl_Tools_allocVarId();
	hl_dyn_seti((vdynamic*)r3,23515/*id*/,&t$_i32,r4);
	r8 = &t$vrt_d3744c2;
	r4 = 0;
	r7 = hl_alloc_array(r8,r4);
	r6 = hl_types_ArrayObj_alloc(r7);
	r5 = hl_alloc_enum(&t$hxsl_Type,14);
	((hxsl_Type_TFun*)r5)->p0 = r6;
	hl_dyn_setp((vdynamic*)r3,218690500/*type*/,&t$hxsl_Type,r5);
	r9 = (String)s$;
	r10 = Std_string(((vdynamic*)r1));
	r9 = String___add__(r9,r10);
	if( r9 == NULL ) hl_null_access();
	r9 = String_toLowerCase(r9);
	hl_dyn_setp((vdynamic*)r3,150958933/*name*/,&t$String,r9);
	r11 = (venum*)g$hxsl_VarKind_Function;
	hl_dyn_setp((vdynamic*)r3,118088286/*kind*/,&t$hxsl_VarKind,r11);
	r12 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r3);
	r8 = &t$vrt_6e3ace9;
	r4 = 0;
	r7 = hl_alloc_array(r8,r4);
	r6 = hl_types_ArrayObj_alloc(r7);
	r4 = 0;
	label$2c4895f_8_23:
	if( r2 == NULL ) hl_null_access();
	r15 = r2->length;
	if( r4 >= r15 ) goto label$2c4895f_8_41;
	r15 = r2->length;
	if( ((unsigned)r4) < ((unsigned)r15) ) goto label$2c4895f_8_31;
	r17 = NULL;
	goto label$2c4895f_8_34;
	label$2c4895f_8_31:
	r7 = r2->array;
	r18 = ((vdynamic**)(r7 + 1))[r4];
	r17 = (venum*)r18;
	label$2c4895f_8_34:
	++r4;
	if( r6 == NULL ) hl_null_access();
	r20 = ((Enumt$ctx_affda8a*)r0)->p2;
	if( r20 == NULL ) hl_null_access();
	r19 = r20->hasValue ? ((vvirtual* (*)(vdynamic*,venum*))r20->fun)((vdynamic*)r20->value,r17) : ((vvirtual* (*)(venum*))r20->fun)(r17);
	r14 = hl_types_ArrayObj_push(r6,((vdynamic*)r19));
	goto label$2c4895f_8_23;
	label$2c4895f_8_41:
	r21 = hl_alloc_virtual(&t$vrt_ab557b2);
	if( hl_vfields(r21)[2] ) *(venum**)(hl_vfields(r21)[2]) = (venum*)r1; else hl_dyn_setp(r21->value,118088286/*kind*/,&t$hxsl_FunctionKind,r1);
	if( hl_vfields(r21)[3] ) *(vvirtual**)(hl_vfields(r21)[3]) = (vvirtual*)r12; else hl_dyn_setp(r21->value,5691731/*ref*/,&t$vrt_09f4a29,r12);
	r8 = &t$vrt_09f4a29;
	r4 = 0;
	r7 = hl_alloc_array(r8,r4);
	r16 = hl_types_ArrayObj_alloc(r7);
	if( hl_vfields(r21)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r21)[0]) = (hl__types__ArrayObj)r16; else hl_dyn_setp(r21->value,7638631/*args*/,&t$hl_types_ArrayObj,r16);
	r5 = (venum*)g$hxsl_Type_TVoid;
	if( hl_vfields(r21)[4] ) *(venum**)(hl_vfields(r21)[4]) = (venum*)r5; else hl_dyn_setp(r21->value,5691745/*ret*/,&t$hxsl_Type,r5);
	r19 = hl_alloc_virtual(&t$vrt_6e3ace9);
	r22 = hl_alloc_enum(&t$hxsl_TExprDef,4);
	((hxsl_TExprDef_TBlock*)r22)->p0 = r6;
	if( hl_vfields(r19)[0] ) *(venum**)(hl_vfields(r19)[0]) = (venum*)r22; else hl_dyn_setp(r19->value,101/*e*/,&t$hxsl_TExprDef,r22);
	r23 = ((Enumt$ctx_affda8a*)r0)->p1;
	if( hl_vfields(r19)[1] ) *(vvirtual**)(hl_vfields(r19)[1]) = (vvirtual*)r23; else hl_dyn_setp(r19->value,112/*p*/,&t$vrt_379f5a4,r23);
	r5 = (venum*)g$hxsl_Type_TVoid;
	if( hl_vfields(r19)[2] ) *(venum**)(hl_vfields(r19)[2]) = (venum*)r5; else hl_dyn_setp(r19->value,116/*t*/,&t$hxsl_Type,r5);
	if( hl_vfields(r21)[1] ) *(vvirtual**)(hl_vfields(r21)[1]) = (vvirtual*)r19; else hl_dyn_setp(r21->value,52297279/*expr*/,&t$vrt_6e3ace9,r19);
	r25 = ((Enumt$ctx_affda8a*)r0)->p0;
	if( r25 == NULL ) hl_null_access();
	r24 = r25->data;
	if( r24 == NULL ) hl_null_access();
	r16 = hl_vfields(r24)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r24)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r24->value,63237214/*funs*/,&t$hl_types_ArrayObj);
	if( r16 == NULL ) hl_null_access();
	r4 = hl_types_ArrayObj_push(r16,((vdynamic*)r21));
	return;
}

hxsl__Shader hxsl_Cache_getLinkShader(hxsl__Cache r0,hl__types__ArrayObj r1) {
	String r12, r14, r20;
	vvirtual *r19, *r21;
	haxe__ds__StringMap r13, r38;
	hl__types__ArrayObj r2, r9, r30;
	venum *r10, *r24, *r25, *r28, *r31, *r33, *r35, *r36;
	hl_type *r4;
	hxsl__SharedShader r17;
	hl__types__ArrayBytes_Int r22;
	hxsl__Shader r15, r16;
	hxsl__Globals r39;
	hxsl__$Shader r37;
	vclosure *r26, *r27, *r29, *r32, *r34;
	vdynamic *r11, *r18;
	vbyte *r23;
	int r5, r7, r8;
	varray *r3;
	r4 = &t$String;
	r5 = 0;
	r3 = hl_alloc_array(r4,r5);
	r2 = hl_types_ArrayObj_alloc(r3);
	r5 = 0;
	label$2c4895f_9_5:
	if( r1 == NULL ) hl_null_access();
	r8 = r1->length;
	if( r5 >= r8 ) goto label$2c4895f_9_21;
	r8 = r1->length;
	if( ((unsigned)r5) < ((unsigned)r8) ) goto label$2c4895f_9_13;
	r10 = NULL;
	goto label$2c4895f_9_16;
	label$2c4895f_9_13:
	r3 = r1->array;
	r11 = ((vdynamic**)(r3 + 1))[r5];
	r10 = (venum*)r11;
	label$2c4895f_9_16:
	++r5;
	if( r2 == NULL ) hl_null_access();
	r12 = Std_string(((vdynamic*)r10));
	r7 = hl_types_ArrayObj_push(r2,((vdynamic*)r12));
	goto label$2c4895f_9_5;
	label$2c4895f_9_21:
	if( r2 == NULL ) hl_null_access();
	r12 = (String)s$c0cb5f0;
	r12 = hl_types_ArrayObj_join(r2,r12);
	r13 = r0->linkShaders;
	if( r13 == NULL ) hl_null_access();
	r11 = haxe_ds_StringMap_get(r13,r12);
	r15 = (hxsl__Shader)r11;
	if( !r15 ) goto label$2c4895f_9_30;
	return r15;
	label$2c4895f_9_30:
	r17 = (hxsl__SharedShader)hl_alloc_obj(&t$hxsl_SharedShader);
	r14 = (String)s$;
	hxsl_SharedShader_new(r17,r14);
	r14 = haxe_crypto_Md5_encode(r12);
	if( r14 == NULL ) hl_null_access();
	r5 = 0;
	r7 = 8;
	r18 = hl_alloc_dynamic(&t$_i32);
	r18->v.i = r7;
	r14 = String_substr(r14,r5,r18);
	r19 = hl_alloc_virtual(&t$vrt_f479cb2);
	r20 = (String)s$shaderLinker_;
	r20 = String___add__(r20,r14);
	if( hl_vfields(r19)[1] ) *(String*)(hl_vfields(r19)[1]) = (String)r20; else hl_dyn_setp(r19->value,150958933/*name*/,&t$String,r20);
	r4 = &t$vrt_09f4a29;
	r5 = 0;
	r3 = hl_alloc_array(r4,r5);
	r9 = hl_types_ArrayObj_alloc(r3);
	if( hl_vfields(r19)[2] ) *(hl__types__ArrayObj*)(hl_vfields(r19)[2]) = (hl__types__ArrayObj)r9; else hl_dyn_setp(r19->value,239676598/*vars*/,&t$hl_types_ArrayObj,r9);
	r4 = &t$vrt_ab557b2;
	r5 = 0;
	r3 = hl_alloc_array(r4,r5);
	r9 = hl_types_ArrayObj_alloc(r3);
	if( hl_vfields(r19)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r19)[0]) = (hl__types__ArrayObj)r9; else hl_dyn_setp(r19->value,63237214/*funs*/,&t$hl_types_ArrayObj,r9);
	r17->data = r19;
	r21 = NULL;
	r13 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r13);
	r5 = 4;
	r23 = hl_alloc_bytes(r5);
	r5 = 0;
	r7 = 0;
	r8 = 2;
	r8 = r5 << r8;
	*(int*)(r23 + r8) = r7;
	++r5;
	r5 = 1;
	r22 = hl_types_ArrayBase_allocI32(r23,r5);
	r5 = 4;
	r25 = (venum*)g$hxsl_VecType_VFloat;
	r24 = hl_alloc_enum(&t$hxsl_Type,5);
	((hxsl_Type_TVec*)r24)->p0 = r5;
	((hxsl_Type_TVec*)r24)->p1 = r25;
	r26 = hl_alloc_closure_ptr(&t$fun_056ca56,hxsl_Cache_getLinkShader__$1,r21);
	r28 = hl_alloc_enum(&t$ctx_6fe9cfc,0);
	((Enumt$ctx_6fe9cfc*)r28)->p0 = (hxsl__SharedShader)r17;
	((Enumt$ctx_6fe9cfc*)r28)->p1 = (haxe__ds__StringMap)r13;
	r27 = hl_alloc_closure_ptr(&t$fun_6f86a66,hxsl_Cache_getLinkShader__$2,r28);
	r4 = &t$fun_7e7e96e;
	r5 = 1;
	r3 = hl_alloc_array(r4,r5);
	r29 = NULL;
	r5 = 0;
	((vclosure**)(r3 + 1))[r5] = r29;
	r9 = hl_types_ArrayObj_alloc(r3);
	if( r9 == NULL ) hl_null_access();
	r5 = 0;
	r31 = hl_alloc_enum(&t$ctx_7028576,0);
	((Enumt$ctx_7028576*)r31)->p0 = (vvirtual*)r21;
	((Enumt$ctx_7028576*)r31)->p1 = (haxe__ds__StringMap)r13;
	((Enumt$ctx_7028576*)r31)->p2 = (venum*)r24;
	((Enumt$ctx_7028576*)r31)->p3 = (vclosure*)r26;
	((Enumt$ctx_7028576*)r31)->p4 = (vclosure*)r27;
	((Enumt$ctx_7028576*)r31)->p5 = (hl__types__ArrayObj)r9;
	r29 = hl_alloc_closure_ptr(&t$fun_e4894d1,hxsl_Cache_getLinkShader__$3,r31);
	r7 = r9->length;
	if( ((unsigned)r5) < ((unsigned)r7) ) goto label$2c4895f_9_95;
	hl_types_ArrayObj___expand(r9,r5);
	label$2c4895f_9_95:
	r3 = r9->array;
	((vclosure**)(r3 + 1))[r5] = r29;
	r33 = hl_alloc_enum(&t$ctx_155a94c,0);
	((Enumt$ctx_155a94c*)r33)->p0 = (hxsl__SharedShader)r17;
	((Enumt$ctx_155a94c*)r33)->p1 = (vvirtual*)r21;
	((Enumt$ctx_155a94c*)r33)->p2 = (hl__types__ArrayBytes_Int)r22;
	((Enumt$ctx_155a94c*)r33)->p3 = (venum*)r24;
	((Enumt$ctx_155a94c*)r33)->p4 = (hl__types__ArrayObj)r9;
	r32 = hl_alloc_closure_ptr(&t$fun_3085266,hxsl_Cache_getLinkShader__$4,r33);
	r35 = hl_alloc_enum(&t$ctx_affda8a,0);
	((Enumt$ctx_affda8a*)r35)->p0 = (hxsl__SharedShader)r17;
	((Enumt$ctx_affda8a*)r35)->p1 = (vvirtual*)r21;
	((Enumt$ctx_affda8a*)r35)->p2 = (vclosure*)r32;
	r34 = hl_alloc_closure_ptr(&t$fun_5a5e3c2,hxsl_Cache_getLinkShader__$5,r35);
	if( r34 == NULL ) hl_null_access();
	r36 = (venum*)g$hxsl_FunctionKind_Vertex;
	r4 = &t$hxsl_Output;
	r5 = 1;
	r3 = hl_alloc_array(r4,r5);
	r20 = (String)s$output_position;
	r18 = NULL;
	r10 = hl_alloc_enum(&t$hxsl_Output,1);
	((hxsl_Output_Value*)r10)->p0 = r20;
	((hxsl_Output_Value*)r10)->p1 = r18;
	r5 = 0;
	((venum**)(r3 + 1))[r5] = r10;
	r30 = hl_types_ArrayObj_alloc(r3);
	r34->hasValue ? ((void (*)(vdynamic*,venum*,hl__types__ArrayObj))r34->fun)((vdynamic*)r34->value,r36,r30) : ((void (*)(venum*,hl__types__ArrayObj))r34->fun)(r36,r30);
	r36 = (venum*)g$hxsl_FunctionKind_Fragment;
	r34->hasValue ? ((void (*)(vdynamic*,venum*,hl__types__ArrayObj))r34->fun)((vdynamic*)r34->value,r36,r1) : ((void (*)(venum*,hl__types__ArrayObj))r34->fun)(r36,r1);
	r37 = (hxsl__$Shader)g$_hxsl_Shader;
	r11 = Type_createEmptyInstance(((hl__Class)r37));
	r16 = (hxsl__Shader)hl_dyn_castp(&r11,&t$_dyn,&t$hxsl_Shader);
	if( r16 == NULL ) hl_null_access();
	r16->shader = r17;
	r38 = r0->linkShaders;
	if( r38 == NULL ) hl_null_access();
	haxe_ds_StringMap_set(r38,r12,((vdynamic*)r16));
	r39 = NULL;
	hxsl_Shader_updateConstantsFinal(r16,r39);
	return r16;
}

hxsl__RuntimeShader hxsl_Cache_link(hxsl__Cache r0,hxsl__ShaderList r1,bool r2) {
	hxsl__RuntimeShader r17;
	hl__types__ArrayObj r10;
	hxsl__ShaderInstance r9;
	hxsl__Shader r8;
	hxsl__SearchMap r3, r11, r16;
	hxsl__ShaderList r5, r6, r7;
	vdynamic *r14;
	varray *r15;
	int r12, r13;
	r3 = r0->linkCache;
	r5 = r1;
	r6 = NULL;
	label$2c4895f_10_3:
	if( r5 == r6 ) goto label$2c4895f_10_33;
	if( r5 == NULL ) hl_null_access();
	r8 = r5->s;
	r7 = r5->next;
	r5 = r7;
	if( r8 == NULL ) hl_null_access();
	r9 = r8->instance;
	if( r3 == NULL ) hl_null_access();
	r10 = r3->nexts;
	if( r10 == NULL ) hl_null_access();
	if( r9 == NULL ) hl_null_access();
	r12 = r9->id;
	r13 = r3->minId;
	r12 = r12 - r13;
	r13 = r10->length;
	if( ((unsigned)r12) < ((unsigned)r13) ) goto label$2c4895f_10_22;
	r11 = NULL;
	goto label$2c4895f_10_25;
	label$2c4895f_10_22:
	r15 = r10->array;
	r14 = ((vdynamic**)(r15 + 1))[r12];
	r11 = (hxsl__SearchMap)r14;
	label$2c4895f_10_25:
	if( r11 ) goto label$2c4895f_10_31;
	r16 = (hxsl__SearchMap)hl_alloc_obj(&t$hxsl_SearchMap);
	hxsl_SearchMap_new(r16);
	r11 = r16;
	r12 = r9->id;
	hxsl_SearchMap_set(r3,r12,r11);
	label$2c4895f_10_31:
	r3 = r11;
	goto label$2c4895f_10_3;
	label$2c4895f_10_33:
	if( r3 == NULL ) hl_null_access();
	r17 = r3->linked;
	if( r17 ) goto label$2c4895f_10_38;
	r17 = hxsl_Cache_compileRuntimeShader(r0,r1,r2);
	r3->linked = r17;
	label$2c4895f_10_38:
	r17 = r3->linked;
	return r17;
}

int hxsl_Cache_compileRuntimeShader__$1(vvirtual* r0,vvirtual* r1) {
	int r2, r3;
	if( r1 == NULL ) hl_null_access();
	r2 = hl_vfields(r1)[2] ? (*(int*)(hl_vfields(r1)[2])) : (int)hl_dyn_geti(r1->value,112/*p*/,&t$_i32);
	if( r0 == NULL ) hl_null_access();
	r3 = hl_vfields(r0)[2] ? (*(int*)(hl_vfields(r0)[2])) : (int)hl_dyn_geti(r0->value,112/*p*/,&t$_i32);
	r2 = r2 - r3;
	return r2;
}

void hxsl_Cache_compileRuntimeShader__$3(hl__types__ArrayObj r0,vvirtual* r1) {
	vvirtual *r4;
	hl__types__ArrayObj r3;
	venum *r6, *r10, *r11, *r12;
	bool r9;
	vclosure *r16;
	vdynamic *r7, *r14;
	varray *r15;
	int r5, r8, r13;
	if( r1 == NULL ) hl_null_access();
	r3 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj);
	if( !r3 ) goto label$2c4895f_12_31;
	r3 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj);
	if( r3 == NULL ) hl_null_access();
	r6 = (venum*)g$hxsl_VarQualifier_PerObject;
	r7 = NULL;
	r5 = hl_types_ArrayObj_indexOf(r3,((vdynamic*)r6),r7);
	r8 = 0;
	if( r5 < r8 ) goto label$2c4895f_12_31;
	r3 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj);
	if( r3 == NULL ) hl_null_access();
	r5 = r3->length;
	r8 = 1;
	if( r5 != r8 ) goto label$2c4895f_12_18;
	r3 = NULL;
	if( hl_vfields(r1)[4] ) *(hl__types__ArrayObj*)(hl_vfields(r1)[4]) = (hl__types__ArrayObj)r3; else hl_dyn_setp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj,r3);
	goto label$2c4895f_12_26;
	label$2c4895f_12_18:
	r3 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj);
	if( r3 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_copy(r3);
	if( hl_vfields(r1)[4] ) *(hl__types__ArrayObj*)(hl_vfields(r1)[4]) = (hl__types__ArrayObj)r3; else hl_dyn_setp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj,r3);
	r3 = hl_vfields(r1)[4] ? (*(hl__types__ArrayObj*)(hl_vfields(r1)[4])) : (hl__types__ArrayObj)hl_dyn_getp(r1->value,476822680/*qualifiers*/,&t$hl_types_ArrayObj);
	if( r3 == NULL ) hl_null_access();
	r6 = (venum*)g$hxsl_VarQualifier_PerObject;
	r9 = hl_types_ArrayObj_remove(r3,((vdynamic*)r6));
	label$2c4895f_12_26:
	r10 = hl_vfields(r1)[1] ? (*(venum**)(hl_vfields(r1)[1])) : (venum*)hl_dyn_getp(r1->value,118088286/*kind*/,&t$hxsl_VarKind);
	r11 = (venum*)g$hxsl_VarKind_Var;
	if( r10 == r11 ) goto label$2c4895f_12_31;
	r10 = (venum*)g$hxsl_VarKind_Local;
	if( hl_vfields(r1)[1] ) *(venum**)(hl_vfields(r1)[1]) = (venum*)r10; else hl_dyn_setp(r1->value,118088286/*kind*/,&t$hxsl_VarKind,r10);
	label$2c4895f_12_31:
	r12 = hl_vfields(r1)[5] ? (*(venum**)(hl_vfields(r1)[5])) : (venum*)hl_dyn_getp(r1->value,218690500/*type*/,&t$hxsl_Type);
	if( r12 == NULL ) hl_null_access();
	r5 = HL__ENUM_INDEX__(r12);
	r8 = 13;
	if( r5 != r8 ) goto label$2c4895f_12_62;
	r3 = ((hxsl_Type_TStruct*)r12)->p0;
	r5 = 0;
	label$2c4895f_12_38:
	if( r3 == NULL ) hl_null_access();
	r13 = r3->length;
	if( r5 >= r13 ) goto label$2c4895f_12_62;
	r13 = r3->length;
	if( ((unsigned)r5) < ((unsigned)r13) ) goto label$2c4895f_12_46;
	r4 = NULL;
	goto label$2c4895f_12_49;
	label$2c4895f_12_46:
	r15 = r3->array;
	r14 = ((vdynamic**)(r15 + 1))[r5];
	r4 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r14);
	label$2c4895f_12_49:
	++r5;
	if( r0 == NULL ) hl_null_access();
	r8 = 0;
	r13 = r0->length;
	if( ((unsigned)r8) < ((unsigned)r13) ) goto label$2c4895f_12_56;
	r16 = NULL;
	goto label$2c4895f_12_59;
	label$2c4895f_12_56:
	r15 = r0->array;
	r14 = ((vdynamic**)(r15 + 1))[r8];
	r16 = (vclosure*)r14;
	label$2c4895f_12_59:
	if( r16 == NULL ) hl_null_access();
	r16->hasValue ? ((void (*)(vdynamic*,vvirtual*))r16->fun)((vdynamic*)r16->value,r4) : ((void (*)(vvirtual*))r16->fun)(r4);
	goto label$2c4895f_12_38;
	label$2c4895f_12_62:
	return;
}

hxsl__RuntimeShader hxsl_Cache_compileRuntimeShader(hxsl__Cache r0,hxsl__ShaderList r1,bool r2) {
	hxsl__RuntimeShader r59, r62;
	String r32, r33, r34;
	bool *r21;
	haxe__ds__ObjectMap r51;
	haxe__ds__StringMap r68;
	vvirtual *r15, *r26, *r27, *r39, *r40, *r42, *r43, *r44, *r52, *r56, *r58, *r63;
	hl__types__ArrayObj r3, r14, r25, r35;
	hxsl__RuntimeShaderData r67;
	venum *r48, *r49, *r50;
	hl_type *r5;
	bool r20, r30;
	hxsl__SharedShader r61;
	hxsl___Linker__AllocatedVar r47;
	haxe__ds__IntMap r46, r53;
	hxsl__Linker r19;
	hxsl__ShaderInstance r12;
	hxsl__Error r28, r31;
	hxsl__Shader r11;
	hxsl__Splitter r41;
	haxe__ValueException r37, r45;
	hxsl__$Error r29;
	haxe__$ValueException r36;
	hxsl__ShaderList r8, r9, r10;
	vclosure *r17, *r18, *r38;
	hl__types__ArrayDyn r16;
	int *r65;
	hxsl__ShaderInstanceDesc r60;
	hxsl__Dce r57;
	vdynamic *r22, *r55;
	vbyte *r66;
	int r6, r13, r23, r24, r54, r64;
	varray *r4;
	static vclosure cl$0 = { &t$fun_8000bc1, hxsl_Cache_compileRuntimeShader__$1, 0 };
	hl_trap_ctx trap$0;
	r5 = &t$vrt_283fa46;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r6 = 0;
	r8 = r1;
	r9 = NULL;
	label$2c4895f_13_7:
	if( r8 == r9 ) goto label$2c4895f_13_25;
	if( r8 == NULL ) hl_null_access();
	r11 = r8->s;
	r10 = r8->next;
	r8 = r10;
	if( r11 == NULL ) hl_null_access();
	r12 = r11->instance;
	if( r3 == NULL ) hl_null_access();
	r15 = hl_alloc_virtual(&t$vrt_283fa46);
	if( hl_vfields(r15)[1] ) *(hxsl__ShaderInstance*)(hl_vfields(r15)[1]) = (hxsl__ShaderInstance)r12; else hl_dyn_setp(r15->value,96158928/*inst*/,&t$hxsl_ShaderInstance,r12);
	r13 = r11->priority;
	if( hl_vfields(r15)[2] ) *(int*)(hl_vfields(r15)[2]) = (int)r13; else hl_dyn_seti(r15->value,112/*p*/,&t$_i32,r13);
	r13 = r6;
	++r6;
	if( hl_vfields(r15)[0] ) *(int*)(hl_vfields(r15)[0]) = (int)r13; else hl_dyn_seti(r15->value,-32204280/*index*/,&t$_i32,r13);
	r13 = hl_types_ArrayObj_push(r3,((vdynamic*)r15));
	goto label$2c4895f_13_7;
	label$2c4895f_13_25:
	if( r3 == NULL ) hl_null_access();
	hl_types_ArrayObj_reverse(r3);
	r16 = (hl__types__ArrayDyn)hl_dyn_castp(&r3,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
	r17 = &cl$0;
	if( r17 ) goto label$2c4895f_13_32;
	r18 = NULL;
	goto label$2c4895f_13_33;
	label$2c4895f_13_32:
	r18 = hl_alloc_closure_ptr(&t$fun_d4c4225,hxsl_Cache_compileRuntimeShader__$2,r17);
	label$2c4895f_13_33:
	haxe_ds_ArraySort_sort(r16,r18);
	r19 = (hxsl__Linker)hl_alloc_obj(&t$hxsl_Linker);
	r20 = r2;
	r21 = &r20;
	hxsl_Linker_new(r19,r21);
	hl_trap(trap$0,r22,label$2c4895f_13_68);
	r5 = &t$vrt_f479cb2;
	r13 = 0;
	r4 = hl_alloc_array(r5,r13);
	r14 = hl_types_ArrayObj_alloc(r4);
	r13 = 0;
	label$2c4895f_13_44:
	if( r3 == NULL ) hl_null_access();
	r24 = r3->length;
	if( r13 >= r24 ) goto label$2c4895f_13_63;
	r24 = r3->length;
	if( ((unsigned)r13) < ((unsigned)r24) ) goto label$2c4895f_13_52;
	r15 = NULL;
	goto label$2c4895f_13_55;
	label$2c4895f_13_52:
	r4 = r3->array;
	r22 = ((vdynamic**)(r4 + 1))[r13];
	r15 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r22);
	label$2c4895f_13_55:
	++r13;
	if( r14 == NULL ) hl_null_access();
	if( r15 == NULL ) hl_null_access();
	r12 = hl_vfields(r15)[1] ? (*(hxsl__ShaderInstance*)(hl_vfields(r15)[1])) : (hxsl__ShaderInstance)hl_dyn_getp(r15->value,96158928/*inst*/,&t$hxsl_ShaderInstance);
	if( r12 == NULL ) hl_null_access();
	r26 = r12->shader;
	r23 = hl_types_ArrayObj_push(r14,((vdynamic*)r26));
	goto label$2c4895f_13_44;
	label$2c4895f_13_63:
	if( r19 == NULL ) hl_null_access();
	r27 = hxsl_Linker_link(r19,r14);
	r26 = r27;
	hl_endtrap(trap$0);
	goto label$2c4895f_13_160;
	label$2c4895f_13_68:
	r29 = (hxsl__$Error)g$_hxsl_Error;
	r30 = hl_BaseType_check(((hl__BaseType)r29),r22);
	if( !r30 ) goto label$2c4895f_13_109;
	r31 = (hxsl__Error)r22;
	r28 = r31;
	r5 = &t$String;
	r13 = 0;
	r4 = hl_alloc_array(r5,r13);
	r14 = hl_types_ArrayObj_alloc(r4);
	r13 = 0;
	label$2c4895f_13_78:
	if( r3 == NULL ) hl_null_access();
	r24 = r3->length;
	if( r13 >= r24 ) goto label$2c4895f_13_99;
	r24 = r3->length;
	if( ((unsigned)r13) < ((unsigned)r24) ) goto label$2c4895f_13_86;
	r15 = NULL;
	goto label$2c4895f_13_89;
	label$2c4895f_13_86:
	r4 = r3->array;
	r22 = ((vdynamic**)(r4 + 1))[r13];
	r15 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r22);
	label$2c4895f_13_89:
	++r13;
	if( r14 == NULL ) hl_null_access();
	if( r15 == NULL ) hl_null_access();
	r12 = hl_vfields(r15)[1] ? (*(hxsl__ShaderInstance*)(hl_vfields(r15)[1])) : (hxsl__ShaderInstance)hl_dyn_getp(r15->value,96158928/*inst*/,&t$hxsl_ShaderInstance);
	if( r12 == NULL ) hl_null_access();
	r27 = r12->shader;
	r21 = NULL;
	r32 = hxsl_Printer_shaderToString(r27,r21);
	r23 = hl_types_ArrayObj_push(r14,((vdynamic*)r32));
	goto label$2c4895f_13_78;
	label$2c4895f_13_99:
	if( r28 == NULL ) hl_null_access();
	r32 = r28->msg;
	r33 = (String)s$b8ab2cd;
	if( r14 == NULL ) hl_null_access();
	r34 = (String)s$3926582;
	r34 = hl_types_ArrayObj_join(r14,r34);
	r33 = String___add__(r33,r34);
	r32 = String___add__(r32,r33);
	r28->msg = r32;
	hl_throw((vdynamic*)r28);
	label$2c4895f_13_109:
	r36 = (haxe__$ValueException)g$_haxe_ValueException;
	r30 = hl_BaseType_check(((hl__BaseType)r36),r22);
	if( !r30 ) goto label$2c4895f_13_159;
	r37 = (haxe__ValueException)r22;
	r22 = NULL;
	if( r37 == NULL ) hl_null_access();
	r22 = r37->value;
	r29 = (hxsl__$Error)g$_hxsl_Error;
	r30 = Std_isOfType(r22,((vdynamic*)r29));
	if( !r30 ) goto label$2c4895f_13_158;
	r22 = r37->value;
	r31 = (hxsl__Error)hl_dyn_castp(&r22,&t$_dyn,&t$hxsl_Error);
	r28 = r31;
	r5 = &t$String;
	r13 = 0;
	r4 = hl_alloc_array(r5,r13);
	r14 = hl_types_ArrayObj_alloc(r4);
	r13 = 0;
	label$2c4895f_13_127:
	if( r3 == NULL ) hl_null_access();
	r24 = r3->length;
	if( r13 >= r24 ) goto label$2c4895f_13_148;
	r24 = r3->length;
	if( ((unsigned)r13) < ((unsigned)r24) ) goto label$2c4895f_13_135;
	r15 = NULL;
	goto label$2c4895f_13_138;
	label$2c4895f_13_135:
	r4 = r3->array;
	r22 = ((vdynamic**)(r4 + 1))[r13];
	r15 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r22);
	label$2c4895f_13_138:
	++r13;
	if( r14 == NULL ) hl_null_access();
	if( r15 == NULL ) hl_null_access();
	r12 = hl_vfields(r15)[1] ? (*(hxsl__ShaderInstance*)(hl_vfields(r15)[1])) : (hxsl__ShaderInstance)hl_dyn_getp(r15->value,96158928/*inst*/,&t$hxsl_ShaderInstance);
	if( r12 == NULL ) hl_null_access();
	r27 = r12->shader;
	r21 = NULL;
	r32 = hxsl_Printer_shaderToString(r27,r21);
	r23 = hl_types_ArrayObj_push(r14,((vdynamic*)r32));
	goto label$2c4895f_13_127;
	label$2c4895f_13_148:
	if( r28 == NULL ) hl_null_access();
	r32 = r28->msg;
	r33 = (String)s$b8ab2cd;
	if( r14 == NULL ) hl_null_access();
	r34 = (String)s$3926582;
	r34 = hl_types_ArrayObj_join(r14,r34);
	r33 = String___add__(r33,r34);
	r32 = String___add__(r32,r33);
	r28->msg = r32;
	hl_throw((vdynamic*)r28);
	label$2c4895f_13_158:
	hl_rethrow((vdynamic*)r37);
	label$2c4895f_13_159:
	hl_rethrow((vdynamic*)r22);
	label$2c4895f_13_160:
	if( !r2 ) goto label$2c4895f_13_203;
	r5 = &t$fun_cd51779;
	r13 = 1;
	r4 = hl_alloc_array(r5,r13);
	r38 = NULL;
	r13 = 0;
	((vclosure**)(r4 + 1))[r13] = r38;
	r14 = hl_types_ArrayObj_alloc(r4);
	if( r14 == NULL ) hl_null_access();
	r13 = 0;
	r38 = hl_alloc_closure_ptr(&t$fun_af8bfcb,hxsl_Cache_compileRuntimeShader__$3,r14);
	r23 = r14->length;
	if( ((unsigned)r13) < ((unsigned)r23) ) goto label$2c4895f_13_174;
	hl_types_ArrayObj___expand(r14,r13);
	label$2c4895f_13_174:
	r4 = r14->array;
	((vclosure**)(r4 + 1))[r13] = r38;
	r13 = 0;
	if( r27 == NULL ) hl_null_access();
	r25 = hl_vfields(r27)[2] ? (*(hl__types__ArrayObj*)(hl_vfields(r27)[2])) : (hl__types__ArrayObj)hl_dyn_getp(r27->value,239676598/*vars*/,&t$hl_types_ArrayObj);
	label$2c4895f_13_179:
	if( r25 == NULL ) hl_null_access();
	r24 = r25->length;
	if( r13 >= r24 ) goto label$2c4895f_13_203;
	r24 = r25->length;
	if( ((unsigned)r13) < ((unsigned)r24) ) goto label$2c4895f_13_187;
	r39 = NULL;
	goto label$2c4895f_13_190;
	label$2c4895f_13_187:
	r4 = r25->array;
	r22 = ((vdynamic**)(r4 + 1))[r13];
	r39 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r22);
	label$2c4895f_13_190:
	++r13;
	if( r14 == NULL ) hl_null_access();
	r23 = 0;
	r24 = r14->length;
	if( ((unsigned)r23) < ((unsigned)r24) ) goto label$2c4895f_13_197;
	r38 = NULL;
	goto label$2c4895f_13_200;
	label$2c4895f_13_197:
	r4 = r14->array;
	r22 = ((vdynamic**)(r4 + 1))[r23];
	r38 = (vclosure*)r22;
	label$2c4895f_13_200:
	if( r38 == NULL ) hl_null_access();
	r38->hasValue ? ((void (*)(vdynamic*,vvirtual*))r38->fun)((vdynamic*)r38->value,r39) : ((void (*)(vvirtual*))r38->fun)(r39);
	goto label$2c4895f_13_179;
	label$2c4895f_13_203:
	r41 = (hxsl__Splitter)hl_alloc_obj(&t$hxsl_Splitter);
	hxsl_Splitter_new(r41);
	hl_trap(trap$0,r22,label$2c4895f_13_210);
	r43 = hxsl_Splitter_split(r41,r26);
	r42 = r43;
	hl_endtrap(trap$0);
	goto label$2c4895f_13_246;
	label$2c4895f_13_210:
	r29 = (hxsl__$Error)g$_hxsl_Error;
	r30 = hl_BaseType_check(((hl__BaseType)r29),r22);
	if( !r30 ) goto label$2c4895f_13_223;
	r31 = (hxsl__Error)r22;
	if( r31 == NULL ) hl_null_access();
	r32 = r31->msg;
	r33 = (String)s$b8ab2cd;
	r21 = NULL;
	r34 = hxsl_Printer_shaderToString(r26,r21);
	r33 = String___add__(r33,r34);
	r32 = String___add__(r32,r33);
	r31->msg = r32;
	hl_throw((vdynamic*)r31);
	label$2c4895f_13_223:
	r36 = (haxe__$ValueException)g$_haxe_ValueException;
	r30 = hl_BaseType_check(((hl__BaseType)r36),r22);
	if( !r30 ) goto label$2c4895f_13_245;
	r45 = (haxe__ValueException)r22;
	r22 = NULL;
	if( r45 == NULL ) hl_null_access();
	r22 = r45->value;
	r29 = (hxsl__$Error)g$_hxsl_Error;
	r30 = Std_isOfType(r22,((vdynamic*)r29));
	if( !r30 ) goto label$2c4895f_13_244;
	r22 = r45->value;
	r31 = (hxsl__Error)hl_dyn_castp(&r22,&t$_dyn,&t$hxsl_Error);
	if( r31 == NULL ) hl_null_access();
	r32 = r31->msg;
	r33 = (String)s$b8ab2cd;
	r21 = NULL;
	r34 = hxsl_Printer_shaderToString(r26,r21);
	r33 = String___add__(r33,r34);
	r32 = String___add__(r32,r33);
	r31->msg = r32;
	hl_throw((vdynamic*)r31);
	label$2c4895f_13_244:
	hl_rethrow((vdynamic*)r45);
	label$2c4895f_13_245:
	hl_rethrow((vdynamic*)r22);
	label$2c4895f_13_246:
	r46 = (haxe__ds__IntMap)hl_alloc_obj(&t$haxe_ds_IntMap);
	haxe_ds_IntMap_new(r46);
	r13 = 0;
	if( r19 == NULL ) hl_null_access();
	r14 = r19->allVars;
	label$2c4895f_13_251:
	if( r14 == NULL ) hl_null_access();
	r24 = r14->length;
	if( r13 >= r24 ) goto label$2c4895f_13_323;
	r24 = r14->length;
	if( ((unsigned)r13) < ((unsigned)r24) ) goto label$2c4895f_13_259;
	r47 = NULL;
	goto label$2c4895f_13_262;
	label$2c4895f_13_259:
	r4 = r14->array;
	r22 = ((vdynamic**)(r4 + 1))[r13];
	r47 = (hxsl___Linker__AllocatedVar)r22;
	label$2c4895f_13_262:
	++r13;
	if( r47 == NULL ) hl_null_access();
	r39 = r47->v;
	if( r39 == NULL ) hl_null_access();
	r48 = hl_vfields(r39)[1] ? (*(venum**)(hl_vfields(r39)[1])) : (venum*)hl_dyn_getp(r39->value,118088286/*kind*/,&t$hxsl_VarKind);
	r49 = (venum*)g$hxsl_VarKind_Param;
	if( r48 != r49 ) goto label$2c4895f_13_322;
	r39 = r47->v;
	if( r39 == NULL ) hl_null_access();
	r50 = hl_vfields(r39)[5] ? (*(venum**)(hl_vfields(r39)[5])) : (venum*)hl_dyn_getp(r39->value,218690500/*type*/,&t$hxsl_Type);
	if( r50 == NULL ) hl_null_access();
	r23 = HL__ENUM_INDEX__(r50);
	r24 = 13;
	if( r23 != r24 ) goto label$2c4895f_13_277;
	goto label$2c4895f_13_251;
	label$2c4895f_13_277:
	if( r3 == NULL ) hl_null_access();
	r23 = r47->instanceIndex;
	r24 = r3->length;
	if( ((unsigned)r23) < ((unsigned)r24) ) goto label$2c4895f_13_283;
	r15 = NULL;
	goto label$2c4895f_13_286;
	label$2c4895f_13_283:
	r4 = r3->array;
	r22 = ((vdynamic**)(r4 + 1))[r23];
	r15 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r22);
	label$2c4895f_13_286:
	if( r41 == NULL ) hl_null_access();
	r51 = r41->varMap;
	if( r51 == NULL ) hl_null_access();
	r39 = r47->v;
	r22 = haxe_ds_ObjectMap_get(r51,((vdynamic*)r39));
	r39 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r22);
	if( r46 == NULL ) hl_null_access();
	if( r39 ) goto label$2c4895f_13_296;
	r23 = r47->id;
	goto label$2c4895f_13_298;
	label$2c4895f_13_296:
	if( r39 == NULL ) hl_null_access();
	r23 = hl_vfields(r39)[0] ? (*(int*)(hl_vfields(r39)[0])) : (int)hl_dyn_geti(r39->value,23515/*id*/,&t$_i32);
	label$2c4895f_13_298:
	r52 = hl_alloc_virtual(&t$vrt_70d5f54);
	if( r15 == NULL ) hl_null_access();
	r24 = hl_vfields(r15)[0] ? (*(int*)(hl_vfields(r15)[0])) : (int)hl_dyn_geti(r15->value,-32204280/*index*/,&t$_i32);
	if( hl_vfields(r52)[1] ) *(int*)(hl_vfields(r52)[1]) = (int)r24; else hl_dyn_seti(r52->value,434184351/*instance*/,&t$_i32,r24);
	r12 = hl_vfields(r15)[1] ? (*(hxsl__ShaderInstance*)(hl_vfields(r15)[1])) : (hxsl__ShaderInstance)hl_dyn_getp(r15->value,96158928/*inst*/,&t$hxsl_ShaderInstance);
	if( r12 == NULL ) hl_null_access();
	r53 = r12->params;
	if( r53 == NULL ) hl_null_access();
	r25 = r47->merged;
	if( r25 == NULL ) hl_null_access();
	r24 = 0;
	r54 = r25->length;
	if( ((unsigned)r24) < ((unsigned)r54) ) goto label$2c4895f_13_313;
	r40 = NULL;
	goto label$2c4895f_13_316;
	label$2c4895f_13_313:
	r4 = r25->array;
	r22 = ((vdynamic**)(r4 + 1))[r24];
	r40 = hl_to_virtual(&t$vrt_09f4a29,(vdynamic*)r22);
	label$2c4895f_13_316:
	if( r40 == NULL ) hl_null_access();
	r24 = hl_vfields(r40)[0] ? (*(int*)(hl_vfields(r40)[0])) : (int)hl_dyn_geti(r40->value,23515/*id*/,&t$_i32);
	r22 = haxe_ds_IntMap_get(r53,r24);
	r55 = (vdynamic*)r22;
	if( hl_vfields(r52)[0] ) *(vdynamic**)(hl_vfields(r52)[0]) = (vdynamic*)r55; else hl_dyn_setp(r52->value,-32204280/*index*/,&t$nul_i32,r55);
	haxe_ds_IntMap_set(r46,r23,((vdynamic*)r52));
	label$2c4895f_13_322:
	goto label$2c4895f_13_251;
	label$2c4895f_13_323:
	r57 = (hxsl__Dce)hl_alloc_obj(&t$hxsl_Dce);
	hxsl_Dce_new(r57);
	if( r42 == NULL ) hl_null_access();
	r44 = hl_vfields(r42)[1] ? (*(vvirtual**)(hl_vfields(r42)[1])) : (vvirtual*)hl_dyn_getp(r42->value,-515384742/*vertex*/,&t$vrt_f479cb2);
	r58 = hl_vfields(r42)[0] ? (*(vvirtual**)(hl_vfields(r42)[0])) : (vvirtual*)hl_dyn_getp(r42->value,-303735098/*fragment*/,&t$vrt_f479cb2);
	r56 = hxsl_Dce_dce(r57,r44,r58);
	if( r56 == NULL ) hl_null_access();
	r44 = hl_vfields(r56)[1] ? (*(vvirtual**)(hl_vfields(r56)[1])) : (vvirtual*)hl_dyn_getp(r56->value,-515384742/*vertex*/,&t$vrt_f479cb2);
	r58 = hl_vfields(r56)[0] ? (*(vvirtual**)(hl_vfields(r56)[0])) : (vvirtual*)hl_dyn_getp(r56->value,-303735098/*fragment*/,&t$vrt_f479cb2);
	r59 = hxsl_Cache_buildRuntimeShader(r0,r44,r58,r46);
	r5 = &t$hxsl_ShaderInstanceDesc;
	r13 = 0;
	r4 = hl_alloc_array(r5,r13);
	r14 = hl_types_ArrayObj_alloc(r4);
	r8 = r1;
	r9 = NULL;
	label$2c4895f_13_339:
	if( r8 == r9 ) goto label$2c4895f_13_353;
	if( r8 == NULL ) hl_null_access();
	r11 = r8->s;
	r10 = r8->next;
	r8 = r10;
	if( r14 == NULL ) hl_null_access();
	r60 = (hxsl__ShaderInstanceDesc)hl_alloc_obj(&t$hxsl_ShaderInstanceDesc);
	if( r11 == NULL ) hl_null_access();
	r61 = r11->shader;
	r13 = r11->constBits;
	hxsl_ShaderInstanceDesc_new(r60,r61,r13);
	r13 = hl_types_ArrayObj_push(r14,((vdynamic*)r60));
	goto label$2c4895f_13_339;
	label$2c4895f_13_353:
	if( r59 == NULL ) hl_null_access();
	r63 = hl_alloc_virtual(&t$vrt_a3e2f53);
	if( hl_vfields(r63)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r63)[0]) = (hl__types__ArrayObj)r14; else hl_dyn_setp(r63->value,186287176/*instances*/,&t$hl_types_ArrayObj,r14);
	r32 = NULL;
	if( hl_vfields(r63)[1] ) *(String*)(hl_vfields(r63)[1]) = (String)r32; else hl_dyn_setp(r63->value,359375608/*signature*/,&t$String,r32);
	r59->spec = r63;
	r13 = 0;
	if( r3 == NULL ) hl_null_access();
	r23 = r3->length;
	label$2c4895f_13_362:
	if( r13 >= r23 ) goto label$2c4895f_13_395;
	r24 = r13;
	++r13;
	if( r3 == NULL ) hl_null_access();
	r54 = r3->length;
	r64 = 1;
	r54 = r54 - r64;
	r54 = r54 - r24;
	r64 = r3->length;
	if( ((unsigned)r54) < ((unsigned)r64) ) goto label$2c4895f_13_375;
	r15 = NULL;
	goto label$2c4895f_13_378;
	label$2c4895f_13_375:
	r4 = r3->array;
	r22 = ((vdynamic**)(r4 + 1))[r54];
	r15 = hl_to_virtual(&t$vrt_283fa46,(vdynamic*)r22);
	label$2c4895f_13_378:
	if( r59 == NULL ) hl_null_access();
	r63 = r59->spec;
	if( r63 == NULL ) hl_null_access();
	r25 = hl_vfields(r63)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r63)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r63->value,186287176/*instances*/,&t$hl_types_ArrayObj);
	if( r25 == NULL ) hl_null_access();
	if( r15 == NULL ) hl_null_access();
	r54 = hl_vfields(r15)[0] ? (*(int*)(hl_vfields(r15)[0])) : (int)hl_dyn_geti(r15->value,-32204280/*index*/,&t$_i32);
	r64 = r25->length;
	if( ((unsigned)r54) < ((unsigned)r64) ) goto label$2c4895f_13_389;
	r60 = NULL;
	goto label$2c4895f_13_392;
	label$2c4895f_13_389:
	r4 = r25->array;
	r22 = ((vdynamic**)(r4 + 1))[r54];
	r60 = (hxsl__ShaderInstanceDesc)r22;
	label$2c4895f_13_392:
	if( r60 == NULL ) hl_null_access();
	r60->index = r24;
	goto label$2c4895f_13_362;
	label$2c4895f_13_395:
	r5 = &t$String;
	r13 = 0;
	r4 = hl_alloc_array(r5,r13);
	r25 = hl_types_ArrayObj_alloc(r4);
	r13 = 0;
	if( r59 == NULL ) hl_null_access();
	r63 = r59->spec;
	if( r63 == NULL ) hl_null_access();
	r35 = hl_vfields(r63)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r63)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r63->value,186287176/*instances*/,&t$hl_types_ArrayObj);
	label$2c4895f_13_404:
	if( r35 == NULL ) hl_null_access();
	r24 = r35->length;
	if( r13 >= r24 ) goto label$2c4895f_13_439;
	r24 = r35->length;
	if( ((unsigned)r13) < ((unsigned)r24) ) goto label$2c4895f_13_412;
	r60 = NULL;
	goto label$2c4895f_13_415;
	label$2c4895f_13_412:
	r4 = r35->array;
	r22 = ((vdynamic**)(r4 + 1))[r13];
	r60 = (hxsl__ShaderInstanceDesc)r22;
	label$2c4895f_13_415:
	++r13;
	if( r25 == NULL ) hl_null_access();
	if( r60 == NULL ) hl_null_access();
	r61 = r60->shader;
	if( r61 == NULL ) hl_null_access();
	r44 = r61->data;
	if( r44 == NULL ) hl_null_access();
	r32 = hl_vfields(r44)[1] ? (*(String*)(hl_vfields(r44)[1])) : (String)hl_dyn_getp(r44->value,150958933/*name*/,&t$String);
	r33 = (String)s$b14a7b8;
	r32 = String___add__(r32,r33);
	r23 = r60->bits;
	r65 = &r23;
	r66 = hl_itos(r23,r65);
	r33 = String___alloc__(r66,r23);
	r32 = String___add__(r32,r33);
	r33 = (String)s$b14a7b8;
	r32 = String___add__(r32,r33);
	r23 = r60->index;
	r65 = &r23;
	r66 = hl_itos(r23,r65);
	r33 = String___alloc__(r66,r23);
	r32 = String___add__(r32,r33);
	r23 = hl_types_ArrayObj_push(r25,((vdynamic*)r32));
	goto label$2c4895f_13_404;
	label$2c4895f_13_439:
	if( r25 == NULL ) hl_null_access();
	r32 = (String)s$853ae90;
	r32 = hl_types_ArrayObj_join(r25,r32);
	if( r59 == NULL ) hl_null_access();
	r63 = r59->spec;
	if( r63 == NULL ) hl_null_access();
	r33 = haxe_crypto_Md5_encode(r32);
	if( hl_vfields(r63)[1] ) *(String*)(hl_vfields(r63)[1]) = (String)r33; else hl_dyn_setp(r63->value,359375608/*signature*/,&t$String,r33);
	r67 = r59->vertex;
	if( r67 == NULL ) hl_null_access();
	r44 = r67->data;
	r21 = NULL;
	r33 = hxsl_Printer_shaderToString(r44,r21);
	r67 = r59->fragment;
	if( r67 == NULL ) hl_null_access();
	r44 = r67->data;
	r21 = NULL;
	r34 = hxsl_Printer_shaderToString(r44,r21);
	r33 = String___add__(r33,r34);
	r33 = haxe_crypto_Md5_encode(r33);
	r59->signature = r33;
	r59->batchMode = r2;
	r68 = r0->byID;
	if( r68 == NULL ) hl_null_access();
	r33 = r59->signature;
	r22 = haxe_ds_StringMap_get(r68,r33);
	r62 = (hxsl__RuntimeShader)r22;
	if( !r62 ) goto label$2c4895f_13_471;
	if( r62 == NULL ) hl_null_access();
	r13 = r62->id;
	r59->id = r13;
	goto label$2c4895f_13_475;
	label$2c4895f_13_471:
	r68 = r0->byID;
	if( r68 == NULL ) hl_null_access();
	r33 = r59->signature;
	haxe_ds_StringMap_set(r68,r33,((vdynamic*)r59));
	label$2c4895f_13_475:
	return r59;
}

hxsl__RuntimeShader hxsl_Cache_buildRuntimeShader(hxsl__Cache r0,vvirtual* r1,vvirtual* r2,haxe__ds__IntMap r3) {
	hxsl__RuntimeShader r4;
	venum *r7;
	hxsl__RuntimeShaderData r6;
	bool r9;
	haxe__ds__IntMap r8;
	r4 = (hxsl__RuntimeShader)hl_alloc_obj(&t$hxsl_RuntimeShader);
	hxsl_RuntimeShader_new(r4);
	r7 = (venum*)g$hxsl_FunctionKind_Vertex;
	r6 = hxsl_Cache_flattenShader(r0,r1,r7,r3);
	r4->vertex = r6;
	r6 = r4->vertex;
	if( r6 == NULL ) hl_null_access();
	r9 = true;
	r6->vertex = r9;
	r7 = (venum*)g$hxsl_FunctionKind_Fragment;
	r6 = hxsl_Cache_flattenShader(r0,r2,r7,r3);
	r4->fragment = r6;
	r8 = (haxe__ds__IntMap)hl_alloc_obj(&t$haxe_ds_IntMap);
	haxe_ds_IntMap_new(r8);
	r4->globals = r8;
	r6 = r4->vertex;
	hxsl_Cache_initGlobals(r0,r4,r6);
	r6 = r4->fragment;
	hxsl_Cache_initGlobals(r0,r4,r6);
	return r4;
}

void hxsl_Cache_initGlobals(hxsl__Cache r0,hxsl__RuntimeShader r1,hxsl__RuntimeShaderData r2) {
	bool r8;
	hxsl__AllocGlobal r3, r5;
	haxe__ds__IntMap r6;
	hxsl__AllocParam r10, r11;
	vdynamic *r9;
	int r7;
	if( r2 == NULL ) hl_null_access();
	r3 = r2->globals;
	label$2c4895f_15_2:
	if( !r3 ) goto label$2c4895f_15_15;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->globals;
	if( r6 == NULL ) hl_null_access();
	if( r3 == NULL ) hl_null_access();
	r7 = r3->gid;
	r8 = true;
	r9 = hl_alloc_dynbool(r8);
	haxe_ds_IntMap_set(r6,r7,r9);
	r5 = r3->next;
	r3 = r5;
	goto label$2c4895f_15_2;
	label$2c4895f_15_15:
	if( r2 == NULL ) hl_null_access();
	r10 = r2->params;
	label$2c4895f_15_17:
	if( !r10 ) goto label$2c4895f_15_34;
	if( r10 == NULL ) hl_null_access();
	r5 = r10->perObjectGlobal;
	if( !r5 ) goto label$2c4895f_15_31;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->globals;
	if( r6 == NULL ) hl_null_access();
	r5 = r10->perObjectGlobal;
	if( r5 == NULL ) hl_null_access();
	r7 = r5->gid;
	r8 = true;
	r9 = hl_alloc_dynbool(r8);
	haxe_ds_IntMap_set(r6,r7,r9);
	label$2c4895f_15_31:
	r11 = r10->next;
	r10 = r11;
	goto label$2c4895f_15_17;
	label$2c4895f_15_34:
	return;
}

String hxsl_Cache_getPath(hxsl__Cache r0,vvirtual* r1) {
	String r3, r4;
	vvirtual *r2;
	if( r1 == NULL ) hl_null_access();
	r2 = hl_vfields(r1)[3] ? (*(vvirtual**)(hl_vfields(r1)[3])) : (vvirtual*)hl_dyn_getp(r1->value,-310508246/*parent*/,&t$vrt_09f4a29);
	if( r2 ) goto label$2c4895f_16_5;
	r3 = hl_vfields(r1)[2] ? (*(String*)(hl_vfields(r1)[2])) : (String)hl_dyn_getp(r1->value,150958933/*name*/,&t$String);
	return r3;
	label$2c4895f_16_5:
	r2 = hl_vfields(r1)[3] ? (*(vvirtual**)(hl_vfields(r1)[3])) : (vvirtual*)hl_dyn_getp(r1->value,-310508246/*parent*/,&t$vrt_09f4a29);
	r3 = hxsl_Cache_getPath(r0,r2);
	r4 = (String)s$5058f1a;
	r3 = String___add__(r3,r4);
	r4 = hl_vfields(r1)[2] ? (*(String*)(hl_vfields(r1)[2])) : (String)hl_dyn_getp(r1->value,150958933/*name*/,&t$String);
	r3 = String___add__(r3,r4);
	return r3;
}

int hxsl_Cache_flattenShader__$1(vvirtual* r0,vvirtual* r1) {
	venum *r3;
	int r2, r4;
	if( r0 == NULL ) hl_null_access();
	r3 = hl_vfields(r0)[1] ? (*(venum**)(hl_vfields(r0)[1])) : (venum*)hl_dyn_getp(r0->value,116/*t*/,&t$hxsl_Type);
	if( r3 == NULL ) hl_null_access();
	r2 = HL__ENUM_INDEX__(r3);
	if( r1 == NULL ) hl_null_access();
	r3 = hl_vfields(r1)[1] ? (*(venum**)(hl_vfields(r1)[1])) : (venum*)hl_dyn_getp(r1->value,116/*t*/,&t$hxsl_Type);
	if( r3 == NULL ) hl_null_access();
	r4 = HL__ENUM_INDEX__(r3);
	r2 = r2 - r4;
	return r2;
}

hxsl__RuntimeShaderData hxsl_Cache_flattenShader(hxsl__Cache r0,vvirtual* r1,venum* r2,haxe__ds__IntMap r3) {
	String r22;
	haxe__ds__ObjectMap r15;
	hl__types__ArrayObj r9, r20, r23, r26;
	vvirtual *r7, *r14, *r17, *r18, *r19, *r36, *r40;
	venum *r21, *r29, *r33, *r34, *r35;
	hl_type *r11;
	hxsl__RuntimeShaderData r6;
	bool r8;
	hxsl__AllocGlobal r28, r32;
	hxsl__Flatten r4;
	hxsl__AllocParam r37, r38, r43;
	hxsl___Flatten__Alloc r27;
	hl__types__ArrayBytes_Float r13;
	vclosure *r41, *r42;
	vdynamic *r16;
	int r12, r24, r25, r30, r31, r39;
	varray *r10;
	static vclosure cl$0 = { &t$fun_ba16e83, hxsl_Cache_flattenShader__$1, 0 };
	r4 = (hxsl__Flatten)hl_alloc_obj(&t$hxsl_Flatten);
	hxsl_Flatten_new(r4);
	r6 = (hxsl__RuntimeShaderData)hl_alloc_obj(&t$hxsl_RuntimeShaderData);
	hxsl_RuntimeShaderData_new(r6);
	r8 = r0->constsToGlobal;
	r7 = hxsl_Flatten_flatten(r4,r1,r2,r8);
	r11 = &t$vrt_7c116e9;
	r12 = 0;
	r10 = hl_alloc_array(r11,r12);
	r9 = hl_types_ArrayObj_alloc(r10);
	r13 = r4->consts;
	r6->consts = r13;
	r12 = 0;
	r6->texturesCount = r12;
	r15 = r4->allocData;
	if( r15 == NULL ) hl_null_access();
	r14 = haxe_ds_ObjectMap_keys(r15);
	r17 = hl_to_virtual(&t$vrt_11e33cd,(vdynamic*)r14);
	label$2c4895f_18_18:
	if( r17 == NULL ) hl_null_access();
	if( hl_vfields(r17)[0] ) r8 = ((bool (*)(vdynamic*))hl_vfields(r17)[0])(r17->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r17->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r8 = (bool)ret.v.i;
	}
	if( !r8 ) goto label$2c4895f_18_343;
	if( hl_vfields(r17)[1] ) r18 = ((vvirtual* (*)(vdynamic*))hl_vfields(r17)[1])(r17->value); else {
		r18 = (vvirtual*)hl_dyn_call_obj(r17->value,&t$fun_32c99d1,151160317/*next*/,NULL,NULL);
	}
	if( r4 == NULL ) hl_null_access();
	r15 = r4->allocData;
	if( r15 == NULL ) hl_null_access();
	r16 = haxe_ds_ObjectMap_get(r15,((vdynamic*)r18));
	r20 = (hl__types__ArrayObj)hl_dyn_castp(&r16,&t$_dyn,&t$hl_types_ArrayObj);
	if( r18 == NULL ) hl_null_access();
	r21 = hl_vfields(r18)[1] ? (*(venum**)(hl_vfields(r18)[1])) : (venum*)hl_dyn_getp(r18->value,118088286/*kind*/,&t$hxsl_VarKind);
	if( r21 == NULL ) hl_null_access();
	r12 = HL__ENUM_INDEX__(r21);
	switch(r12) {
		default:
		case 1:
			r22 = (String)s$assert;
			hl_throw((vdynamic*)r22);
		case 0:
			r11 = &t$hxsl_AllocGlobal;
			r12 = 0;
			r10 = hl_alloc_array(r11,r12);
			r23 = hl_types_ArrayObj_alloc(r10);
			r12 = 0;
			label$2c4895f_18_40:
			if( r20 == NULL ) hl_null_access();
			r25 = r20->length;
			if( r12 >= r25 ) goto label$2c4895f_18_66;
			r25 = r20->length;
			if( ((unsigned)r12) < ((unsigned)r25) ) goto label$2c4895f_18_48;
			r27 = NULL;
			goto label$2c4895f_18_51;
			label$2c4895f_18_48:
			r10 = r20->array;
			r16 = ((vdynamic**)(r10 + 1))[r12];
			r27 = (hxsl___Flatten__Alloc)r16;
			label$2c4895f_18_51:
			++r12;
			if( r27 == NULL ) hl_null_access();
			r19 = r27->v;
			if( !r19 ) goto label$2c4895f_18_65;
			if( r23 == NULL ) hl_null_access();
			r28 = (hxsl__AllocGlobal)hl_alloc_obj(&t$hxsl_AllocGlobal);
			r24 = r27->pos;
			r19 = r27->v;
			r22 = hxsl_Cache_getPath(r0,r19);
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r29 = hl_vfields(r19)[5] ? (*(venum**)(hl_vfields(r19)[5])) : (venum*)hl_dyn_getp(r19->value,218690500/*type*/,&t$hxsl_Type);
			hxsl_AllocGlobal_new(r28,r24,r22,r29);
			r24 = hl_types_ArrayObj_push(r23,((vdynamic*)r28));
			label$2c4895f_18_65:
			goto label$2c4895f_18_40;
			label$2c4895f_18_66:
			r26 = r23;
			r12 = 0;
			if( r23 == NULL ) hl_null_access();
			r24 = r23->length;
			r25 = 1;
			r24 = r24 - r25;
			label$2c4895f_18_72:
			if( r12 >= r24 ) goto label$2c4895f_18_96;
			r25 = r12;
			++r12;
			if( r26 == NULL ) hl_null_access();
			r31 = r26->length;
			if( ((unsigned)r25) < ((unsigned)r31) ) goto label$2c4895f_18_81;
			r28 = NULL;
			goto label$2c4895f_18_84;
			label$2c4895f_18_81:
			r10 = r26->array;
			r16 = ((vdynamic**)(r10 + 1))[r25];
			r28 = (hxsl__AllocGlobal)r16;
			label$2c4895f_18_84:
			if( r28 == NULL ) hl_null_access();
			r31 = 1;
			r30 = r25 + r31;
			r31 = r26->length;
			if( ((unsigned)r30) < ((unsigned)r31) ) goto label$2c4895f_18_91;
			r32 = NULL;
			goto label$2c4895f_18_94;
			label$2c4895f_18_91:
			r10 = r26->array;
			r16 = ((vdynamic**)(r10 + 1))[r30];
			r32 = (hxsl__AllocGlobal)r16;
			label$2c4895f_18_94:
			r28->next = r32;
			goto label$2c4895f_18_72;
			label$2c4895f_18_96:
			if( r18 == NULL ) hl_null_access();
			r29 = hl_vfields(r18)[5] ? (*(venum**)(hl_vfields(r18)[5])) : (venum*)hl_dyn_getp(r18->value,218690500/*type*/,&t$hxsl_Type);
			if( r29 == NULL ) hl_null_access();
			r12 = HL__ENUM_INDEX__(r29);
			r24 = 15;
			if( r12 != r24 ) goto label$2c4895f_18_146;
			r33 = ((hxsl_Type_TArray*)r29)->p0;
			r34 = ((hxsl_Type_TArray*)r29)->p1;
			if( r33 == NULL ) hl_null_access();
			r12 = HL__ENUM_INDEX__(r33);
			r24 = 5;
			if( r12 != r24 ) goto label$2c4895f_18_143;
			r12 = ((hxsl_Type_TVec*)r33)->p0;
			r24 = 4;
			if( r12 != r24 ) goto label$2c4895f_18_140;
			r35 = ((hxsl_Type_TVec*)r33)->p1;
			if( r35 == NULL ) hl_null_access();
			r12 = HL__ENUM_INDEX__(r35);
			r24 = 1;
			if( r12 != r24 ) goto label$2c4895f_18_137;
			if( r34 == NULL ) hl_null_access();
			r12 = HL__ENUM_INDEX__(r34);
			r24 = 0;
			if( r12 != r24 ) goto label$2c4895f_18_134;
			r12 = ((hxsl_SizeDecl_SConst*)r34)->p0;
			if( r6 == NULL ) hl_null_access();
			if( r26 == NULL ) hl_null_access();
			r24 = 0;
			r25 = r26->length;
			if( ((unsigned)r24) < ((unsigned)r25) ) goto label$2c4895f_18_128;
			r28 = NULL;
			goto label$2c4895f_18_131;
			label$2c4895f_18_128:
			r10 = r26->array;
			r16 = ((vdynamic**)(r10 + 1))[r24];
			r28 = (hxsl__AllocGlobal)r16;
			label$2c4895f_18_131:
			r6->globals = r28;
			r6->globalsSize = r12;
			goto label$2c4895f_18_136;
			label$2c4895f_18_134:
			r22 = (String)s$assert;
			hl_throw((vdynamic*)r22);
			label$2c4895f_18_136:
			goto label$2c4895f_18_139;
			label$2c4895f_18_137:
			r22 = (String)s$assert;
			hl_throw((vdynamic*)r22);
			label$2c4895f_18_139:
			goto label$2c4895f_18_142;
			label$2c4895f_18_140:
			r22 = (String)s$assert;
			hl_throw((vdynamic*)r22);
			label$2c4895f_18_142:
			goto label$2c4895f_18_145;
			label$2c4895f_18_143:
			r22 = (String)s$assert;
			hl_throw((vdynamic*)r22);
			label$2c4895f_18_145:
			goto label$2c4895f_18_148;
			label$2c4895f_18_146:
			r22 = (String)s$assert;
			hl_throw((vdynamic*)r22);
			label$2c4895f_18_148:
			goto label$2c4895f_18_342;
		case 2:
			r11 = &t$hxsl_AllocParam;
			r12 = 0;
			r10 = hl_alloc_array(r11,r12);
			r23 = hl_types_ArrayObj_alloc(r10);
			r12 = 0;
			r24 = 0;
			label$2c4895f_18_155:
			if( r20 == NULL ) hl_null_access();
			r30 = r20->length;
			if( r24 >= r30 ) goto label$2c4895f_18_237;
			r30 = r20->length;
			if( ((unsigned)r24) < ((unsigned)r30) ) goto label$2c4895f_18_163;
			r27 = NULL;
			goto label$2c4895f_18_166;
			label$2c4895f_18_163:
			r10 = r20->array;
			r16 = ((vdynamic**)(r10 + 1))[r24];
			r27 = (hxsl___Flatten__Alloc)r16;
			label$2c4895f_18_166:
			++r24;
			if( r27 == NULL ) hl_null_access();
			r19 = r27->v;
			if( r19 ) goto label$2c4895f_18_171;
			goto label$2c4895f_18_155;
			label$2c4895f_18_171:
			if( r3 == NULL ) hl_null_access();
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r25 = hl_vfields(r19)[0] ? (*(int*)(hl_vfields(r19)[0])) : (int)hl_dyn_geti(r19->value,23515/*id*/,&t$_i32);
			r16 = haxe_ds_IntMap_get(r3,r25);
			r36 = hl_to_virtual(&t$vrt_7e2476c,(vdynamic*)r16);
			if( r36 ) goto label$2c4895f_18_202;
			r37 = (hxsl__AllocParam)hl_alloc_obj(&t$hxsl_AllocParam);
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r22 = hl_vfields(r19)[2] ? (*(String*)(hl_vfields(r19)[2])) : (String)hl_dyn_getp(r19->value,150958933/*name*/,&t$String);
			r25 = r27->pos;
			r30 = -1;
			r31 = -1;
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r29 = hl_vfields(r19)[5] ? (*(venum**)(hl_vfields(r19)[5])) : (venum*)hl_dyn_getp(r19->value,218690500/*type*/,&t$hxsl_Type);
			hxsl_AllocParam_new(r37,r22,r25,r30,r31,r29);
			r28 = (hxsl__AllocGlobal)hl_alloc_obj(&t$hxsl_AllocGlobal);
			r25 = -1;
			r19 = r27->v;
			r22 = hxsl_Cache_getPath(r0,r19);
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r29 = hl_vfields(r19)[5] ? (*(venum**)(hl_vfields(r19)[5])) : (venum*)hl_dyn_getp(r19->value,218690500/*type*/,&t$hxsl_Type);
			hxsl_AllocGlobal_new(r28,r25,r22,r29);
			r37->perObjectGlobal = r28;
			if( r23 == NULL ) hl_null_access();
			r25 = hl_types_ArrayObj_push(r23,((vdynamic*)r37));
			++r12;
			goto label$2c4895f_18_155;
			label$2c4895f_18_202:
			r37 = (hxsl__AllocParam)hl_alloc_obj(&t$hxsl_AllocParam);
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r22 = hl_vfields(r19)[2] ? (*(String*)(hl_vfields(r19)[2])) : (String)hl_dyn_getp(r19->value,150958933/*name*/,&t$String);
			r25 = r27->pos;
			if( r36 == NULL ) hl_null_access();
			r30 = hl_vfields(r36)[1] ? (*(int*)(hl_vfields(r36)[1])) : (int)hl_dyn_geti(r36->value,434184351/*instance*/,&t$_i32);
			r31 = hl_vfields(r36)[0] ? (*(int*)(hl_vfields(r36)[0])) : (int)hl_dyn_geti(r36->value,-32204280/*index*/,&t$_i32);
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r29 = hl_vfields(r19)[5] ? (*(venum**)(hl_vfields(r19)[5])) : (venum*)hl_dyn_getp(r19->value,218690500/*type*/,&t$hxsl_Type);
			hxsl_AllocParam_new(r37,r22,r25,r30,r31,r29);
			r19 = r27->v;
			if( r19 == NULL ) hl_null_access();
			r29 = hl_vfields(r19)[5] ? (*(venum**)(hl_vfields(r19)[5])) : (venum*)hl_dyn_getp(r19->value,218690500/*type*/,&t$hxsl_Type);
			if( r29 == NULL ) hl_null_access();
			r25 = HL__ENUM_INDEX__(r29);
			r30 = 15;
			if( r25 != r30 ) goto label$2c4895f_18_233;
			r33 = ((hxsl_Type_TArray*)r29)->p0;
			r8 = hxsl_Tools_isSampler(r33);
			if( !r8 ) goto label$2c4895f_18_231;
			r25 = r27->size;
			r25 = -r25;
			r37->pos = r25;
			r30 = r27->size;
			r25 = r12 + r30;
			r12 = r25;
			goto label$2c4895f_18_232;
			label$2c4895f_18_231:
			++r12;
			label$2c4895f_18_232:
			goto label$2c4895f_18_234;
			label$2c4895f_18_233:
			++r12;
			label$2c4895f_18_234:
			if( r23 == NULL ) hl_null_access();
			r25 = hl_types_ArrayObj_push(r23,((vdynamic*)r37));
			goto label$2c4895f_18_155;
			label$2c4895f_18_237:
			r24 = 0;
			if( r23 == NULL ) hl_null_access();
			r25 = r23->length;
			r30 = 1;
			r25 = r25 - r30;
			label$2c4895f_18_242:
			if( r24 >= r25 ) goto label$2c4895f_18_266;
			r30 = r24;
			++r24;
			if( r23 == NULL ) hl_null_access();
			r39 = r23->length;
			if( ((unsigned)r30) < ((unsigned)r39) ) goto label$2c4895f_18_251;
			r37 = NULL;
			goto label$2c4895f_18_254;
			label$2c4895f_18_251:
			r10 = r23->array;
			r16 = ((vdynamic**)(r10 + 1))[r30];
			r37 = (hxsl__AllocParam)r16;
			label$2c4895f_18_254:
			if( r37 == NULL ) hl_null_access();
			r39 = 1;
			r31 = r30 + r39;
			r39 = r23->length;
			if( ((unsigned)r31) < ((unsigned)r39) ) goto label$2c4895f_18_261;
			r38 = NULL;
			goto label$2c4895f_18_264;
			label$2c4895f_18_261:
			r10 = r23->array;
			r16 = ((vdynamic**)(r10 + 1))[r31];
			r38 = (hxsl__AllocParam)r16;
			label$2c4895f_18_264:
			r37->next = r38;
			goto label$2c4895f_18_242;
			label$2c4895f_18_266:
			if( r18 == NULL ) hl_null_access();
			r29 = hl_vfields(r18)[5] ? (*(venum**)(hl_vfields(r18)[5])) : (venum*)hl_dyn_getp(r18->value,218690500/*type*/,&t$hxsl_Type);
			if( r29 == NULL ) hl_null_access();
			r24 = HL__ENUM_INDEX__(r29);
			r25 = 15;
			if( r24 != r25 ) goto label$2c4895f_18_340;
			r33 = ((hxsl_Type_TArray*)r29)->p0;
			r34 = ((hxsl_Type_TArray*)r29)->p1;
			r8 = hxsl_Tools_isSampler(r33);
			if( !r8 ) goto label$2c4895f_18_286;
			if( r9 == NULL ) hl_null_access();
			r40 = hl_alloc_virtual(&t$vrt_7c116e9);
			if( hl_vfields(r40)[1] ) *(venum**)(hl_vfields(r40)[1]) = (venum*)r33; else hl_dyn_setp(r40->value,116/*t*/,&t$hxsl_Type,r33);
			if( hl_vfields(r40)[0] ) *(hl__types__ArrayObj*)(hl_vfields(r40)[0]) = (hl__types__ArrayObj)r23; else hl_dyn_setp(r40->value,4847905/*all*/,&t$hl_types_ArrayObj,r23);
			r24 = hl_types_ArrayObj_push(r9,((vdynamic*)r40));
			if( r6 == NULL ) hl_null_access();
			r24 = r6->texturesCount;
			r24 = r24 + r12;
			r6->texturesCount = r24;
			goto label$2c4895f_18_339;
			label$2c4895f_18_286:
			if( r33 == NULL ) hl_null_access();
			r24 = HL__ENUM_INDEX__(r33);
			switch(r24) {
				default:
				case 0:
				case 1:
				case 2:
				case 3:
				case 4:
				case 6:
				case 7:
				case 8:
				case 9:
				case 10:
				case 11:
				case 12:
				case 13:
				case 14:
				case 15:
					r22 = (String)s$assert;
					hl_throw((vdynamic*)r22);
				case 5:
					r24 = ((hxsl_Type_TVec*)r33)->p0;
					r25 = 4;
					if( r24 != r25 ) goto label$2c4895f_18_323;
					r35 = ((hxsl_Type_TVec*)r33)->p1;
					if( r35 == NULL ) hl_null_access();
					r24 = HL__ENUM_INDEX__(r35);
					r25 = 1;
					if( r24 != r25 ) goto label$2c4895f_18_320;
					if( r34 == NULL ) hl_null_access();
					r24 = HL__ENUM_INDEX__(r34);
					r25 = 0;
					if( r24 != r25 ) goto label$2c4895f_18_317;
					r24 = ((hxsl_SizeDecl_SConst*)r34)->p0;
					if( r6 == NULL ) hl_null_access();
					if( r23 == NULL ) hl_null_access();
					r25 = 0;
					r30 = r23->length;
					if( ((unsigned)r25) < ((unsigned)r30) ) goto label$2c4895f_18_311;
					r37 = NULL;
					goto label$2c4895f_18_314;
					label$2c4895f_18_311:
					r10 = r23->array;
					r16 = ((vdynamic**)(r10 + 1))[r25];
					r37 = (hxsl__AllocParam)r16;
					label$2c4895f_18_314:
					r6->params = r37;
					r6->paramsSize = r24;
					goto label$2c4895f_18_319;
					label$2c4895f_18_317:
					r22 = (String)s$assert;
					hl_throw((vdynamic*)r22);
					label$2c4895f_18_319:
					goto label$2c4895f_18_322;
					label$2c4895f_18_320:
					r22 = (String)s$assert;
					hl_throw((vdynamic*)r22);
					label$2c4895f_18_322:
					goto label$2c4895f_18_325;
					label$2c4895f_18_323:
					r22 = (String)s$assert;
					hl_throw((vdynamic*)r22);
					label$2c4895f_18_325:
					goto label$2c4895f_18_339;
				case 16:
					if( r6 == NULL ) hl_null_access();
					if( r23 == NULL ) hl_null_access();
					r24 = 0;
					r25 = r23->length;
					if( ((unsigned)r24) < ((unsigned)r25) ) goto label$2c4895f_18_333;
					r37 = NULL;
					goto label$2c4895f_18_336;
					label$2c4895f_18_333:
					r10 = r23->array;
					r16 = ((vdynamic**)(r10 + 1))[r24];
					r37 = (hxsl__AllocParam)r16;
					label$2c4895f_18_336:
					r6->buffers = r37;
					r24 = r23->length;
					r6->bufferCount = r24;
			}
			label$2c4895f_18_339:
			goto label$2c4895f_18_342;
			label$2c4895f_18_340:
			r22 = (String)s$assert;
			hl_throw((vdynamic*)r22);
	}
	label$2c4895f_18_342:
	goto label$2c4895f_18_18;
	label$2c4895f_18_343:
	if( r9 == NULL ) hl_null_access();
	r12 = r9->length;
	r24 = 0;
	if( r24 >= r12 ) goto label$2c4895f_18_424;
	r41 = &cl$0;
	if( r41 ) goto label$2c4895f_18_351;
	r42 = NULL;
	goto label$2c4895f_18_352;
	label$2c4895f_18_351:
	r42 = hl_alloc_closure_ptr(&t$fun_aafc2df,hxsl_Cache_flattenShader__$2,r41);
	label$2c4895f_18_352:
	hl_types_ArrayObj_sort(r9,r42);
	if( r6 == NULL ) hl_null_access();
	r12 = 0;
	r24 = r9->length;
	if( ((unsigned)r12) < ((unsigned)r24) ) goto label$2c4895f_18_359;
	r40 = NULL;
	goto label$2c4895f_18_362;
	label$2c4895f_18_359:
	r10 = r9->array;
	r16 = ((vdynamic**)(r10 + 1))[r12];
	r40 = hl_to_virtual(&t$vrt_7c116e9,(vdynamic*)r16);
	label$2c4895f_18_362:
	if( r40 == NULL ) hl_null_access();
	r20 = hl_vfields(r40)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r40)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r40->value,4847905/*all*/,&t$hl_types_ArrayObj);
	if( r20 == NULL ) hl_null_access();
	r12 = 0;
	r24 = r20->length;
	if( ((unsigned)r12) < ((unsigned)r24) ) goto label$2c4895f_18_370;
	r37 = NULL;
	goto label$2c4895f_18_373;
	label$2c4895f_18_370:
	r10 = r20->array;
	r16 = ((vdynamic**)(r10 + 1))[r12];
	r37 = (hxsl__AllocParam)r16;
	label$2c4895f_18_373:
	r6->textures = r37;
	r12 = 1;
	r24 = r9->length;
	label$2c4895f_18_376:
	if( r12 >= r24 ) goto label$2c4895f_18_424;
	r25 = r12;
	++r12;
	if( r9 == NULL ) hl_null_access();
	r31 = 1;
	r30 = r25 - r31;
	r31 = r9->length;
	if( ((unsigned)r30) < ((unsigned)r31) ) goto label$2c4895f_18_387;
	r40 = NULL;
	goto label$2c4895f_18_390;
	label$2c4895f_18_387:
	r10 = r9->array;
	r16 = ((vdynamic**)(r10 + 1))[r30];
	r40 = hl_to_virtual(&t$vrt_7c116e9,(vdynamic*)r16);
	label$2c4895f_18_390:
	if( r40 == NULL ) hl_null_access();
	r20 = hl_vfields(r40)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r40)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r40->value,4847905/*all*/,&t$hl_types_ArrayObj);
	if( r20 == NULL ) hl_null_access();
	r30 = r20->length;
	r31 = 1;
	r30 = r30 - r31;
	r31 = r20->length;
	if( ((unsigned)r30) < ((unsigned)r31) ) goto label$2c4895f_18_400;
	r37 = NULL;
	goto label$2c4895f_18_403;
	label$2c4895f_18_400:
	r10 = r20->array;
	r16 = ((vdynamic**)(r10 + 1))[r30];
	r37 = (hxsl__AllocParam)r16;
	label$2c4895f_18_403:
	if( r37 == NULL ) hl_null_access();
	r31 = r9->length;
	if( ((unsigned)r25) < ((unsigned)r31) ) goto label$2c4895f_18_408;
	r40 = NULL;
	goto label$2c4895f_18_411;
	label$2c4895f_18_408:
	r10 = r9->array;
	r16 = ((vdynamic**)(r10 + 1))[r25];
	r40 = hl_to_virtual(&t$vrt_7c116e9,(vdynamic*)r16);
	label$2c4895f_18_411:
	if( r40 == NULL ) hl_null_access();
	r23 = hl_vfields(r40)[0] ? (*(hl__types__ArrayObj*)(hl_vfields(r40)[0])) : (hl__types__ArrayObj)hl_dyn_getp(r40->value,4847905/*all*/,&t$hl_types_ArrayObj);
	if( r23 == NULL ) hl_null_access();
	r30 = 0;
	r31 = r23->length;
	if( ((unsigned)r30) < ((unsigned)r31) ) goto label$2c4895f_18_419;
	r43 = NULL;
	goto label$2c4895f_18_422;
	label$2c4895f_18_419:
	r10 = r23->array;
	r16 = ((vdynamic**)(r10 + 1))[r30];
	r43 = (hxsl__AllocParam)r16;
	label$2c4895f_18_422:
	r37->next = r43;
	goto label$2c4895f_18_376;
	label$2c4895f_18_424:
	if( r6 == NULL ) hl_null_access();
	r28 = r6->globals;
	if( r28 ) goto label$2c4895f_18_429;
	r12 = 0;
	r6->globalsSize = r12;
	label$2c4895f_18_429:
	r37 = r6->params;
	if( r37 ) goto label$2c4895f_18_433;
	r12 = 0;
	r6->paramsSize = r12;
	label$2c4895f_18_433:
	r37 = r6->buffers;
	if( r37 ) goto label$2c4895f_18_437;
	r12 = 0;
	r6->bufferCount = r12;
	label$2c4895f_18_437:
	r6->data = r7;
	return r6;
}

hxsl__Cache hxsl_Cache_get() {
	hxsl__Cache r0, r3;
	hxsl__$Cache r1;
	r1 = (hxsl__$Cache)g$_hxsl_Cache;
	r0 = r1->INST;
	if( r0 ) goto label$2c4895f_19_8;
	r3 = (hxsl__Cache)hl_alloc_obj(&t$hxsl_Cache);
	hxsl_Cache_new(r3);
	r0 = r3;
	r1 = (hxsl__$Cache)g$_hxsl_Cache;
	r1->INST = r3;
	label$2c4895f_19_8:
	return r0;
}

