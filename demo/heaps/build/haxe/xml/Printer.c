// Generated by HLC 5.0.0 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <haxe/xml/Printer.h>
extern hl_type t$haxe_xml_Printer;
void haxe_xml_Printer_new(haxe__xml__Printer,bool);
extern String s$;
void haxe_xml_Printer_writeNode(haxe__xml__Printer,Xml,String);
String StringBuf_toString(StringBuf);
extern hl_type t$StringBuf;
void StringBuf_new(StringBuf);
#include <_std/Xml.h>
#include <haxe/iterators/ArrayIterator.h>
#include <hl/types/ArrayObj.h>
#include <hl/types/ArrayDyn.h>
#include <_std/EReg.h>
extern String s$524a507;
String String___add__(String,String);
void StringBuf_add(StringBuf,vdynamic*);
extern $Xml g$_Xml;
extern String s$63ec124;
String _Xml_XmlType_Impl__toString(int);
vvirtual* Xml_attributes(Xml);
extern hl_type t$fun_bf7849e;
extern hl_type t$fun_820f49a;
extern String s$7215ee9;
extern String s$15b400f;
String Xml_get(Xml,String);
String StringTools_htmlEscape(String,vdynamic*);
extern String s$b15835f;
bool haxe_xml_Printer_hasChildren(haxe__xml__Printer,Xml);
extern String s$cedf8da;
extern String s$68b329d;
extern String s$925902a;
extern hl_type t$haxe_iterators_ArrayIterator;
extern hl_type t$hl_types_ArrayDyn;
extern hl_type t$hl_types_ArrayObj;
void haxe_iterators_ArrayIterator_new(haxe__iterators__ArrayIterator,hl__types__ArrayDyn);
extern hl_type t$vrt_15cf21a;
extern hl_type t$fun_efa96ab;
extern String s$5e732a1;
extern String s$0c69b6d;
extern String s$18f68d1;
extern String s$Bad_node_type_unexpected_;
extern String s$_CDATA_;
extern String s$a493bdd;
extern hl_type t$EReg;
extern String s$7d574b5;
extern String s$g;
void EReg_new(EReg,String,String);
String EReg_replace(EReg,String,String);
extern String s$c11bb7e;
extern String s$9a73e5b;
String StringTools_trim(String);
extern String s$_DOCTYPE_;
extern String s$b5a6ed8;
extern String s$6ec256c;
String StringTools_ltrim(String);

String haxe_xml_Printer_print(Xml r0,vdynamic* r1) {
	String r5;
	bool r2;
	haxe__xml__Printer r3;
	StringBuf r6;
	if( r1 ) goto label$417020e_1_3;
	r2 = false;
	r1 = hl_alloc_dynbool(r2);
	label$417020e_1_3:
	r3 = (haxe__xml__Printer)hl_alloc_obj(&t$haxe_xml_Printer);
	r2 = r1 ? r1->v.b : 0;
	haxe_xml_Printer_new(r3,r2);
	r5 = (String)s$;
	haxe_xml_Printer_writeNode(r3,r0,r5);
	r6 = r3->output;
	if( r6 == NULL ) hl_null_access();
	r5 = StringBuf_toString(r6);
	return r5;
}

void haxe_xml_Printer_new(haxe__xml__Printer r0,bool r1) {
	StringBuf r2;
	r2 = (StringBuf)hl_alloc_obj(&t$StringBuf);
	StringBuf_new(r2);
	r0->output = r2;
	r0->pretty = r1;
	return;
}

void haxe_xml_Printer_writeNode(haxe__xml__Printer r0,Xml r1,String r2) {
	String r7, r8, r13;
	hl__types__ArrayObj r16;
	vvirtual *r11, *r18;
	bool r12;
	EReg r19;
	haxe__iterators__ArrayIterator r15;
	$Xml r10;
	Xml r5;
	StringBuf r6;
	hl__types__ArrayDyn r17;
	vdynamic *r14;
	int r4, r9;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->nodeType;
	switch(r4) {
		default:
			goto label$417020e_3_318;
		case 0:
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r8 = (String)s$524a507;
			r7 = String___add__(r2,r8);
			StringBuf_add(r6,((vdynamic*)r7));
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Element;
			if( r4 == r9 ) goto label$417020e_3_18;
			r7 = (String)s$63ec124;
			r4 = r1->nodeType;
			r8 = _Xml_XmlType_Impl__toString(r4);
			r7 = String___add__(r7,r8);
			hl_throw((vdynamic*)r7);
			label$417020e_3_18:
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = r1->nodeName;
			StringBuf_add(r6,((vdynamic*)r7));
			r11 = Xml_attributes(r1);
			label$417020e_3_23:
			if( r11 == NULL ) hl_null_access();
			if( hl_vfields(r11)[0] ) r12 = ((bool (*)(vdynamic*))hl_vfields(r11)[0])(r11->value); else {
				vdynamic ret;
				hl_dyn_call_obj(r11->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
				r12 = (bool)ret.v.i;
			}
			if( !r12 ) goto label$417020e_3_48;
			if( hl_vfields(r11)[1] ) r7 = ((String (*)(vdynamic*))hl_vfields(r11)[1])(r11->value); else {
				r7 = (String)hl_dyn_call_obj(r11->value,&t$fun_820f49a,151160317/*next*/,NULL,NULL);
			}
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r8 = (String)s$7215ee9;
			r8 = String___add__(r8,r7);
			r13 = (String)s$15b400f;
			r8 = String___add__(r8,r13);
			StringBuf_add(r6,((vdynamic*)r8));
			if( r1 == NULL ) hl_null_access();
			r8 = Xml_get(r1,r7);
			r12 = true;
			r14 = hl_alloc_dynbool(r12);
			r8 = StringTools_htmlEscape(r8,r14);
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			StringBuf_add(r6,((vdynamic*)r8));
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r8 = (String)s$b15835f;
			StringBuf_add(r6,((vdynamic*)r8));
			goto label$417020e_3_23;
			label$417020e_3_48:
			r12 = haxe_xml_Printer_hasChildren(r0,r1);
			if( !r12 ) goto label$417020e_3_122;
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = (String)s$cedf8da;
			StringBuf_add(r6,((vdynamic*)r7));
			r12 = r0->pretty;
			if( !r12 ) goto label$417020e_3_60;
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = (String)s$68b329d;
			StringBuf_add(r6,((vdynamic*)r7));
			label$417020e_3_60:
			if( r1 == NULL ) hl_null_access();
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Document;
			if( r4 == r9 ) goto label$417020e_3_74;
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Element;
			if( r4 == r9 ) goto label$417020e_3_74;
			r7 = (String)s$925902a;
			r4 = r1->nodeType;
			r8 = _Xml_XmlType_Impl__toString(r4);
			r7 = String___add__(r7,r8);
			hl_throw((vdynamic*)r7);
			label$417020e_3_74:
			r15 = (haxe__iterators__ArrayIterator)hl_alloc_obj(&t$haxe_iterators_ArrayIterator);
			r16 = r1->children;
			r17 = (hl__types__ArrayDyn)hl_dyn_castp(&r16,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
			haxe_iterators_ArrayIterator_new(r15,r17);
			r18 = hl_to_virtual(&t$vrt_15cf21a,(vdynamic*)r15);
			label$417020e_3_79:
			if( r18 == NULL ) hl_null_access();
			if( hl_vfields(r18)[0] ) r12 = ((bool (*)(vdynamic*))hl_vfields(r18)[0])(r18->value); else {
				vdynamic ret;
				hl_dyn_call_obj(r18->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
				r12 = (bool)ret.v.i;
			}
			if( !r12 ) goto label$417020e_3_92;
			if( hl_vfields(r18)[1] ) r5 = ((Xml (*)(vdynamic*))hl_vfields(r18)[1])(r18->value); else {
				r5 = (Xml)hl_dyn_call_obj(r18->value,&t$fun_efa96ab,151160317/*next*/,NULL,NULL);
			}
			r12 = r0->pretty;
			if( !r12 ) goto label$417020e_3_89;
			r8 = (String)s$5e732a1;
			r7 = String___add__(r2,r8);
			goto label$417020e_3_90;
			label$417020e_3_89:
			r7 = r2;
			label$417020e_3_90:
			haxe_xml_Printer_writeNode(r0,r5,r7);
			goto label$417020e_3_79;
			label$417020e_3_92:
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r8 = (String)s$0c69b6d;
			r7 = String___add__(r2,r8);
			StringBuf_add(r6,((vdynamic*)r7));
			if( r1 == NULL ) hl_null_access();
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Element;
			if( r4 == r9 ) goto label$417020e_3_107;
			r7 = (String)s$63ec124;
			r4 = r1->nodeType;
			r8 = _Xml_XmlType_Impl__toString(r4);
			r7 = String___add__(r7,r8);
			hl_throw((vdynamic*)r7);
			label$417020e_3_107:
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = r1->nodeName;
			StringBuf_add(r6,((vdynamic*)r7));
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = (String)s$cedf8da;
			StringBuf_add(r6,((vdynamic*)r7));
			r12 = r0->pretty;
			if( !r12 ) goto label$417020e_3_121;
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = (String)s$68b329d;
			StringBuf_add(r6,((vdynamic*)r7));
			label$417020e_3_121:
			goto label$417020e_3_132;
			label$417020e_3_122:
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = (String)s$18f68d1;
			StringBuf_add(r6,((vdynamic*)r7));
			r12 = r0->pretty;
			if( !r12 ) goto label$417020e_3_132;
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = (String)s$68b329d;
			StringBuf_add(r6,((vdynamic*)r7));
			label$417020e_3_132:
			goto label$417020e_3_318;
		case 1:
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Document;
			if( r4 == r9 ) goto label$417020e_3_141;
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Element;
			if( r4 != r9 ) goto label$417020e_3_146;
			label$417020e_3_141:
			r7 = (String)s$Bad_node_type_unexpected_;
			r4 = r1->nodeType;
			r8 = _Xml_XmlType_Impl__toString(r4);
			r7 = String___add__(r7,r8);
			hl_throw((vdynamic*)r7);
			label$417020e_3_146:
			r7 = r1->nodeValue;
			if( r7 == NULL ) hl_null_access();
			r4 = r7->length;
			r9 = 0;
			if( r4 == r9 ) goto label$417020e_3_163;
			r14 = NULL;
			r13 = StringTools_htmlEscape(r7,r14);
			r8 = String___add__(r2,r13);
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			StringBuf_add(r6,((vdynamic*)r8));
			r12 = r0->pretty;
			if( !r12 ) goto label$417020e_3_163;
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r8 = (String)s$68b329d;
			StringBuf_add(r6,((vdynamic*)r8));
			label$417020e_3_163:
			goto label$417020e_3_318;
		case 2:
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r8 = (String)s$_CDATA_;
			r7 = String___add__(r2,r8);
			StringBuf_add(r6,((vdynamic*)r7));
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Document;
			if( r4 == r9 ) goto label$417020e_3_177;
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Element;
			if( r4 != r9 ) goto label$417020e_3_182;
			label$417020e_3_177:
			r7 = (String)s$Bad_node_type_unexpected_;
			r4 = r1->nodeType;
			r8 = _Xml_XmlType_Impl__toString(r4);
			r7 = String___add__(r7,r8);
			hl_throw((vdynamic*)r7);
			label$417020e_3_182:
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = r1->nodeValue;
			StringBuf_add(r6,((vdynamic*)r7));
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = (String)s$a493bdd;
			StringBuf_add(r6,((vdynamic*)r7));
			r12 = r0->pretty;
			if( !r12 ) goto label$417020e_3_196;
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = (String)s$68b329d;
			StringBuf_add(r6,((vdynamic*)r7));
			label$417020e_3_196:
			goto label$417020e_3_318;
		case 3:
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Document;
			if( r4 == r9 ) goto label$417020e_3_205;
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Element;
			if( r4 != r9 ) goto label$417020e_3_210;
			label$417020e_3_205:
			r7 = (String)s$Bad_node_type_unexpected_;
			r4 = r1->nodeType;
			r8 = _Xml_XmlType_Impl__toString(r4);
			r7 = String___add__(r7,r8);
			hl_throw((vdynamic*)r7);
			label$417020e_3_210:
			r7 = r1->nodeValue;
			r19 = (EReg)hl_alloc_obj(&t$EReg);
			r8 = (String)s$7d574b5;
			r13 = (String)s$g;
			EReg_new(r19,r8,r13);
			r13 = (String)s$;
			r8 = EReg_replace(r19,r7,r13);
			r7 = r8;
			r8 = (String)s$c11bb7e;
			r8 = String___add__(r8,r7);
			r13 = (String)s$9a73e5b;
			r8 = String___add__(r8,r13);
			r7 = r8;
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			StringBuf_add(r6,((vdynamic*)r2));
			r8 = StringTools_trim(r7);
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			StringBuf_add(r6,((vdynamic*)r8));
			r12 = r0->pretty;
			if( !r12 ) goto label$417020e_3_236;
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r8 = (String)s$68b329d;
			StringBuf_add(r6,((vdynamic*)r8));
			label$417020e_3_236:
			goto label$417020e_3_318;
		case 4:
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Document;
			if( r4 == r9 ) goto label$417020e_3_245;
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Element;
			if( r4 != r9 ) goto label$417020e_3_250;
			label$417020e_3_245:
			r7 = (String)s$Bad_node_type_unexpected_;
			r4 = r1->nodeType;
			r8 = _Xml_XmlType_Impl__toString(r4);
			r7 = String___add__(r7,r8);
			hl_throw((vdynamic*)r7);
			label$417020e_3_250:
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = (String)s$_DOCTYPE_;
			r8 = r1->nodeValue;
			r7 = String___add__(r7,r8);
			r8 = (String)s$cedf8da;
			r7 = String___add__(r7,r8);
			StringBuf_add(r6,((vdynamic*)r7));
			r12 = r0->pretty;
			if( !r12 ) goto label$417020e_3_264;
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = (String)s$68b329d;
			StringBuf_add(r6,((vdynamic*)r7));
			label$417020e_3_264:
			goto label$417020e_3_318;
		case 5:
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Document;
			if( r4 == r9 ) goto label$417020e_3_273;
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Element;
			if( r4 != r9 ) goto label$417020e_3_278;
			label$417020e_3_273:
			r7 = (String)s$Bad_node_type_unexpected_;
			r4 = r1->nodeType;
			r8 = _Xml_XmlType_Impl__toString(r4);
			r7 = String___add__(r7,r8);
			hl_throw((vdynamic*)r7);
			label$417020e_3_278:
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = (String)s$b5a6ed8;
			r8 = r1->nodeValue;
			r7 = String___add__(r7,r8);
			r8 = (String)s$6ec256c;
			r7 = String___add__(r7,r8);
			StringBuf_add(r6,((vdynamic*)r7));
			r12 = r0->pretty;
			if( !r12 ) goto label$417020e_3_292;
			r6 = r0->output;
			if( r6 == NULL ) hl_null_access();
			r7 = (String)s$68b329d;
			StringBuf_add(r6,((vdynamic*)r7));
			label$417020e_3_292:
			goto label$417020e_3_318;
		case 6:
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Document;
			if( r4 == r9 ) goto label$417020e_3_306;
			r4 = r1->nodeType;
			r10 = ($Xml)g$_Xml;
			r9 = r10->Element;
			if( r4 == r9 ) goto label$417020e_3_306;
			r7 = (String)s$925902a;
			r4 = r1->nodeType;
			r8 = _Xml_XmlType_Impl__toString(r4);
			r7 = String___add__(r7,r8);
			hl_throw((vdynamic*)r7);
			label$417020e_3_306:
			r15 = (haxe__iterators__ArrayIterator)hl_alloc_obj(&t$haxe_iterators_ArrayIterator);
			r16 = r1->children;
			r17 = (hl__types__ArrayDyn)hl_dyn_castp(&r16,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
			haxe_iterators_ArrayIterator_new(r15,r17);
			r18 = hl_to_virtual(&t$vrt_15cf21a,(vdynamic*)r15);
			label$417020e_3_311:
			if( r18 == NULL ) hl_null_access();
			if( hl_vfields(r18)[0] ) r12 = ((bool (*)(vdynamic*))hl_vfields(r18)[0])(r18->value); else {
				vdynamic ret;
				hl_dyn_call_obj(r18->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
				r12 = (bool)ret.v.i;
			}
			if( !r12 ) goto label$417020e_3_318;
			if( hl_vfields(r18)[1] ) r5 = ((Xml (*)(vdynamic*))hl_vfields(r18)[1])(r18->value); else {
				r5 = (Xml)hl_dyn_call_obj(r18->value,&t$fun_efa96ab,151160317/*next*/,NULL,NULL);
			}
			haxe_xml_Printer_writeNode(r0,r5,r2);
			goto label$417020e_3_311;
	}
	label$417020e_3_318:
	return;
}

bool haxe_xml_Printer_hasChildren(haxe__xml__Printer r0,Xml r1) {
	String r7, r8;
	vvirtual *r12;
	hl__types__ArrayObj r10;
	bool r13;
	haxe__iterators__ArrayIterator r9;
	$Xml r6;
	Xml r4;
	hl__types__ArrayDyn r11;
	int r3, r5;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->nodeType;
	r6 = ($Xml)g$_Xml;
	r5 = r6->Document;
	if( r3 == r5 ) goto label$417020e_4_14;
	r3 = r1->nodeType;
	r6 = ($Xml)g$_Xml;
	r5 = r6->Element;
	if( r3 == r5 ) goto label$417020e_4_14;
	r7 = (String)s$925902a;
	r3 = r1->nodeType;
	r8 = _Xml_XmlType_Impl__toString(r3);
	r7 = String___add__(r7,r8);
	hl_throw((vdynamic*)r7);
	label$417020e_4_14:
	r9 = (haxe__iterators__ArrayIterator)hl_alloc_obj(&t$haxe_iterators_ArrayIterator);
	r10 = r1->children;
	r11 = (hl__types__ArrayDyn)hl_dyn_castp(&r10,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
	haxe_iterators_ArrayIterator_new(r9,r11);
	r12 = hl_to_virtual(&t$vrt_15cf21a,(vdynamic*)r9);
	label$417020e_4_19:
	if( r12 == NULL ) hl_null_access();
	if( hl_vfields(r12)[0] ) r13 = ((bool (*)(vdynamic*))hl_vfields(r12)[0])(r12->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r12->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r13 = (bool)ret.v.i;
	}
	if( !r13 ) goto label$417020e_4_52;
	if( hl_vfields(r12)[1] ) r4 = ((Xml (*)(vdynamic*))hl_vfields(r12)[1])(r12->value); else {
		r4 = (Xml)hl_dyn_call_obj(r12->value,&t$fun_efa96ab,151160317/*next*/,NULL,NULL);
	}
	if( r4 == NULL ) hl_null_access();
	r3 = r4->nodeType;
	switch(r3) {
		default:
			goto label$417020e_4_51;
		case 0:
		case 1:
			r13 = true;
			return r13;
		case 2:
		case 3:
			r3 = r4->nodeType;
			r6 = ($Xml)g$_Xml;
			r5 = r6->Document;
			if( r3 == r5 ) goto label$417020e_4_38;
			r3 = r4->nodeType;
			r6 = ($Xml)g$_Xml;
			r5 = r6->Element;
			if( r3 != r5 ) goto label$417020e_4_43;
			label$417020e_4_38:
			r7 = (String)s$Bad_node_type_unexpected_;
			r3 = r4->nodeType;
			r8 = _Xml_XmlType_Impl__toString(r3);
			r7 = String___add__(r7,r8);
			hl_throw((vdynamic*)r7);
			label$417020e_4_43:
			r7 = r4->nodeValue;
			r7 = StringTools_ltrim(r7);
			if( r7 == NULL ) hl_null_access();
			r3 = r7->length;
			r5 = 0;
			if( r3 == r5 ) goto label$417020e_4_51;
			r13 = true;
			return r13;
	}
	label$417020e_4_51:
	goto label$417020e_4_19;
	label$417020e_4_52:
	r13 = false;
	return r13;
}

